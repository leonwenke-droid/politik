<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Weltwirtschaftliche Verflechtungen · Interaktive Lernapp · Abitur PoWi Niedersachsen</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin></script>
  <style>
    :root {
      --primary: #1a73e8;
      --primary-light: #4285f4;
      --primary-dark: #1557b0;
      --accent: #34a853;
      --accent-bright: #5bb974;
      --bg: #f8f9fa;
      --surface: #ffffff;
      --text: #202124;
      --text-muted: #5f6368;
      --border: #dadce0;
      --radius: 12px;
      --radius-lg: 16px;
      --shadow: 0 1px 3px rgba(0,0,0,0.08);
      --shadow-hover: 0 4px 12px rgba(0,0,0,0.1);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Work Sans', 'DM Sans', -apple-system, sans-serif;
      font-size: 1rem;
      color: var(--text);
      background: var(--bg);
      line-height: 1.6;
    }
    .app { min-height: 100vh; display: flex; flex-direction: column; }
    .header {
      position: relative;
      background: linear-gradient(135deg, #1a73e8 0%, #4285f4 50%, #34a853 100%);
      color: white;
      padding: 2rem 1.5rem 1.5rem;
      text-align: center;
      border-bottom: none;
      overflow: hidden;
    }
    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -20%;
      width: 140%;
      height: 200%;
      background: radial-gradient(circle at 30% 50%, rgba(255,255,255,0.08) 0%, transparent 60%);
      pointer-events: none;
    }
    .header-inner { position: relative; z-index: 1; }
    .header h1 {
      font-family: 'DM Sans', -apple-system, sans-serif;
      font-size: clamp(1.5rem, 4vw, 2rem);
      margin: 0 0 0.35rem 0;
      font-weight: 700;
      letter-spacing: -0.02em;
      color: white;
    }
    .header .tagline {
      margin: 0;
      font-size: 0.9rem;
      color: rgba(255,255,255,0.85);
    }
    .header .tagline strong { color: white; }
    .progress-wrap {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 0.5rem 1rem;
      overflow-x: auto;
    }
    .progress-bar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      max-width: 960px;
      margin: 0 auto;
    }
    .progress-step {
      flex: 1;
      min-width: 0;
      max-width: 80px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
      padding: 0.4rem 0.25rem;
      border: none;
      background: none;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.7rem;
      color: var(--text-muted);
      border-radius: var(--radius);
      transition: background 0.2s, color 0.2s;
    }
    .progress-step:hover { background: var(--bg); color: var(--text); }
    .progress-step.active { color: var(--primary); font-weight: 600; }
    .progress-step.done { color: var(--accent); }
    .progress-step .dot {
      width: 8px; height: 8px;
      border-radius: 50%;
      background: var(--border);
      transition: background 0.2s;
    }
    .progress-step.active .dot { background: var(--primary); }
    .progress-step.done .dot { background: var(--accent); }
    .nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 0.5rem 1rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.25rem;
    }
    .nav-btn {
      font-family: inherit;
      font-size: 0.85rem;
      font-weight: 500;
      padding: 0.5rem 0.85rem;
      border: none;
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      border-radius: 8px;
      transition: color 0.2s, background 0.2s;
    }
    .nav-btn:hover { color: var(--primary); background: var(--bg); }
    .nav-btn.active {
      color: var(--primary);
      background: rgba(26,115,232,0.1);
    }
    .content {
      max-width: 960px;
      width: 100%;
      margin: 0 auto;
      padding: 2.5rem 1.5rem 3rem;
      animation: fadeIn 0.5s ease-out;
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .content > .curriculum-badge,
    .content > .section-title,
    .content > .section-intro,
    .content > .learning-goals,
    .content > .widgets-block,
    .content > .cards-grid,
    .content > .comparison-grid,
    .content > .next-section-wrap { width: 100%; }
    .content .curriculum-badge { display: block; text-align: center; }
    .content .section-title { text-align: center; }
    .content .section-intro { text-align: center; margin-left: auto; margin-right: auto; }
    .content-block {
      width: 100%;
      max-width: 720px;
      margin: 1.5rem auto;
      padding: 1.25rem 1.5rem;
      background: var(--surface);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
    }
    .content-block-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--primary);
      margin: 0 0 1rem 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    .content-block-title .icon-wrap {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: rgba(26, 115, 232, 0.12);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }
    .content h3.section-heading-interactive,
    .content h3[style*="color: var(--primary)"] { width: 100%; text-align: center; }
    .learning-goals { max-width: 720px; margin-left: auto; margin-right: auto; }
    .learning-goals h4 { text-align: center; }
    .aktualitaet-box,
    .example-box { max-width: 720px; margin-left: auto; margin-right: auto; text-align: center; }
    .aktualitaet-box p,
    .example-box p { text-align: left; }
    .person-cards { justify-content: center; width: 100%; }
    .sachbox { max-width: 720px; margin-left: auto; margin-right: auto; }
    .magic-hexagon-wrap { width: 100%; display: flex; flex-direction: column; align-items: center; }
    .glossary-table { width: 100%; max-width: 720px; margin-left: auto; margin-right: auto; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .section-title {
      font-family: 'DM Sans', inherit;
      font-size: clamp(1.5rem, 4vw, 2rem);
      color: var(--text);
      font-weight: 700;
      margin: 0 0 0.75rem 0;
      background: linear-gradient(135deg, var(--primary), #5b21b6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .section-intro {
      color: var(--text-muted);
      margin-bottom: 2rem;
      font-size: 1.05rem;
      max-width: 56ch;
      line-height: 1.65;
    }
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 1.5rem;
      max-width: 720px;
      margin-left: auto;
      margin-right: auto;
    }
    .card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow);
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      border: 1px solid rgba(0,0,0,0.04);
    }
    .card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }
    .card-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius);
      background: rgba(26,115,232,0.12);
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
    .card-title {
      font-family: 'DM Sans', inherit;
      font-size: 1.1rem;
      color: var(--text);
      font-weight: 600;
      margin: 0 0 0.75rem 0;
    }
    .card-content { font-size: 0.95rem; line-height: 1.65; text-align: left; }
    .card-content p { margin: 0 0 0.85rem 0; }
    .card-content p:last-child { margin-bottom: 0; }
    .card-content ul { margin: 0.5rem 0 0 1.25rem; padding: 0; }
    .card-content .lead { font-weight: 500; color: var(--text); }
    .card.expandable { cursor: pointer; transition: box-shadow 0.2s, transform 0.2s; }
    .card.expandable:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.1); }
    .card-expand-toggle { display: flex; align-items: center; gap: 0.35rem; font-size: 0.8rem; color: var(--primary); font-weight: 600; margin-top: 0.5rem; letter-spacing: 0.01em; }
    .card-expand-toggle .chevron { transition: transform 0.25s; display: inline-block; }
    .card.expanded .card-expand-toggle .chevron { transform: rotate(180deg); }
    .card-preview { font-size: 0.9rem; color: var(--text-muted); line-height: 1.5; margin: 0; }
    .card-detail { overflow: hidden; max-height: 0; opacity: 0; transition: max-height 0.35s ease, opacity 0.25s ease, margin 0.25s ease; margin-top: 0; }
    .card.expanded .card-detail { max-height: 600px; opacity: 1; margin-top: 0.75rem; }
    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin: 1.5rem auto;
      max-width: 720px;
    }
    @media (max-width: 640px) { .comparison-grid { grid-template-columns: 1fr; } }
    .comparison-card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow);
      border-left: 4px solid var(--accent);
    }
    .comparison-card h3 { margin: 0 0 1rem 0; font-size: 1.2rem; color: var(--primary); font-weight: 600; }
    .comparison-card ul { margin: 0; padding-left: 1.25rem; }
    .comparison-card li { margin-bottom: 0.5rem; }
    .pro { border-left-color: #1a472a; }
    .con { border-left-color: #8b6914; }
    .example-box {
      max-width: 720px;
      margin: 1.25rem auto;
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.25rem 1.5rem;
      border-left: 4px solid var(--accent);
      box-shadow: var(--shadow);
    }
    .example-box .label {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.06em;
      margin-bottom: 0.5rem;
    }
    .flow-diagram {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.5rem;
      margin: 1rem 0;
    }
    .flow-box {
      background: var(--surface);
      padding: 0.75rem 1rem;
      border-radius: 12px;
      font-size: 0.9rem;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    }
    .flow-arrow { color: var(--text-muted); font-size: 1.25rem; }
    .glossary-table {
      width: 100%;
      border-collapse: collapse;
      background: var(--surface);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
    }
    .glossary-table th,
    .glossary-table td {
      padding: 0.85rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }
    .glossary-table th {
      background: var(--primary);
      color: white;
      font-weight: 600;
      font-size: 0.9rem;
    }
    .glossary-table tr:last-child td { border-bottom: none; }
    .glossary-table td:first-child { font-weight: 500; color: var(--primary); }
    .quiz-card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: var(--shadow);
    }
    .quiz-card h3 { margin: 0 0 1rem 0; font-size: 1.1rem; color: var(--text); font-weight: 600; }
    .quiz-options { display: flex; flex-direction: column; gap: 0.5rem; }
    .quiz-option {
      font-family: inherit;
      font-size: 1rem;
      padding: 0.85rem 1rem;
      border: 2px solid var(--border);
      border-radius: 12px;
      background: var(--surface);
      cursor: pointer;
      text-align: left;
      transition: border-color 0.2s, background 0.2s;
    }
    .quiz-option:hover:not(.disabled) { border-color: var(--primary); background: var(--bg); }
    .quiz-option.correct { border-color: #1a472a; background: #e8f2eb; }
    .quiz-option.wrong { border-color: #b53d3d; background: #fcecec; }
    .quiz-option.disabled { cursor: default; opacity: 0.9; }
    .quiz-explanation {
      margin-top: 1rem;
      padding: 1rem;
      border-radius: 12px;
      background: var(--bg);
      font-size: 0.95rem;
      border-left: 4px solid var(--primary);
    }
    .quiz-score {
      text-align: center;
      padding: 2rem;
      background: var(--primary);
      color: white;
      border-radius: var(--radius-lg);
      margin-top: 1.5rem;
    }
    .quiz-score .number { font-size: 2.75rem; font-weight: 700; }
    .quiz-score .label { opacity: 0.95; }
    .curriculum-badge {
      display: inline-block;
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--primary);
      background: rgba(26,115,232,0.1);
      padding: 0.25rem 0.6rem;
      border-radius: 20px;
      margin-bottom: 1rem;
    }
    .learning-goals {
      background: rgba(26,115,232,0.06);
      border-radius: var(--radius);
      padding: 1rem 1.25rem;
      margin-bottom: 1.5rem;
      border-left: 4px solid var(--primary);
    }
    .learning-goals h4 { margin: 0 0 0.5rem 0; font-size: 0.9rem; color: var(--primary); }
    .learning-goals ul { margin: 0; padding-left: 1.25rem; font-size: 0.9rem; color: var(--text-muted); }
    .learning-goals li { margin-bottom: 0.35rem; }
    .lernpfad-box {
      width: 100%;
      max-width: 720px;
      margin-left: auto;
      margin-right: auto;
      margin-bottom: 1.5rem;
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1rem 1.25rem;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
    }
    .lernpfad-box h4 { margin: 0 0 0.75rem 0; font-size: 0.95rem; color: var(--primary); text-align: center; }
    .lernpfad-list { list-style: none; margin: 0; padding: 0; max-width: 560px; margin-left: auto; margin-right: auto; }
    .lernpfad-item {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      padding: 0.4rem 0;
      font-size: 0.9rem;
      color: var(--text);
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.15s;
    }
    .lernpfad-item:hover { background: var(--bg); }
    .lernpfad-item .lernpfad-check { flex-shrink: 0; width: 1.25rem; height: 1.25rem; border: 2px solid var(--border); border-radius: 4px; display: flex; align-items: center; justify-content: center; margin-top: 0.15rem; }
    .lernpfad-item.done .lernpfad-check { background: var(--accent); border-color: var(--accent); color: white; }
    .lernpfad-item.done { color: var(--text-muted); }
    .flashcard-wrap {
      max-width: 420px;
      margin: 0 auto 1.5rem;
      perspective: 1000px;
    }
    .flashcard {
      position: relative;
      min-height: 140px;
      cursor: pointer;
      transform-style: preserve-3d;
    }
    .flashcard.flipped { transform: rotateY(180deg); }
    .flashcard-face {
      position: absolute;
      width: 100%;
      backface-visibility: hidden;
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .flashcard-back { transform: rotateY(180deg); }
    .flashcard-face .term { font-weight: 600; color: var(--primary); font-size: 1.1rem; }
    .flashcard-face .def { color: var(--text); font-size: 0.95rem; line-height: 1.5; }
    .flashcard-nav {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin-top: 1rem;
    }
    .flashcard-nav button {
      font-family: inherit;
      padding: 0.5rem 1rem;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--surface);
      cursor: pointer;
      font-weight: 500;
    }
    .flashcard-nav button.primary { background: var(--primary); color: white; border-color: var(--primary); }
    .next-section-wrap {
      margin-top: 2.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border);
      text-align: center;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }
    .next-section-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      font-family: inherit;
      font-size: 1rem;
      font-weight: 600;
      color: white;
      background: var(--primary);
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s;
    }
    .next-section-btn:hover { background: var(--primary-dark); box-shadow: var(--shadow-hover); }
    .next-section-btn .arrow { font-size: 1.2rem; }
    .widgets-block { max-width: 720px; margin-left: auto; margin-right: auto; }
    .step-chain-interactive { max-width: 720px; margin: 1.5rem auto; }
    .step-chain-interactive .step {
      background: var(--surface);
      border-radius: 12px;
      padding: 0.85rem 1rem;
      margin-bottom: 0.5rem;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      border-left: 4px solid var(--border);
      transition: border-color 0.3s, opacity 0.3s;
    }
    .step-chain-interactive .step.revealed { border-left-color: var(--primary); }
    .step-chain-interactive .step.hidden { opacity: 0.5; }
    .step-chain-interactive button {
      margin-top: 0.75rem;
      padding: 0.5rem 1rem;
      font-family: inherit;
      border-radius: var(--radius);
      border: none;
      background: var(--primary);
      color: white;
      cursor: pointer;
      font-weight: 500;
    }
    .match-game { max-width: 720px; margin: 1.5rem auto; }
    .match-game .pools {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .match-game .pool {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1rem;
      min-height: 80px;
      border: 2px dashed var(--border);
    }
    .match-game .pool h4 { margin: 0 0 0.5rem 0; font-size: 0.9rem; color: var(--primary); }
    .match-game .items { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem; }
    .match-game .item {
      padding: 0.5rem 0.75rem;
      border-radius: 8px;
      background: var(--bg);
      border: 2px solid var(--border);
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.2s, border-color 0.2s;
    }
    .match-game .item.chosen { border-color: var(--primary); background: rgba(26,115,232,0.1); }
    .match-game .item.correct { border-color: #1a472a; background: #e8f2eb; }
    .match-game .item.wrong { border-color: #b53d3d; background: #fcecec; }
    .match-game .feedback { margin-top: 1rem; padding: 1rem; border-radius: 12px; background: var(--bg); font-size: 0.9rem; }
    .nav-btn .visited-dot {
      width: 6px; height: 6px;
      border-radius: 50%;
      background: var(--accent);
      margin-left: 4px;
      display: inline-block;
    }
    .comparison-card.pro { border-left-color: var(--primary); }
    .comparison-card.con { border-left-color: #ea8600; }
    /* Magisches Sechseck – echtes Hexagon (SVG) */
    .magic-hexagon-wrap {
      margin: 2rem 0;
      padding: 1rem 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }
    .magic-hexagon-title {
      text-align: center;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 1.25rem;
    }
    .magic-hexagon-svg-wrap {
      position: relative;
      width: 100%;
      max-width: 380px;
      margin: 0 auto;
    }
    .magic-hexagon-svg-wrap > .magic-hexagon-node { position: absolute; }
    .magic-hexagon-svg {
      width: 100%;
      height: auto;
      display: block;
    }
    .magic-hexagon-path {
      fill: rgba(26, 115, 232, 0.06);
      stroke: var(--primary);
      stroke-width: 2;
      stroke-linejoin: round;
      transition: fill 0.2s;
    }
    .magic-hexagon-node {
      cursor: pointer;
      outline: none;
      border: none;
      padding: 0.5rem 0.65rem;
      border-radius: 10px;
      background: var(--surface);
      border: 2px solid var(--primary);
      color: var(--primary);
      font-family: inherit;
      font-weight: 600;
      font-size: 0.7rem;
      line-height: 1.2;
      text-align: center;
      box-shadow: var(--shadow);
      transition: transform 0.2s, box-shadow 0.2s, background 0.2s, color 0.2s, border-color 0.2s;
      position: absolute;
      min-width: 88px;
      max-width: 100px;
    }
    .magic-hexagon-node:hover,
    .magic-hexagon-node.active {
      background: var(--primary);
      color: white;
      transform: scale(1.08);
      box-shadow: var(--shadow-hover);
    }
    .magic-hexagon-detail {
      margin-top: 1.5rem;
      padding: 1.25rem 1.5rem;
      background: var(--surface);
      border-radius: var(--radius);
      border-left: 4px solid var(--primary);
      box-shadow: var(--shadow);
      font-size: 0.95rem;
      line-height: 1.5;
      width: 100%;
      max-width: 420px;
    }
    .magic-hexagon-detail h4 { margin: 0 0 0.5rem 0; color: var(--primary); font-size: 1rem; }
    .magic-hexagon-detail p { margin: 0; }
    .sachbox {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.25rem 1.5rem;
      margin: 1rem 0;
      box-shadow: var(--shadow);
      border-left: 4px solid var(--primary);
    }
    .sachbox h4 { margin: 0 0 0.75rem 0; font-size: 1.05rem; color: var(--primary); }
    .sachbox p, .sachbox ul { margin: 0; font-size: 0.95rem; line-height: 1.55; }
    .sachbox ul { padding-left: 1.25rem; }
    .three-principles { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin: 1.5rem 0; }
    @media (max-width: 700px) { .three-principles { grid-template-columns: 1fr; } }
    .three-principles .principle-card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.25rem;
      box-shadow: var(--shadow);
      border-top: 4px solid var(--primary);
    }
    .three-principles .principle-card h4 { margin: 0 0 0.5rem 0; color: var(--primary); font-size: 1rem; }
    .three-principles .principle-card p { margin: 0; font-size: 0.9rem; line-height: 1.5; }
    .compare-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; font-size: 0.95rem; background: var(--surface); border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow); }
    .compare-table th, .compare-table td { padding: 0.75rem 1rem; text-align: left; border-bottom: 1px solid var(--border); }
    .compare-table th { background: var(--primary); color: white; font-weight: 600; }
    .compare-table tr:last-child td { border-bottom: none; }
    .compare-table .col-left { background: rgba(26, 115, 232, 0.08); }
    .compare-table .col-right { background: rgba(234, 134, 0, 0.08); }
    /* Personen & Theoretiker – für Abitur relevant */
    .person-cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 1rem; margin: 1.25rem 0; }
    .person-card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.25rem;
      box-shadow: var(--shadow);
      border-top: 4px solid var(--primary);
    }
    .person-card .person-name { font-weight: 700; font-size: 1.05rem; color: var(--text); margin: 0 0 0.25rem 0; }
    .person-card .person-meta { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.75rem; }
    .person-card .person-idea { font-size: 0.95rem; line-height: 1.5; margin: 0; }
    /* Livecharts-Container: ausgeblendet; bei WhatsApp-Bot-Integration SHOW_LIVECHARTS = true setzen */
    .livecharts-container { width: 100%; max-width: 960px; margin: 0 auto; padding: 0.75rem 1rem; background: var(--surface); border-bottom: 1px solid var(--border); }
    .livecharts-container.livecharts-hidden { display: none !important; }
    .livecharts-inner { min-height: 120px; }

    .aktualitaet-box {
      max-width: 720px;
      margin: 1.25rem auto;
      background: linear-gradient(135deg, rgba(26, 115, 232, 0.06) 0%, rgba(52, 168, 83, 0.06) 100%);
      border-radius: var(--radius);
      padding: 1.25rem 1.5rem;
      border-left: 4px solid var(--accent);
      box-shadow: var(--shadow);
    }
    .aktualitaet-box .aktualitaet-label { font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; color: var(--accent); margin-bottom: 0.5rem; text-align: center; }
    .aktualitaet-box .aktualitaet-title { font-weight: 600; font-size: 1rem; margin: 0 0 0.5rem 0; color: var(--text); text-align: center; }
    .aktualitaet-box p { margin: 0 0 0.5rem 0; font-size: 0.95rem; line-height: 1.5; }
    .aktualitaet-box .quelle { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.75rem; }
    .section-heading-interactive { font-size: 1rem; font-weight: 600; color: var(--primary); margin: 1.5rem 0 0.75rem 0; }
    .pruefungsbox {
      width: 100%;
      max-width: 720px;
      margin: 1.5rem auto;
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.25rem 1.5rem;
      box-shadow: var(--shadow);
      border-left: 4px solid var(--primary);
    }
    .pruefungsbox h4 { margin: 0 0 1rem 0; font-size: 1rem; color: var(--primary); text-align: center; }
    .pruefungsbox ul { margin: 0; padding-left: 1.25rem; }
    .pruefungsbox li { margin-bottom: 0.75rem; line-height: 1.5; }
    .pruefungsbox .antwort { font-weight: 500; color: var(--text); }
    .pruefungsbox .pruefung-item { margin-bottom: 1.25rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border); }
    .pruefungsbox .pruefung-item:last-child { border-bottom: none; }
    .pruefungsbox .antwort-toggle { margin-top: 0.5rem; font-size: 0.85rem; color: var(--primary); cursor: pointer; background: none; border: none; padding: 0.25rem 0; font-family: inherit; text-decoration: underline; }
    .pruefungsbox .antwort-toggle:hover { color: var(--primary-dark); }
    .pruefungsbox .antwort-reveal { margin-top: 0.5rem; padding: 0.75rem; background: rgba(26,115,232,0.06); border-radius: 8px; border-left: 3px solid var(--primary); }
    .pruefungsbox .mc-options { margin-top: 0.5rem; display: flex; flex-direction: column; gap: 0.35rem; }
    .pruefungsbox .mc-option { text-align: left; padding: 0.5rem 0.75rem; border: 2px solid var(--border); border-radius: 8px; background: var(--surface); cursor: pointer; font-family: inherit; font-size: 0.9rem; transition: border-color 0.2s, background 0.2s; }
    .pruefungsbox .mc-option:hover { border-color: var(--primary); background: rgba(26,115,232,0.05); }
    .pruefungsbox .mc-option.correct { border-color: var(--accent); background: rgba(52,168,83,0.1); }
    .pruefungsbox .mc-option.wrong { border-color: #c5221f; background: rgba(197,34,31,0.08); }
    .pruefungsbox .mc-option.disabled { cursor: default; opacity: 0.9; }
    .politikzyklus-list { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; margin: 1rem 0; }
    .politikzyklus-list span { background: var(--surface); padding: 0.5rem 1rem; border-radius: var(--radius); font-size: 0.9rem; font-weight: 500; color: var(--primary); border: 2px solid var(--primary); }
    /* Politikzyklus Kreis – gleicher Stil wie Mobilé */
    .zyklus-wrap {
      width: 100%; max-width: 720px; margin: 1.5rem auto;
      background: linear-gradient(145deg, #f0f4ff 0%, #f8f6ff 40%, #f0fdf4 100%);
      border-radius: 20px; border: none;
      box-shadow: 0 4px 30px rgba(0,0,0,0.06);
      padding: 1.5rem; text-align: center; overflow: visible;
    }
    .zyklus-wrap h4 {
      margin: 0 0 0.15rem; font-size: 1.15rem; font-weight: 700;
      background: linear-gradient(135deg, #1a73e8, #7c3aed); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }
    .zyklus-wrap .zyklus-hint { font-size: 0.82rem; color: var(--text-muted); margin-bottom: 0.75rem; }
    .zyklus-canvas { position: relative; width: 100%; max-width: 480px; margin: 0 auto; }
    .zyklus-canvas svg { display: block; width: 100%; height: auto; }
    .zyklus-canvas svg .z-node { cursor: pointer; transition: opacity 0.3s; }
    .zyklus-canvas svg .z-node.faded { opacity: 0.3; }
    .zyklus-canvas svg .z-node:hover .z-node-bg { filter: brightness(0.97); }
    .zyklus-canvas svg .z-arrow { transition: opacity 0.3s, stroke-width 0.3s; }
    .zyklus-canvas svg .z-arrow.dimmed { opacity: 0.08; }
    .zyklus-canvas svg .z-arrow.active { stroke-width: 3; }
    .zyklus-detail {
      margin-top: 1rem; padding: 1.25rem; border-radius: 16px;
      background: rgba(255,255,255,0.92); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.6);
      box-shadow: 0 4px 20px rgba(0,0,0,0.06);
      text-align: left; animation: fadeIn 0.3s ease-out;
    }
    .zyklus-detail-header { display: flex; align-items: center; gap: 0.65rem; margin-bottom: 0.5rem; }
    .zyklus-detail-num { display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: 10px; font-weight: 700; font-size: 0.95rem; color: #fff; flex-shrink: 0; }
    .zyklus-detail h5 { margin: 0; font-size: 1.05rem; color: var(--text); font-weight: 700; }
    .zyklus-detail p { margin: 0.4rem 0 0; font-size: 0.9rem; line-height: 1.6; color: var(--text-muted); }
    @media (max-width: 500px) {
      .zyklus-wrap { padding: 1rem 0.75rem; }
      .zyklus-canvas { max-width: 340px; }
    }
    .chunked-card-wrap { width: 100%; max-width: 720px; margin: 1.5rem auto; background: var(--surface); border-radius: var(--radius-lg); padding: 1.5rem; border: 1px solid var(--border); box-shadow: var(--shadow); }
    .chunked-card-wrap .chunked-step-label { font-size: 0.8rem; font-weight: 600; color: var(--primary); margin-bottom: 0.5rem; }
    .chunked-card-wrap .chunked-step-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 0.75rem; }
    .chunked-card-wrap .chunked-step-content { font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem; }
    .chunked-card-wrap .chunked-checkpoint { margin-top: 1rem; padding: 1rem; background: rgba(26,115,232,0.06); border-radius: var(--radius); border-left: 3px solid var(--primary); }
    .chunked-card-wrap .chunked-checkpoint-question { font-weight: 600; margin-bottom: 0.5rem; }
    .chunked-card-wrap .chunked-check-options { display: flex; flex-direction: column; gap: 0.35rem; }
    .chunked-card-wrap .chunked-check-option { text-align: left; padding: 0.5rem 0.75rem; border: 2px solid var(--border); border-radius: 8px; background: var(--surface); cursor: pointer; font-family: inherit; font-size: 0.9rem; }
    .chunked-card-wrap .chunked-check-option.correct { border-color: var(--accent); background: rgba(52,168,83,0.1); }
    .chunked-card-wrap .chunked-check-option.wrong { border-color: #c5221f; background: rgba(197,34,31,0.08); }
    .chunked-card-wrap .chunked-check-reveal { margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-muted); }
    .do-first-wrap { width: 100%; max-width: 720px; margin: 1.5rem auto; padding: 1.5rem; background: var(--surface); border-radius: var(--radius-lg); border: 1px solid var(--border); box-shadow: var(--shadow); }
    .do-first-wrap .do-first-question { font-weight: 600; margin-bottom: 1rem; font-size: 1rem; }
    .do-first-wrap .do-first-options { display: flex; flex-direction: column; gap: 0.5rem; }
    .do-first-wrap .do-first-option { text-align: left; padding: 0.75rem 1rem; border: 2px solid var(--border); border-radius: 8px; background: var(--bg); cursor: pointer; font-family: inherit; font-size: 0.95rem; transition: border-color 0.2s, background 0.2s; }
    .do-first-wrap .do-first-option:hover { border-color: var(--primary); }
    .do-first-wrap .do-first-option.correct { border-color: var(--accent); background: rgba(52,168,83,0.1); }
    .do-first-wrap .do-first-option.wrong { border-color: #c5221f; background: rgba(197,34,31,0.08); }
    .do-first-wrap .do-first-explanation { margin-top: 1rem; padding: 1rem; background: rgba(26,115,232,0.06); border-radius: var(--radius); border-left: 3px solid var(--primary); font-size: 0.95rem; }
    .concept-map-wrap { width: 100%; max-width: 720px; margin: 1.5rem auto; padding: 1.25rem; background: var(--surface); border-radius: var(--radius-lg); border: 1px solid var(--border); box-shadow: var(--shadow); }
    .concept-map-wrap h4 { margin: 0 0 1rem 0; font-size: 0.95rem; color: var(--primary); }
    /* Mobile / Mindmap – Verfassungsorgane */
    .mobile-wrap {
      width: 100%; max-width: 720px; margin: 1.5rem auto;
      background: linear-gradient(145deg, #f0f4ff 0%, #f8f6ff 40%, #f0fdf4 100%);
      border-radius: 20px; border: none;
      box-shadow: 0 4px 30px rgba(0,0,0,0.06);
      padding: 1.5rem; overflow: visible;
    }
    .mobile-wrap h4 { margin: 0 0 0.15rem 0; font-size: 1.15rem; font-weight: 700; text-align: center;
      background: linear-gradient(135deg, #1a73e8, #7c3aed); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .mobile-wrap .mobile-hint { font-size: 0.82rem; color: var(--text-muted); text-align: center; margin-bottom: 0.5rem; }
    .mobile-legend { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.4rem 0.9rem; margin-bottom: 0.75rem; }
    .mobile-legend-item { display: flex; align-items: center; gap: 0.3rem; font-size: 0.72rem; font-weight: 600; color: var(--text-muted); }
    .mobile-legend-dot { width: 10px; height: 10px; border-radius: 50%; }
    .mobile-canvas {
      position: relative; width: 100%; max-width: 620px; margin: 0 auto;
    }
    .mobile-canvas svg {
      display: block; width: 100%; height: auto;
    }
    .mobile-canvas svg path.conn { fill: none; stroke-width: 1.2; transition: stroke 0.4s, stroke-width 0.3s, opacity 0.3s; opacity: 0.22; stroke-linecap: round; }
    .mobile-canvas svg path.conn.active { stroke-width: 2.5; opacity: 1; }
    .mobile-canvas svg path.conn.dimmed { opacity: 0.05; }
    .mobile-canvas svg .m-node { cursor: pointer; }
    .mobile-canvas svg .m-node-bg { transition: opacity 0.3s, r 0.25s; }
    .mobile-canvas svg .m-node-border { fill: none; stroke-width: 2; transition: stroke-width 0.25s, r 0.25s; }
    .mobile-canvas svg .m-node:hover .m-node-border { stroke-width: 3; }
    .mobile-canvas svg .m-node.active .m-node-border { stroke-width: 3.5; }
    .mobile-canvas svg .m-node.faded { opacity: 0.3; }
    .mobile-canvas svg .m-node-icon { font-size: 22px; pointer-events: none; }
    .mobile-canvas svg .m-node-label { font-family: 'DM Sans', sans-serif; font-weight: 700; font-size: 9px; fill: #1e293b; pointer-events: none; }
    .mobile-canvas svg .m-node-tag { font-family: 'DM Sans', sans-serif; font-weight: 600; font-size: 6.5px; pointer-events: none; }
    .mobile-canvas svg .m-node.root .m-node-label { fill: #fff; font-size: 10px; }
    .mobile-canvas svg .m-node.root .m-node-tag { fill: rgba(255,255,255,0.8); }
    @keyframes svgFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
    }
    .mobile-canvas svg .m-node {
      animation: svgFloat 4s ease-in-out infinite;
      transform-box: fill-box;
      transform-origin: center center;
      will-change: transform;
    }
    .mobile-canvas svg .m-node:nth-of-type(1) { animation-delay: 0s; }
    .mobile-canvas svg .m-node:nth-of-type(2) { animation-delay: 0.4s; }
    .mobile-canvas svg .m-node:nth-of-type(3) { animation-delay: 0.8s; }
    .mobile-canvas svg .m-node:nth-of-type(4) { animation-delay: 1.2s; }
    .mobile-canvas svg .m-node:nth-of-type(5) { animation-delay: 1.6s; }
    .mobile-canvas svg .m-node:nth-of-type(6) { animation-delay: 2.0s; }
    .mobile-canvas svg .m-node:hover { animation-play-state: paused; }
    .mobile-canvas svg .m-node.active { animation-play-state: paused; }
    .mobile-detail {
      margin-top: 1rem; padding: 1.25rem; border-radius: 16px;
      background: rgba(255,255,255,0.92); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.6);
      box-shadow: 0 4px 20px rgba(0,0,0,0.06);
      animation: fadeIn 0.3s ease-out;
    }
    .mobile-detail-header { display: flex; align-items: center; gap: 0.65rem; margin-bottom: 0.65rem; }
    .mobile-detail-icon-wrap { width: 44px; height: 44px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; flex-shrink: 0; }
    .mobile-detail-icon-wrap[data-g="legislative"] { background: rgba(59,130,246,0.12); }
    .mobile-detail-icon-wrap[data-g="exekutive"] { background: rgba(245,158,11,0.1); }
    .mobile-detail-icon-wrap[data-g="judikative"] { background: rgba(16,185,129,0.1); }
    .mobile-detail-icon-wrap[data-g="staatsoberhaupt"] { background: rgba(139,92,246,0.1); }
    .mobile-detail-icon-wrap[data-g="grundgesetz"] { background: rgba(26,115,232,0.1); }
    .mobile-detail h5 { margin: 0; font-size: 1.05rem; color: var(--text); font-weight: 700; }
    .mobile-detail .mobile-detail-gewalt { display: inline-block; font-size: 0.68rem; font-weight: 700; padding: 0.12rem 0.5rem; border-radius: 8px; margin-top: 0.15rem; letter-spacing: 0.03em; text-transform: uppercase; }
    .mobile-detail .mobile-detail-gewalt[data-g="legislative"] { background: rgba(59,130,246,0.12); color: #2563eb; }
    .mobile-detail .mobile-detail-gewalt[data-g="exekutive"] { background: rgba(245,158,11,0.12); color: #d97706; }
    .mobile-detail .mobile-detail-gewalt[data-g="judikative"] { background: rgba(16,185,129,0.12); color: #059669; }
    .mobile-detail .mobile-detail-gewalt[data-g="staatsoberhaupt"] { background: rgba(139,92,246,0.12); color: #7c3aed; }
    .mobile-detail .mobile-detail-gewalt[data-g="grundgesetz"] { background: rgba(26,115,232,0.1); color: #1a73e8; }
    .mobile-detail-body { font-size: 0.9rem; line-height: 1.6; color: var(--text); margin: 0; }
    .mobile-detail-relation {
      margin-top: 0.75rem; padding: 0.75rem; border-radius: 10px;
      background: linear-gradient(135deg, rgba(26,115,232,0.04), rgba(139,92,246,0.04));
      border: 1px solid rgba(0,0,0,0.04);
    }
    .mobile-detail-relation strong { display: block; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); margin-bottom: 0.3rem; }
    .mobile-detail-relation span { font-size: 0.85rem; line-height: 1.5; color: var(--text); }
    @media (max-width: 500px) {
      .mobile-wrap { padding: 1rem 0.75rem; }
      .mobile-canvas svg .m-node-label { font-size: 7px; }
      .mobile-canvas svg .m-node-tag { font-size: 5.5px; }
      .mobile-canvas svg .m-node-icon { font-size: 18px; }
      .mobile-detail { padding: 1rem; }
    }
    .concept-map-node { margin-bottom: 0.5rem; border-left: 3px solid var(--primary); padding-left: 0.75rem; }
    .concept-map-node .node-label { font-weight: 600; font-size: 0.95rem; cursor: pointer; display: flex; align-items: center; gap: 0.35rem; }
    .concept-map-node .node-label:hover { color: var(--primary); }
    .concept-map-node .node-detail { font-size: 0.85rem; color: var(--text-muted); margin-top: 0.35rem; line-height: 1.5; }
    .concept-map-node .node-children { margin-left: 1rem; margin-top: 0.35rem; }
    @media (min-width: 768px) {
      .content-block, .cards-grid, .learning-goals, .sachbox, .glossary-table,
      .aktualitaet-box, .example-box, .pruefungsbox, .lernpfad-box, .comparison-grid,
      .widgets-block, .step-chain-interactive, .match-game, .chunked-card-wrap,
      .do-first-wrap, .concept-map-wrap { max-width: 900px; }
      .section-intro { max-width: 65ch; }
    }
    @media (min-width: 1024px) {
      .content-block, .cards-grid, .learning-goals, .sachbox, .glossary-table,
      .aktualitaet-box, .example-box, .pruefungsbox, .lernpfad-box, .comparison-grid,
      .widgets-block, .step-chain-interactive, .match-game, .chunked-card-wrap,
      .do-first-wrap, .concept-map-wrap { max-width: 960px; }
      .section-intro { max-width: 72ch; }
      .app-main .content { max-width: 1000px; margin-left: auto; margin-right: auto; }
    }
    @media (min-width: 900px) {
      .app-layout { display: flex; max-width: 1200px; margin: 0 auto; }
      .app-main { flex: 1; min-width: 0; }
    }
    .quiz-topic-tag { font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem; }
    .quiz-repeat-tip { margin-top: 1rem; padding: 1rem; border-radius: 12px; background: rgba(181,61,61,0.1); border-left: 4px solid #b53d3d; font-size: 0.9rem; }
    .hero {
      text-align: center;
      padding: 2.5rem 1.5rem 2rem;
      max-width: 720px;
      margin: 0 auto;
    }
    .hero .experiment-badge {
      display: inline-block;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--primary);
      margin-bottom: 1rem;
    }
    .hero h2 {
      font-family: 'DM Sans', inherit;
      font-size: clamp(1.75rem, 4vw, 2.5rem);
      font-weight: 700;
      color: var(--text);
      margin: 0 0 0.75rem 0;
      line-height: 1.2;
      letter-spacing: -0.02em;
    }
    .hero .subline {
      font-size: 1.05rem;
      color: var(--text-muted);
      margin: 0 0 1.5rem 0;
      line-height: 1.5;
    }
    .module-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 1rem;
      max-width: 960px;
      margin: 0 auto;
      padding: 0 1.5rem 2rem;
    }
    .module-card {
      display: block;
      background: var(--surface);
      border-radius: var(--radius-lg);
      padding: 1.25rem 1.25rem 1rem;
      border: 1px solid var(--border);
      border-left: 4px solid var(--primary);
      text-align: left;
      cursor: pointer;
      transition: box-shadow 0.2s, border-color 0.2s, transform 0.2s;
      text-decoration: none;
      color: inherit;
      position: relative;
      overflow: hidden;
    }
    .module-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), transparent);
      opacity: 0;
      transition: opacity 0.25s;
    }
    .module-card:hover::before { opacity: 1; }
    .module-card:hover {
      box-shadow: var(--shadow-hover);
      border-color: var(--primary);
      transform: translateY(-3px);
    }
    .module-card .module-icon { font-size: 1.75rem; margin-bottom: 0.5rem; }
    .module-card .module-title { font-weight: 600; font-size: 1rem; color: var(--text); margin: 0 0 0.35rem 0; }
    .module-card .module-desc { font-size: 0.85rem; color: var(--text-muted); margin: 0; line-height: 1.4; }
    .module-card .module-done {
      display: inline-flex; align-items: center; gap: 0.3rem;
      font-size: 0.75rem;
      color: #fff;
      background: var(--accent);
      font-weight: 600;
      margin-top: 0.65rem;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
    }
    .module-card { animation: staggerIn 0.4s ease-out both; }
    
    .section-illustration { font-size: 3rem; margin-bottom: 0.75rem; display: block; text-align: center; opacity: 0.9; }
    .app-footer {
      margin-top: auto;
      padding: 1.5rem 1.5rem;
      background: var(--surface);
      border-top: 1px solid var(--border);
      text-align: center;
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    .app-footer a { color: var(--primary); text-decoration: none; }
    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      font-size: 0.9rem;
      color: var(--primary);
      text-decoration: none;
      margin-bottom: 1rem;
      font-weight: 500;
    }
    .back-link:hover { text-decoration: underline; }
    .back-link-wrap { max-width: 960px; margin: 0 auto; padding: 0 1.5rem; text-align: center; }
    .course-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1.5rem 2rem;
    }
    .course-card {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      background: var(--surface);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      border: 1px solid var(--border);
      text-align: left;
      cursor: pointer;
      transition: box-shadow 0.2s, border-color 0.2s, transform 0.2s;
      text-decoration: none;
      color: inherit;
    }
    .course-card:hover {
      box-shadow: var(--shadow-hover);
      border-color: var(--primary);
      transform: translateY(-2px);
    }
    .course-card .course-badge { font-size: 0.7rem; font-weight: 600; color: var(--primary); margin-bottom: 0.5rem; }
    .course-card .course-title { font-weight: 700; font-size: 1.1rem; color: var(--text); margin: 0 0 0.35rem 0; }
    .course-card .course-desc { font-size: 0.9rem; color: var(--text-muted); margin: 0; line-height: 1.4; flex: 1; }
    .course-card .course-illustration { font-size: 2rem; height: 2.75rem; display: flex; align-items: center; margin-bottom: 0.75rem; white-space: nowrap; letter-spacing: 0.15em; }
    .course-card .course-progress { margin-top: auto; width: 100%; }
    .course-card[data-color="blue"] { border-top: 4px solid #1a73e8; }
    .course-card[data-color="green"] { border-top: 4px solid #34a853; }
    .course-card[data-color="orange"] { border-top: 4px solid #ea8600; }
    .course-card[data-color="purple"] { border-top: 4px solid #8e24aa; }
    .course-card .course-progress-bar { height: 4px; background: var(--border); border-radius: 2px; overflow: hidden; margin-top: 0.75rem; }
    .course-card .course-progress-fill { height: 100%; border-radius: 2px; transition: width 0.5s ease; }
    .course-card[data-color="blue"] .course-progress-fill { background: #1a73e8; }
    .course-card[data-color="green"] .course-progress-fill { background: #34a853; }
    .course-card[data-color="orange"] .course-progress-fill { background: #ea8600; }
    .course-card[data-color="purple"] .course-progress-fill { background: #8e24aa; }
    .course-card .course-progress-text { font-size: 0.75rem; color: var(--text-muted); margin-top: 0.25rem; }
    @keyframes staggerIn {
      from { opacity: 0; transform: translateY(16px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .stagger-item { animation: staggerIn 0.4s ease-out both; }
    .card { animation: staggerIn 0.4s ease-out both; }
    /* Abitur-PoWi Chat-Bot */
    .chatbot-toggle {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      border: none;
      box-shadow: 0 4px 14px rgba(26, 115, 232, 0.4);
      cursor: pointer;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .chatbot-toggle:hover { transform: scale(1.05); box-shadow: 0 6px 18px rgba(26, 115, 232, 0.5); }
    .chatbot-panel {
      position: fixed;
      bottom: 5rem;
      right: 1.5rem;
      width: 360px;
      max-width: calc(100vw - 2rem);
      height: 420px;
      max-height: 70vh;
      background: var(--surface);
      border-radius: var(--radius-lg);
      box-shadow: 0 8px 32px rgba(0,0,0,0.12);
      border: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      z-index: 999;
      overflow: hidden;
    }
    .chatbot-panel-header {
      padding: 0.75rem 1rem;
      background: var(--primary);
      color: white;
      font-weight: 600;
      font-size: 0.95rem;
    }
    .chatbot-messages {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .chatbot-msg { max-width: 90%; }
    .chatbot-msg.bot { align-self: flex-start; background: var(--bg); padding: 0.6rem 0.9rem; border-radius: 12px; font-size: 0.9rem; line-height: 1.5; }
    .chatbot-msg.user { align-self: flex-end; background: rgba(26, 115, 232, 0.12); color: var(--text); padding: 0.6rem 0.9rem; border-radius: 12px; font-size: 0.9rem; }
    .chatbot-input-wrap { display: flex; gap: 0.5rem; padding: 0.75rem; border-top: 1px solid var(--border); }
    .chatbot-input-wrap input {
      flex: 1;
      padding: 0.6rem 0.9rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 0.9rem;
    }
    .chatbot-input-wrap button {
      padding: 0.6rem 1rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      font-weight: 500;
      cursor: pointer;
    }
    .chatbot-input-wrap button:disabled { opacity: 0.7; cursor: not-allowed; }
    .chatbot-msg.loading { font-style: italic; color: var(--text-muted); }

    /* ===== LERNPLAKAT 13.2 ===== */
    .lernplakat {
      width: 100%; max-width: 1100px; margin: 0 auto;
      padding: 0 0.5rem 2rem;
    }
    .lernplakat-hero {
      text-align: center; padding: 2.5rem 1.5rem 2rem;
      background: linear-gradient(145deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
      border-radius: 24px; margin-bottom: 1.5rem;
      position: relative; overflow: hidden;
      box-shadow: 0 8px 40px rgba(0,0,0,0.25);
    }
    .lernplakat-hero::before {
      content: ''; position: absolute; inset: 0;
      background: radial-gradient(circle at 30% 40%, rgba(59,130,246,0.15) 0%, transparent 50%),
                  radial-gradient(circle at 70% 60%, rgba(52,211,153,0.1) 0%, transparent 50%);
      pointer-events: none;
    }
    .lernplakat-hero-inner { position: relative; z-index: 1; }
    .lernplakat-hero .lp-badge {
      display: inline-block; font-size: 0.7rem; font-weight: 700;
      text-transform: uppercase; letter-spacing: 0.12em;
      color: #93c5fd; background: rgba(59,130,246,0.15);
      padding: 0.3rem 0.85rem; border-radius: 20px; margin-bottom: 1rem;
      border: 1px solid rgba(59,130,246,0.25);
    }
    .lernplakat-hero h2 {
      font-family: 'DM Sans', sans-serif; font-size: clamp(1.5rem, 4vw, 2.5rem);
      font-weight: 800; color: white; margin: 0 0 0.5rem; letter-spacing: -0.03em;
      line-height: 1.15;
    }
    .lernplakat-hero h2 span {
      background: linear-gradient(135deg, #60a5fa, #34d399);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }
    .lernplakat-hero .lp-sub {
      color: rgba(255,255,255,0.7); font-size: 1rem; margin: 0;
      max-width: 52ch; margin-left: auto; margin-right: auto; line-height: 1.55;
    }
    .lernplakat-hero .lp-stats {
      display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; flex-wrap: wrap;
    }
    .lernplakat-hero .lp-stat {
      text-align: center;
    }
    .lernplakat-hero .lp-stat-num {
      font-size: 1.75rem; font-weight: 800; display: block;
      background: linear-gradient(135deg, #60a5fa, #34d399);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }
    .lernplakat-hero .lp-stat-label { font-size: 0.75rem; color: rgba(255,255,255,0.5); text-transform: uppercase; letter-spacing: 0.06em; }
    .lp-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .lp-tile {
      background: var(--surface); border-radius: 20px;
      padding: 1.5rem; position: relative;
      border: 1px solid var(--border);
      box-shadow: 0 2px 16px rgba(0,0,0,0.04);
      transition: box-shadow 0.3s, transform 0.3s;
      overflow: hidden;
    }
    .lp-tile:hover { box-shadow: 0 8px 32px rgba(0,0,0,0.08); transform: translateY(-2px); }
    .lp-tile::before {
      content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px;
      border-radius: 20px 20px 0 0;
    }
    .lp-tile[data-color="blue"]::before { background: linear-gradient(90deg, #3b82f6, #60a5fa); }
    .lp-tile[data-color="green"]::before { background: linear-gradient(90deg, #10b981, #34d399); }
    .lp-tile[data-color="orange"]::before { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
    .lp-tile[data-color="red"]::before { background: linear-gradient(90deg, #ef4444, #f87171); }
    .lp-tile[data-color="purple"]::before { background: linear-gradient(90deg, #8b5cf6, #a78bfa); }
    .lp-tile-header { display: flex; align-items: center; gap: 0.65rem; margin-bottom: 1rem; }
    .lp-tile-icon {
      width: 44px; height: 44px; border-radius: 12px;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.4rem; flex-shrink: 0;
    }
    .lp-tile[data-color="blue"] .lp-tile-icon { background: rgba(59,130,246,0.12); }
    .lp-tile[data-color="green"] .lp-tile-icon { background: rgba(16,185,129,0.12); }
    .lp-tile[data-color="orange"] .lp-tile-icon { background: rgba(245,158,11,0.12); }
    .lp-tile[data-color="red"] .lp-tile-icon { background: rgba(239,68,68,0.12); }
    .lp-tile[data-color="purple"] .lp-tile-icon { background: rgba(139,92,246,0.12); }
    .lp-tile-title { font-size: 1.1rem; font-weight: 700; color: var(--text); margin: 0; line-height: 1.25; }
    .lp-tile-subtitle { font-size: 0.75rem; color: var(--text-muted); margin-top: 0.15rem; }
    .lp-tile-body { font-size: 0.88rem; line-height: 1.6; color: var(--text); }
    .lp-tile-body ul { margin: 0.3rem 0 0.5rem 1.1rem; padding: 0; }
    .lp-tile-body li { margin-bottom: 0.25rem; }
    .lp-tile-body strong { color: var(--text); }
    .lp-tile-tag {
      display: inline-block; font-size: 0.68rem; font-weight: 700;
      padding: 0.15rem 0.5rem; border-radius: 6px; margin-right: 0.3rem; margin-bottom: 0.3rem;
    }
    .lp-tile[data-color="blue"] .lp-tile-tag { background: rgba(59,130,246,0.1); color: #2563eb; }
    .lp-tile[data-color="green"] .lp-tile-tag { background: rgba(16,185,129,0.1); color: #059669; }
    .lp-tile[data-color="orange"] .lp-tile-tag { background: rgba(245,158,11,0.1); color: #d97706; }
    .lp-tile[data-color="red"] .lp-tile-tag { background: rgba(239,68,68,0.1); color: #dc2626; }
    .lp-tile[data-color="purple"] .lp-tile-tag { background: rgba(139,92,246,0.1); color: #7c3aed; }
    .lp-tile-persons {
      margin-top: 0.75rem; padding-top: 0.65rem;
      border-top: 1px solid var(--border);
    }
    .lp-tile-persons .lp-person {
      display: flex; align-items: flex-start; gap: 0.5rem;
      font-size: 0.82rem; margin-bottom: 0.35rem;
    }
    .lp-person-avatar {
      width: 28px; height: 28px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 0.75rem; flex-shrink: 0; font-weight: 700; color: white;
    }
    .lp-tile[data-color="blue"] .lp-person-avatar { background: #3b82f6; }
    .lp-tile[data-color="green"] .lp-person-avatar { background: #10b981; }
    .lp-tile[data-color="orange"] .lp-person-avatar { background: #f59e0b; }
    .lp-tile[data-color="red"] .lp-person-avatar { background: #ef4444; }
    .lp-tile[data-color="purple"] .lp-person-avatar { background: #8b5cf6; }
    .lp-person-info strong { display: block; font-size: 0.82rem; color: var(--text); }
    .lp-person-info span { font-size: 0.78rem; color: var(--text-muted); }
    .lp-tile.full-width { grid-column: 1 / -1; }
    .lp-connections {
      grid-column: 1 / -1; padding: 1.25rem;
      background: linear-gradient(135deg, rgba(59,130,246,0.04), rgba(16,185,129,0.04));
      border-radius: 16px; border: 1px dashed var(--border);
    }
    .lp-connections h4 { margin: 0 0 0.75rem; font-size: 0.95rem; color: var(--primary); text-align: center; }
    .lp-conn-list { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; }
    .lp-conn-item {
      display: inline-flex; align-items: center; gap: 0.35rem;
      font-size: 0.8rem; padding: 0.35rem 0.75rem;
      background: var(--surface); border-radius: 20px;
      border: 1px solid var(--border); color: var(--text);
      box-shadow: 0 1px 4px rgba(0,0,0,0.04);
    }
    .lp-conn-item .arrow { color: var(--primary); font-weight: 700; }
    .lp-summary {
      grid-column: 1 / -1; padding: 1.5rem;
      background: linear-gradient(145deg, #0f172a, #1e293b);
      border-radius: 20px; color: white;
      box-shadow: 0 4px 24px rgba(0,0,0,0.15);
    }
    .lp-summary h4 {
      margin: 0 0 1rem; font-size: 1.1rem; text-align: center;
      background: linear-gradient(135deg, #60a5fa, #34d399);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }
    .lp-summary-grid {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 0.75rem;
    }
    .lp-summary-item {
      padding: 0.75rem; border-radius: 12px;
      background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.08);
    }
    .lp-summary-item strong { display: block; font-size: 0.82rem; color: #93c5fd; margin-bottom: 0.2rem; }
    .lp-summary-item span { font-size: 0.8rem; color: rgba(255,255,255,0.7); line-height: 1.45; }
    .lp-wirkungskette {
      display: flex; align-items: center; justify-content: center;
      gap: 0.35rem; flex-wrap: wrap; margin: 0.5rem 0;
    }
    .lp-wk-step {
      padding: 0.4rem 0.7rem; border-radius: 10px; font-size: 0.78rem;
      font-weight: 600; background: rgba(239,68,68,0.08); color: #dc2626;
      border: 1px solid rgba(239,68,68,0.15);
    }
    .lp-wk-arrow { color: var(--text-muted); font-size: 0.9rem; }

    @media (max-width: 768px) {
      .lp-grid { grid-template-columns: 1fr; }
      .lp-tile.full-width { grid-column: 1; }
      .lp-connections { grid-column: 1; }
      .lp-summary { grid-column: 1; }
      .lernplakat-hero .lp-stats { gap: 1.25rem; }
      .lp-summary-grid { grid-template-columns: 1fr 1fr; }
    }
    @media (max-width: 480px) {
      .lernplakat { padding: 0 0.25rem 1.5rem; }
      .lernplakat-hero { padding: 1.5rem 1rem; border-radius: 16px; margin-bottom: 1rem; }
      .lernplakat-hero h2 { font-size: 1.3rem; }
      .lernplakat-hero .lp-sub { font-size: 0.88rem; }
      .lp-grid { gap: 0.75rem; }
      .lp-tile { padding: 1.1rem; border-radius: 16px; }
      .lp-tile-icon { width: 38px; height: 38px; font-size: 1.2rem; }
      .lp-tile-title { font-size: 1rem; }
      .lp-tile-body { font-size: 0.84rem; }
      .lp-conn-item { font-size: 0.75rem; padding: 0.3rem 0.6rem; }
      .lp-summary { padding: 1.1rem; border-radius: 16px; }
      .lp-summary-grid { grid-template-columns: 1fr; }
      .lp-summary-item { padding: 0.6rem; }
      .lp-wk-step { font-size: 0.72rem; padding: 0.3rem 0.55rem; }
    }

    /* ===== MOBILE RESPONSIVE ===== */

    /* Tablet (max 768px) */
    @media (max-width: 768px) {
      .header { padding: 1.5rem 1rem 1.25rem; }
      .header h1 { font-size: clamp(1.25rem, 5vw, 1.75rem); }
      .header .tagline { font-size: 0.82rem; }
      .content { padding: 1.75rem 1rem 2.5rem; }
      .content-block { padding: 1rem 1.1rem; }
      .course-grid { grid-template-columns: repeat(2, 1fr); padding: 0 1rem 1.5rem; gap: 0.75rem; }
      .module-grid { padding: 0 1rem 1.5rem; gap: 0.75rem; }
      .course-card { padding: 1.25rem; }
      .module-card { padding: 1rem; }
      .cards-grid { gap: 1rem; }
      .card { padding: 1.25rem; }
      .quiz-card { padding: 1.25rem; }
      .pruefungsbox { padding: 1rem 1.1rem; }
      .lernpfad-box { padding: 0.85rem 1rem; }
      .flashcard-wrap { max-width: 360px; }
      .magic-hexagon-svg-wrap { max-width: 320px; }
      .magic-hexagon-node { font-size: 0.65rem; min-width: 76px; max-width: 90px; padding: 0.4rem 0.5rem; }
      .match-game .pools { grid-template-columns: 1fr; }
      .compare-table th, .compare-table td { padding: 0.65rem 0.75rem; font-size: 0.9rem; }
      .glossary-table th, .glossary-table td { padding: 0.65rem 0.75rem; font-size: 0.9rem; }
    }

    /* Smartphone (max 480px) */
    @media (max-width: 480px) {
      body { font-size: 0.95rem; }
      .header { padding: 1.25rem 0.75rem 1rem; }
      .header h1 { font-size: 1.2rem; letter-spacing: -0.01em; }
      .header .tagline { font-size: 0.78rem; line-height: 1.4; }

      /* Navigation – horizontal scrollbar statt wrap */
      .nav {
        flex-wrap: nowrap;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        justify-content: flex-start;
        gap: 0.15rem;
        padding: 0.4rem 0.5rem;
      }
      .nav::-webkit-scrollbar { display: none; }
      .nav-btn {
        flex-shrink: 0;
        font-size: 0.78rem;
        padding: 0.4rem 0.65rem;
        white-space: nowrap;
      }

      /* Progress bar */
      .progress-wrap { padding: 0.35rem 0.5rem; }
      .progress-step { font-size: 0.6rem; padding: 0.3rem 0.15rem; }
      .progress-step .dot { width: 6px; height: 6px; }

      /* Content area */
      .content { padding: 1.25rem 0.75rem 2rem; }
      .content-block { padding: 0.85rem 0.9rem; margin: 1rem auto; }
      .section-title { font-size: 1.25rem !important; margin-bottom: 0.5rem; }
      .section-intro { font-size: 0.92rem; margin-bottom: 1.25rem; }

      /* Course & Module grids */
      .course-grid {
        grid-template-columns: 1fr;
        padding: 0 0.75rem 1.5rem;
        gap: 0.85rem;
      }
      .course-card {
        padding: 1.75rem 1.25rem;
      }
      .course-card .course-illustration { font-size: 2.5rem; height: 3.25rem; margin-bottom: 1rem; }
      .course-card .course-title { font-size: 1.15rem; margin-bottom: 0.5rem; }
      .course-card .course-desc { font-size: 0.95rem; line-height: 1.6; margin-bottom: 0.5rem; }
      .course-card .course-badge { margin-bottom: 0.65rem; }
      .course-card .course-progress-bar { margin-top: 1rem; }

      .module-grid {
        grid-template-columns: 1fr;
        padding: 0 0.75rem 1.5rem;
        gap: 0.6rem;
      }
      .module-card { padding: 0.85rem 1rem; }
      .module-card .module-icon { font-size: 1.5rem; margin-bottom: 0.35rem; }
      .module-card .module-title { font-size: 0.95rem; }
      .module-card .module-desc { font-size: 0.82rem; }

      /* Hero section */
      .hero { padding: 1.5rem 0.75rem 1.25rem; }
      .hero h2 { font-size: 1.5rem; }
      .hero .subline { font-size: 0.92rem; }

      /* Cards */
      .cards-grid {
        grid-template-columns: 1fr;
        gap: 0.75rem;
      }
      .card { padding: 1rem; }
      .card-title { font-size: 1rem; }
      .card-content { font-size: 0.9rem; }
      .card-icon { width: 40px; height: 40px; font-size: 1.25rem; margin-bottom: 0.75rem; }

      /* Comparison grid */
      .comparison-grid { gap: 0.75rem; }
      .comparison-card { padding: 1rem; }
      .comparison-card h3 { font-size: 1.05rem; }

      /* Boxes */
      .sachbox { padding: 1rem; }
      .sachbox h4 { font-size: 0.95rem; }
      .sachbox p, .sachbox ul { font-size: 0.9rem; }

      .aktualitaet-box { padding: 1rem; }
      .aktualitaet-box .aktualitaet-title { font-size: 0.95rem; }
      .aktualitaet-box p { font-size: 0.9rem; }

      .example-box { padding: 1rem; }

      .pruefungsbox { padding: 0.85rem 0.9rem; }
      .pruefungsbox h4 { font-size: 0.95rem; }
      .pruefungsbox li { font-size: 0.9rem; margin-bottom: 0.6rem; }
      .pruefungsbox .mc-option { padding: 0.45rem 0.65rem; font-size: 0.85rem; }

      /* Learning path */
      .lernpfad-box { padding: 0.75rem 0.85rem; }
      .lernpfad-item { font-size: 0.85rem; }

      /* Learning goals */
      .learning-goals { padding: 0.85rem 1rem; }
      .learning-goals h4 { font-size: 0.85rem; }
      .learning-goals ul { font-size: 0.85rem; }

      /* Quiz */
      .quiz-card { padding: 1rem; margin-bottom: 1rem; }
      .quiz-card h3 { font-size: 1rem; }
      .quiz-option { padding: 0.7rem 0.85rem; font-size: 0.9rem; }
      .quiz-explanation { padding: 0.85rem; font-size: 0.88rem; }
      .quiz-score { padding: 1.5rem; }
      .quiz-score .number { font-size: 2.25rem; }

      /* Flashcards */
      .flashcard-wrap { max-width: 100%; }
      .flashcard-face { padding: 1.1rem; }
      .flashcard-face .term { font-size: 1rem; }
      .flashcard-face .def { font-size: 0.9rem; }
      .flashcard-nav { gap: 0.5rem; }
      .flashcard-nav button { padding: 0.4rem 0.85rem; font-size: 0.9rem; }

      /* Magic hexagon */
      .magic-hexagon-svg-wrap { max-width: 280px; }
      .magic-hexagon-node { font-size: 0.6rem; min-width: 68px; max-width: 82px; padding: 0.35rem 0.4rem; border-radius: 8px; }
      .magic-hexagon-detail { padding: 1rem; font-size: 0.9rem; }
      .magic-hexagon-detail h4 { font-size: 0.95rem; }

      /* Tables */
      .glossary-table { font-size: 0.85rem; }
      .glossary-table th, .glossary-table td { padding: 0.5rem 0.65rem; }
      .compare-table { font-size: 0.85rem; }
      .compare-table th, .compare-table td { padding: 0.55rem 0.65rem; }

      /* Person cards */
      .person-cards { grid-template-columns: 1fr; gap: 0.75rem; }
      .person-card { padding: 1rem; }
      .person-card .person-name { font-size: 0.95rem; }
      .person-card .person-idea { font-size: 0.88rem; }

      /* Chunked cards */
      .chunked-card-wrap { padding: 1rem; }
      .chunked-card-wrap .chunked-step-title { font-size: 1rem; }
      .chunked-card-wrap .chunked-step-content { font-size: 0.9rem; }

      /* Do-first */
      .do-first-wrap { padding: 1rem; }
      .do-first-wrap .do-first-question { font-size: 0.95rem; }
      .do-first-wrap .do-first-option { padding: 0.65rem 0.85rem; font-size: 0.9rem; }
      .do-first-wrap .do-first-explanation { padding: 0.85rem; font-size: 0.9rem; }

      /* Concept map */
      .concept-map-wrap { padding: 1rem; }

      /* Step chain */
      .step-chain-interactive .step { padding: 0.7rem 0.85rem; font-size: 0.9rem; }

      /* Match game */
      .match-game .pools { grid-template-columns: 1fr; gap: 0.75rem; }
      .match-game .pool { padding: 0.85rem; }
      .match-game .item { padding: 0.4rem 0.6rem; font-size: 0.85rem; }

      /* Mobile/Verfassungsorgane */
      .mobile-wrap { padding: 1rem 0.5rem; margin: 1rem auto; }
      .mobile-wrap h4 { font-size: 1.05rem; }
      .mobile-detail { padding: 0.85rem; }
      .mobile-detail h5 { font-size: 0.95rem; }
      .mobile-detail-body { font-size: 0.85rem; }
      .mobile-detail-icon-wrap { width: 38px; height: 38px; font-size: 1.2rem; }

      /* Politikzyklus */
      .zyklus-wrap { padding: 0.85rem 0.5rem; margin: 1rem auto; }
      .zyklus-wrap h4 { font-size: 1.05rem; }
      .zyklus-detail { padding: 0.85rem; }
      .zyklus-detail h5 { font-size: 0.95rem; }
      .zyklus-detail p { font-size: 0.85rem; }

      /* Three principles */
      .three-principles .principle-card { padding: 1rem; }
      .three-principles .principle-card h4 { font-size: 0.95rem; }
      .three-principles .principle-card p { font-size: 0.85rem; }

      /* Flow diagram */
      .flow-diagram { gap: 0.3rem; }
      .flow-box { padding: 0.55rem 0.75rem; font-size: 0.82rem; }
      .flow-arrow { font-size: 1rem; }

      /* Next section button */
      .next-section-btn { padding: 0.65rem 1.25rem; font-size: 0.9rem; }
      .next-section-wrap { margin-top: 2rem; }

      /* Back link */
      .back-link-wrap { padding: 0 0.75rem; }
      .back-link { font-size: 0.85rem; }

      /* Footer */
      .app-footer { padding: 1rem 0.75rem; font-size: 0.78rem; }

      /* Chatbot – fullscreen-ähnlich auf Handy */
      .chatbot-toggle {
        bottom: 1rem;
        right: 1rem;
        width: 48px;
        height: 48px;
        font-size: 1.3rem;
      }
      .chatbot-panel {
        bottom: 0;
        right: 0;
        left: 0;
        width: 100%;
        max-width: 100vw;
        height: 70vh;
        max-height: 70vh;
        border-radius: var(--radius-lg) var(--radius-lg) 0 0;
        border-bottom: none;
      }
      .chatbot-panel-header { padding: 0.65rem 0.85rem; font-size: 0.9rem; }
      .chatbot-messages { padding: 0.75rem; gap: 0.6rem; }
      .chatbot-msg.bot, .chatbot-msg.user { font-size: 0.85rem; padding: 0.5rem 0.75rem; max-width: 88%; }
      .chatbot-input-wrap { padding: 0.5rem; gap: 0.35rem; }
      .chatbot-input-wrap input { padding: 0.5rem 0.75rem; font-size: 0.85rem; }
      .chatbot-input-wrap button { padding: 0.5rem 0.85rem; font-size: 0.85rem; }

      /* Buttons generell */
      button.primary, .primary { font-size: 0.9rem; padding: 0.55rem 1.1rem; }
      .antwort-toggle { font-size: 0.82rem; }

      /* Curriculum badge */
      .curriculum-badge { font-size: 0.65rem; padding: 0.2rem 0.5rem; }

      /* Widgets block */
      .widgets-block { margin-left: auto; margin-right: auto; }
    }

    /* Very small phones (max 360px) */
    @media (max-width: 360px) {
      .header h1 { font-size: 1.05rem; }
      .header .tagline { font-size: 0.72rem; }
      .nav-btn { font-size: 0.72rem; padding: 0.35rem 0.5rem; }
      .content { padding: 1rem 0.5rem 1.75rem; }
      .section-title { font-size: 1.1rem !important; }
      .course-grid, .module-grid { padding: 0 0.5rem 1.25rem; }
      .cards-grid { padding: 0; }
      .card { padding: 0.85rem; }
      .quiz-option { padding: 0.6rem 0.7rem; font-size: 0.85rem; }
      .magic-hexagon-svg-wrap { max-width: 240px; }
      .magic-hexagon-node { font-size: 0.55rem; min-width: 58px; max-width: 72px; padding: 0.3rem 0.35rem; }
      .chatbot-panel { height: 75vh; }
      .mobile-canvas svg .m-node-label { font-size: 6px; }
      .mobile-canvas svg .m-node-icon { font-size: 15px; }
    }

    /* Touch-friendly tap targets */
    @media (hover: none) and (pointer: coarse) {
      .nav-btn { min-height: 40px; display: inline-flex; align-items: center; }
      .quiz-option { min-height: 44px; }
      .do-first-wrap .do-first-option { min-height: 44px; }
      .pruefungsbox .mc-option { min-height: 44px; }
      .chunked-card-wrap .chunked-check-option { min-height: 44px; }
      .match-game .item { min-height: 40px; }
      .lernpfad-item { min-height: 40px; }
      .progress-step { min-height: 36px; }
      .module-card { min-height: 64px; }
      .card:hover { transform: none; }
      .module-card:hover { transform: none; }
      .course-card:hover { transform: none; }
    }

    /* Safe area for notch phones */
    @supports (padding: env(safe-area-inset-bottom)) {
      .chatbot-toggle { bottom: calc(1rem + env(safe-area-inset-bottom)); }
      .chatbot-panel { padding-bottom: env(safe-area-inset-bottom); }
      .app-footer { padding-bottom: calc(1rem + env(safe-area-inset-bottom)); }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel" data-presets="react">
    const { useState } = React;

    // Livecharts: für alle ausgeblendet; für WhatsApp-Bot-Integration auf true setzen, dann wird der Container angezeigt
    const SHOW_LIVECHARTS = false;

    // Weitere Halbjahre: Neues Objekt mit id, curriculum, name, shortName, description, modules (Array mit id, label, shortLabel, desc, icon, component, ggf. outline) hinzufügen.
    const COURSES = [
      {
        id: '12-1',
        curriculum: '12.1',
        name: 'Politische Partizipation zwischen Anspruch und Wirklichkeit',
        shortName: 'Partizipation',
        description: 'Formen und Funktionen von Partizipation, Verfassungsorgane, politische Akteure, Demokratietheorien.',
        modules: [
          { id: 'partizipation-formen', label: '📋 Formen & Funktionen', shortLabel: 'Formen und Funktionen von Partizipation', desc: 'Partizipation in der Demokratie', icon: '📋', component: 'FullContentSection' },
          { id: 'verfassungsorgane', label: '🏛️ Verfassungsorgane', shortLabel: 'Verfassungsorgane im politischen Prozess', desc: 'Willensbildung und Entscheidung', icon: '🏛️', component: 'FullContentSection' },
          { id: 'politische-akteure', label: '👥 Politische Akteure', shortLabel: 'Politische Akteure im politischen Prozess', desc: 'Bürger, Parteien, Verbände, Initiativen', icon: '👥', component: 'FullContentSection' },
          { id: 'demokratietheorien', label: '📐 Demokratietheorien', shortLabel: 'Demokratietheorien (erhöhtes Niveau)', desc: 'Repräsentativ vs. plebiszitär', icon: '📐', component: 'FullContentSection' },
          { id: 'quiz-12-1', label: '🎯 Quiz', shortLabel: 'Quiz 12.1', desc: 'Teste dein Wissen zu 12.1', icon: '🎯', component: 'QuizSection', quizData: 'QUIZ_12_1', quizLabel: '12.1 – Politische Partizipation' },
        ],
      },
      {
        id: '12-2',
        curriculum: '12.2',
        name: 'Soziale Marktwirtschaft zwischen Anspruch und Wirklichkeit',
        shortName: 'Soziale Marktwirtschaft',
        description: 'Soziale Ungleichheit, Prinzipien der sozialen Marktwirtschaft, Markt und Staat, Wirtschaftspolitik.',
        modules: [
          { id: 'ungleichheit', label: '📊 Ungleichheit & Verteilung', shortLabel: 'Soziale Ungleichheit und Verteilungsgerechtigkeit', desc: 'Einkommen, Vermögen, Gerechtigkeit', icon: '📊', component: 'FullContentSection' },
          { id: 'prinzipien', label: '⚖️ Prinzipien', shortLabel: 'Prinzipien der sozialen Marktwirtschaft', desc: 'Sozial-, Wettbewerbs-, Marktkonformitätsprinzip', icon: '⚖️', component: 'FullContentSection' },
          { id: 'markt-staat', label: '🏛️ Markt und Staat', shortLabel: 'Markt und Staat in der Sozialen Marktwirtschaft', desc: 'Aufgaben des Staates', icon: '🏛️', component: 'FullContentSection' },
          { id: 'wirtschaftspolitik', label: '🎯 Wirtschaftspolitik', shortLabel: 'Wirtschaftspolitische Ziele, Maßnahmen und Zielkonflikte', desc: 'Magisches Sechseck', icon: '🎯', component: 'FullContentSection' },
          { id: 'verteilung-erhoeht', label: '📈 Verteilung (erhöht)', shortLabel: 'Einkommens- und Vermögensverteilung (erhöhtes Niveau)', desc: 'Umverteilung, politische Konzepte', icon: '📈', component: 'FullContentSection' },
          { id: 'wachstum-umwelt', label: '🌱 Wachstum & Umwelt', shortLabel: 'Wirtschaftswachstum und Schutz natürlicher Lebensgrundlagen', desc: 'Zielkonflikte', icon: '🌱', component: 'FullContentSection' },
          { id: 'quiz-12-2', label: '🎯 Quiz', shortLabel: 'Quiz 12.2', desc: 'Teste dein Wissen zu 12.2', icon: '🎯', component: 'QuizSection', quizData: 'QUIZ_12_2', quizLabel: '12.2 – Soziale Marktwirtschaft' },
        ],
      },
      {
        id: '13-1',
        curriculum: '13.1',
        name: 'Friedenssicherung als nationale und internationale Herausforderung',
        shortName: 'Friedenssicherung',
        description: 'Internationale Konflikte, Terrorismus, Außen- und Sicherheitspolitik, Bundeswehr.',
        modules: [
          { id: 'konflikte-kriege', label: '⚔️ Konflikte & Kriege', shortLabel: 'Internationale Konflikte und Kriege', desc: 'Ursachen, Merkmale, Konfliktbewältigung', icon: '⚔️', component: 'FullContentSection' },
          { id: 'terrorismus', label: '🛡️ Terrorismus', shortLabel: 'Internationaler Terrorismus', desc: 'Erscheinungsformen, Ursachen, Maßnahmen', icon: '🛡️', component: 'FullContentSection' },
          { id: 'sicherheitspolitik', label: '🇩🇪 Außen- & Sicherheitspolitik', shortLabel: 'Außen- und Sicherheitspolitik Deutschlands – Rolle der Bundeswehr', desc: 'NATO, EU, Bundeswehr', icon: '🇩🇪', component: 'FullContentSection' },
          { id: 'entwicklungspolitik', label: '🌍 Entwicklungspolitik', shortLabel: 'Deutsche Entwicklungspolitik (erhöhtes Niveau)', desc: 'Ziele, Maßnahmen, präventive Friedenspolitik', icon: '🌍', component: 'FullContentSection' },
          { id: 'quiz-13-1', label: '🎯 Quiz', shortLabel: 'Quiz 13.1', desc: 'Teste dein Wissen zu 13.1', icon: '🎯', component: 'QuizSection', quizData: 'QUIZ_13_1', quizLabel: '13.1 – Friedenssicherung' },
        ],
      },
      {
        id: '13-2',
        curriculum: '13.2',
        name: 'Weltwirtschaftliche Verflechtungen',
        shortName: 'Verflechtungen',
        description: 'Chancen und Risiken weltwirtschaftlicher Verflechtungen – Globalisierung, Handelstheorien, Leitbilder, Handelshemmnisse, WTO.',
        modules: [
          { id: 'global', label: '🌍 Globalisierung', shortLabel: 'Globalisierung', desc: 'Welthandel, FDI, multinationale Konzerne', icon: '🌍', component: 'GlobalSection' },
          { id: 'theories', label: '📊 Erklärungsansätze', shortLabel: 'Erklärungsansätze', desc: 'Smith, Ricardo, intraindustrieller Handel', icon: '📊', component: 'TheoriesSection' },
          { id: 'leitbilder', label: '⚖️ Leitbilder', shortLabel: 'Leitbilder', desc: 'Freihandel vs. Protektionismus', icon: '⚖️', component: 'LeitbilderSection' },
          { id: 'hemmnisse', label: '🚧 Handelshemmnisse', shortLabel: 'Handelshemmnisse', desc: 'Zölle, Quoten, Wirkungskette', icon: '🚧', component: 'HemmnisseSection' },
          { id: 'regime', label: '🤝 Handelsregime', shortLabel: 'Handelsregime', desc: 'WTO, Handelsabkommen', icon: '🤝', component: 'RegimeSection' },
          { id: 'flashcards', label: '📇 Karteikarten', shortLabel: 'Karteikarten', desc: 'Begriffe lernen und wiederholen', icon: '📇', component: 'FlashcardsSection' },
          { id: 'lernplakat', label: '🗺️ Lernplakat', shortLabel: 'Lernplakat', desc: 'Alle Themen auf einen Blick', icon: '🗺️', component: 'Lernplakat132' },
          { id: 'quiz', label: '🎯 Quiz', shortLabel: 'Quiz 13.2', desc: 'Teste dein Wissen zu 13.2', icon: '🎯', component: 'QuizSection', quizData: 'QUIZ_QUESTIONS', quizLabel: '13.2 – Weltwirtschaftliche Verflechtungen' },
        ],
      },
    ];

    const COURSE_VISUALS = {
      '12-1': { color: 'blue', icon: '🏛️', illustration: '🗳️ 📋 👥 📐' },
      '12-2': { color: 'green', icon: '💰', illustration: '⚖️ 📊 🏗️ 🎯' },
      '13-1': { color: 'orange', icon: '🛡️', illustration: '⚔️ 🕊️ 🇩🇪 🌍' },
      '13-2': { color: 'purple', icon: '🌐', illustration: '📈 🚧 🤝 📇' },
    };

    function CourseListSection({ onSelectCourse, visited }) {
      const getProgress = (course) => {
        if (!visited || !course.modules.length) return 0;
        const done = course.modules.filter(m => visited[`${course.id}-${m.id}`]).length;
        return Math.round((done / course.modules.length) * 100);
      };
      return (
        <div className="content" style={{ paddingTop: 0, maxWidth: '1200px' }}>
          <div className="hero">
            <div className="experiment-badge">Lern deinen Weg</div>
            <h2>Abitur Politik-Wirtschaft · Niedersachsen</h2>
            <p className="subline">
              Werde fit in 4 Halbjahren – interaktiv mit Quiz, Karteikarten und Prüfungsfragen. Frag den Lern-Bot (unten rechts) jederzeit.
            </p>
          </div>
          <div className="course-grid">
            {COURSES.map((course, ci) => {
              const vis = COURSE_VISUALS[course.id] || { color: 'blue', icon: '📚', illustration: '' };
              const pct = getProgress(course);
              return (
                <button
                  key={course.id}
                  type="button"
                  className="course-card stagger-item"
                  data-color={vis.color}
                  style={{ animationDelay: ci * 0.08 + 's' }}
                  onClick={() => onSelectCourse && onSelectCourse(course.id)}
                >
                  <span className="course-illustration">{vis.illustration}</span>
                  <div className="course-badge">Kerncurriculum {course.curriculum}</div>
                  <div className="course-title">{course.name}</div>
                  <p className="course-desc">{course.description}</p>
                  <div className="course-progress">
                    <div className="course-progress-bar"><div className="course-progress-fill" style={{ width: pct + '%' }} /></div>
                    <div className="course-progress-text">{pct > 0 ? pct + ' % bearbeitet' : 'Noch nicht begonnen'}</div>
                  </div>
                </button>
              );
            })}
          </div>
        </div>
      );
    }

    function ModuleGridSection({ course, onVisited, onSelectModule, visited }) {
      if (!course) return null;
      React.useEffect(() => { onVisited && onVisited(`${course.id}-overview`); }, [course.id]);
      const visitKey = (moduleId) => `${course.id}-${moduleId}`;
      return (
        <div className="content" style={{ paddingTop: 0 }}>
          <div className="hero">
            <div className="experiment-badge">Kerncurriculum {course.curriculum}</div>
            <h2>{course.name}</h2>
            <p className="subline">{course.description}</p>
          </div>
          <div className="module-grid">
            {course.modules.map((mod, idx) => (
              <button
                key={mod.id}
                type="button"
                className="module-card"
                style={{ animationDelay: (idx * 0.07) + 's' }}
                onClick={() => onSelectModule && onSelectModule(mod.id)}
              >
                <span className="module-icon">{mod.icon}</span>
                <div className="module-title">{mod.shortLabel}</div>
                <p className="module-desc">{mod.desc}</p>
                {visited && visited[`${course.id}-${mod.id}`] && <span className="module-done">✓ Besucht</span>}
              </button>
            ))}
          </div>
        </div>
      );
    }

    const FLASHCARD_TERMS = [
      { term: 'Globalisierung', def: 'Zunehmende weltweite Verflechtung in Wirtschaft, Politik und Kultur.' },
      { term: 'Welthandel', def: 'Grenzüberschreitender Austausch von Gütern und Dienstleistungen.' },
      { term: 'FDI', def: 'Foreign Direct Investment – langfristige Auslandsinvestitionen mit Kontrolle (mind. 10 % Beteiligung).' },
      { term: 'Absolute Kostenvorteile', def: 'Ein Land kann ein Gut mit weniger Ressourcen produzieren als andere (Adam Smith).' },
      { term: 'Komparative Kostenvorteile', def: 'Spezialisierung auf Güter mit den geringsten Opportunitätskosten – Handel lohnt auch ohne absolute Vorteile (Ricardo).' },
      { term: 'Opportunitätskosten', def: 'Verzicht auf die nächstbeste Alternative.' },
      { term: 'Intraindustrieller Handel', def: 'Handel mit ähnlichen Produkten derselben Branche (z. B. Deutschland exportiert und importiert Autos).' },
      { term: 'Freihandel', def: 'Minimale staatliche Eingriffe – Ziel: Wohlstandsgewinne durch Spezialisierung.' },
      { term: 'Protektionismus', def: 'Schutz der heimischen Wirtschaft durch Zölle, Quoten etc.' },
      { term: 'Zoll', def: 'Abgabe auf Waren beim Grenzübertritt (tarifäres Handelshemmnis).' },
      { term: 'Wertzoll', def: 'Zoll als Prozentsatz vom Warenwert.' },
      { term: 'Mengenzoll', def: 'Fester Betrag pro Mengeneinheit (z. B. €/Tonne).' },
      { term: 'Importquote', def: 'Mengenmäßige Einfuhrbegrenzung (nichttarifäres Hemmnis).' },
      { term: 'Erziehungszoll', def: 'Zeitweiliger Schutz junger Industrien („infant industry“).' },
      { term: 'Meistbegünstigung', def: 'WTO-Prinzip: Handelserleichterungen für alle Mitglieder gleich.' },
      { term: 'Inländerbehandlung', def: 'Gleichbehandlung in- und ausländischer Waren im Inland.' },
      { term: 'Reziprozität', def: 'Gegenseitigkeit beim Abbau von Handelshemmnissen.' },
    ];

    const MODULE_CONTENT = {
      '12-1-partizipation-formen': {
        curriculum: '12.1',
        title: 'Formen und Funktionen von Partizipation',
        intro: 'Politische Partizipation ist jede Beteiligung der Bürger:innen am politischen Willensbildungs- und Entscheidungsprozess. Man unterscheidet konventionelle und unkonventionelle Formen; für die Demokratie erfüllt Partizipation zentrale Funktionen (Artikulation, Integration, Repräsentation, Kontrolle).',
        goals: ['Formen politischer Partizipation (konventionell/unkonventionell) nennen und zuordnen.', 'Funktionen von Partizipation für die Demokratie erklären (Artikulation, Integration, Repräsentation, Kontrolle).', 'Partizipation nach Legitimität, Effizienz, Wirksamkeit und Gerechtigkeit beurteilen können.'],
        widgets: [
          {
            type: 'do-first',
            title: 'Erst ausprobieren',
            task: {
              question: 'Welche der folgenden Beteiligungsformen zählen zur konventionellen Partizipation?',
              options: [
                { label: 'Wahlen, Parteimitgliedschaft, Mitarbeit in Verbänden', correct: true },
                { label: 'Nur Demonstrationen und Streiks', correct: false },
                { label: 'Nur Online-Petitionen und ziviler Ungehorsam', correct: false },
              ],
            },
            explanation: 'Konventionell sind die vom System vorgesehenen Wege: Wahlen, Parteien, Verbände, Kontakt zu Mandatsträger:innen. Demonstrationen, Petitionen und Streiks gelten als unkonventionell.'
          },
        ],
        cards: [
          { icon: '🗳️', title: 'Konventionelle Partizipation', content: 'Beteiligung in etablierten Bahnen: Wahlen (Bundestag, Landtag, Kommunen), Parteimitgliedschaft, Verbände (Gewerkschaft, Jugendverband), Kontakt zu Mandatsträger:innen. Systemkonform, trägt zur Stabilität. Prüfung: von unkonventionell abgrenzen.' },
          { icon: '📢', title: 'Unkonventionelle Partizipation', content: 'Außerhalb der üblichen Kanäle: Demonstrationen, Petitionen (online), Streiks, ziviler Ungehorsam, Kampagnen in Sozialen Medien. Erzeugt Aufmerksamkeit und Druck; Debatte um Legitimität. Prüfung: Merkmale nennen, einordnen.' },
          { icon: '📣', title: 'Funktion: Artikulation', content: 'Interessen und Forderungen werden formuliert und eingebracht. Parteien, Verbände und Initiativen bündeln Anliegen und tragen sie in Parlament, Regierung und Öffentlichkeit. Prüfung: als eine von vier Funktionen (neben Integration, Repräsentation, Kontrolle) zuordnen.' },
          { icon: '🔗', title: 'Funktion: Integration', content: 'Partizipation bindet ein und stärkt Identifikation mit der Demokratie. Wer sich beteiligt (Wahlen, Vereine, Diskussion), akzeptiert eher die Spielregeln. Prüfung: von Artikulation, Repräsentation, Kontrolle unterscheiden.' },
          { icon: '⚖️', title: 'Funktion: Repräsentation', content: 'Bevölkerung wird durch Gewählte vertreten. Wahlen und Mandate – Kern der repräsentativen Demokratie. Prüfung: Zusammenhang zu Wahlen und Mandatsträger:innen.' },
          { icon: '👁️', title: 'Funktion: Kontrolle', content: 'Regierung und Verwaltung werden durch Öffentlichkeit, Medien und Wahlen überwacht. Abwahl, thematisieren von Fehlverhalten. Prüfung: als vierte Funktion nennen und von den anderen abgrenzen.' },
        ],
        pruefung: [
          { q: 'Nenne fünf Partizipationsmöglichkeiten / politische Beteiligungsformen.', a: 'Wahlen, Parteimitgliedschaft, Mitarbeit in Verbänden (z. B. Gewerkschaft), Demonstrationen, Petitionen (auch online). Weitere: Kontakt zu Abgeordneten, Initiativen, Streiks.' },
          { q: 'Welche sind die vier Funktionen politischer Partizipation?', a: 'Artikulation (Interessen einbringen), Integration (Einbindung in die Gemeinschaft), Repräsentation (Vertretung durch Gewählte), Kontrolle (Kontrolle der Herrschenden).', options: ['Wahlen, Wählen, Mandate, Regierung', 'Artikulation, Integration, Repräsentation, Kontrolle', 'Legitimität, Effizienz, Wirksamkeit, Gerechtigkeit', 'Parteien, Verbände, Initiativen, Medien'], correctIndex: 1 },
        ],
        persons: [
          { name: 'Luisa Neubauer', meta: 'Aktivistin, Fridays for Future Deutschland', idea: 'Vertritt die Bewegung als Gesicht der deutschen Klimastreiks. Beispiel für unkonventionelle Partizipation und Einfluss von Jugendbewegungen auf die politische Agenda (Artikulation, Agenda-Setting).' },
          { name: 'Carla Hinrichs', meta: 'Aktivistin (Letzte Generation)', idea: 'Steht für radikalere Formen des Protests (z. B. Straßenblockaden). Wird in der Debatte um Legitimität und Grenzen unkonventioneller Partizipation genannt.' },
        ],
        glossary: [
          { term: 'Partizipation', def: 'Beteiligung der Bürger:innen am politischen Willensbildungs- und Entscheidungsprozess. Umfasst konventionelle (z. B. Wahlen, Parteien) und unkonventionelle (z. B. Demonstrationen) Formen.' },
          { term: 'Legitimität', def: 'Anerkennung einer Entscheidung oder Institution als rechtmäßig und akzeptabel. Partizipation kann zur Legitimität des Systems beitragen.' },
          { term: 'Repräsentation', def: 'Vertretung der Interessen der Bevölkerung durch gewählte oder beauftragte Akteure. Zentrale Funktion von Wahlen und Mandaten in der repräsentativen Demokratie.' },
        ],
      },
      '12-1-verfassungsorgane': {
        curriculum: '12.1',
        title: 'Verfassungsorgane im politischen Prozess',
        intro: 'Die Verfassungsorgane der Bundesrepublik haben fest umrissene Aufgaben im Willensbildungs- und Entscheidungsprozess und beeinflussen sich gegenseitig. Für die Prüfung: die fünf Verfassungsorgane nennen können, wer wen wählt, und wo das BVerfG sitzt.',
        goals: ['Aufgaben der Verfassungsorgane im Willensbildungs- und Entscheidungsprozess beschreiben.', 'Einflussmöglichkeiten der Verfassungsorgane auf politische Entscheidungen erklären (Gewaltenteilung, Checks and Balances).'],
        politikzyklus: ['Agenda-Setting (Problem auf die Tagesordnung)', 'Politikformulierung (Lösungsoptionen erarbeiten)', 'Entscheidung (Gesetze/Beschlüsse fassen)', 'Implementation (Umsetzung in der Verwaltung)', 'Evaluation (Überprüfung der Wirkung)'],
        widgets: [
          { type: 'verfassungs-mobile' },
          {
            type: 'sort-exercise',
            title: 'Politikzyklus: Bringe die Phasen in die richtige Reihenfolge!',
            instruction: 'Tippe zwei Felder an, um sie zu tauschen.',
            correctOrder: ['Agenda-Setting', 'Politikformulierung', 'Entscheidung', 'Implementation', 'Evaluation'],
          },
          {
            type: 'chunked-card',
            title: 'Kurz-Check: Verfassungsorgane',
            steps: [
              { title: 'Die fünf Verfassungsorgane', content: 'Bundestag (Volksvertretung, Gesetzgebung, wählt Kanzler:in), Bundesrat (Ländervertretung), Bundesregierung (Kanzler:in mit Richtlinienkompetenz), Bundespräsident:in (Staatsoberhaupt, repräsentativ), Bundesverfassungsgericht (Normenkontrolle, Verfassungsbeschwerden).', checkpoint: { question: 'Wer wählt den Bundeskanzler?', options: ['Bundesversammlung', 'Bundestag', 'Bundesrat', 'Bundespräsident:in'], correctIndex: 1 } },
              { title: 'Wahlen und Sitz', content: 'Bundespräsident:in wird von der Bundesversammlung gewählt. Das Bundesverfassungsgericht hat seinen Sitz in Karlsruhe.', checkpoint: { question: 'Wo hat das Bundesverfassungsgericht seinen Sitz?', options: ['Berlin', 'Leipzig', 'Karlsruhe', 'Frankfurt'], correctIndex: 2 } },
            ],
          },
          {
            type: 'concept-map',
            title: 'Verfassungsorgane',
            nodes: [
              { label: 'Bundestag', detail: 'Volksvertretung, Gesetzgebung, wählt Kanzler:in, Haushaltsrecht, Kontrolle der Regierung.' },
              { label: 'Bundesrat', detail: 'Vertretung der Länder, Beteiligung an der Gesetzgebung (Zustimmungs- und Einspruchsgesetze).' },
              { label: 'Bundesregierung', detail: 'Führt Politik aus; Kanzler:in hat Richtlinienkompetenz.' },
              { label: 'Bundespräsident:in', detail: 'Staatsoberhaupt, repräsentativ; wird von der Bundesversammlung gewählt.' },
              { label: 'Bundesverfassungsgericht', detail: 'Normenkontrolle, Verfassungsbeschwerden; Sitz Karlsruhe.' },
            ],
          },
        ],
        pruefung: [
          { q: 'Nenne die fünf Verfassungsorgane.', a: 'Bundestag, Bundesrat, Bundesregierung (Bundeskanzler:in), Bundespräsident:in, Bundesverfassungsgericht.' },
          { q: 'Wer wählt den Bundespräsidenten?', a: 'Die Bundesversammlung (bestehend aus Bundestagsabgeordneten und gleich vielen von den Landtagen gewählten Mitgliedern).' },
          { q: 'Wer wählt den Bundeskanzler?', a: 'Der Bundestag (auf Vorschlag des Bundespräsidenten).' },
          { q: 'Wo hat das Bundesverfassungsgericht seinen Sitz?', a: 'Karlsruhe.' },
          { q: 'Nenne (beispielhaft) sechs Bundeskanzler.', a: 'Konrad Adenauer, Ludwig Erhard, Willy Brandt, Helmut Schmidt, Helmut Kohl, Angela Merkel (weitere: Schröder, Scholz, Merz – Stand 2026: Friedrich Merz).' },
          { q: 'Nenne (beispielhaft) vier Bundespräsidenten.', a: 'Theodor Heuss, Richard von Weizsäcker, Roman Herzog, Frank-Walter Steinmeier (weitere: Lübke, Heinemann, Carstens, Rau, Köhler, Gauck).' },
        ],
        aktualitaet: { title: 'Aktuell (Beispiel für Prüfung, Stand 2026)', text: '21. Deutscher Bundestag (seit 2025). Bundeskanzler Friedrich Merz (CDU), Bundespräsident Frank-Walter Steinmeier. Bundesminister (Beispiele, Stand 2026): u. a. Verteidigung, Inneres, Auswärtiges – die konkreten Namen können sich nach Kabinettsbildung ändern. Bundesverfassungsgericht: Präsidentin Stefanie Schiedermair, Sitz Karlsruhe. Die Aufgaben der Verfassungsorgane bleiben prüfungsrelevant.', quelle: 'Bundestag, Bundesregierung, BVerfG (bundesverfassungsgericht.de).' },
        cards: [
          { icon: '🏛️', title: 'Bundestag', content: 'Volksvertretung, Gesetzgebung, wählt Kanzler:in, Haushaltsrecht, Kontrolle der Regierung (Anfragen, Untersuchungsausschüsse). Prüfung: Aufgaben nennen, Stellung zu Bundesrat und Regierung.' },
          { icon: '🏢', title: 'Bundesrat', content: 'Vertritt die Länder. Zustimmungsgesetze: er muss zustimmen. Einspruchsgesetze: Bundestag kann überstimmen. Prüfung: Zustimmungs- vs. Einspruchsgesetz, Rolle der Ländervertretung.' },
          { icon: '🏛️', title: 'Bundesregierung', content: 'Führt Politik aus. Kanzler:in hat Richtlinienkompetenz (Grundzüge der Politik). Regierung bringt Vorlagen ein, setzt Gesetze um. Prüfung: Richtlinienkompetenz, Verhältnis zu Parlament.' },
          { icon: '👤', title: 'Bundespräsident:in', content: 'Staatsoberhaupt: repräsentativ und integrativ (Reden, Ernennungen, Verträge, Gnadenrecht). Über den Parteien – wenig Einfluss auf Tagespolitik. Prüfung: Rolle, Abgrenzung zu Kanzler:in.' },
          { icon: '⚖️', title: 'Bundesverfassungsgericht', content: 'Wacht über das GG. Normenkontrolle, Verfassungsbeschwerden, Organstreit. Kann Gesetze für verfassungswidrig erklären. Prüfung: Aufgaben, „Hüter der Verfassung“. Sitz: Karlsruhe.' },
        ],
        glossary: [
          { term: 'Gewaltenteilung', def: 'Aufteilung der staatlichen Gewalt auf Legislative (Parlament), Exekutive (Regierung) und Judikative (Gerichte) zur Kontrolle der Macht und zum Schutz der Freiheit.' },
          { term: 'Checks and Balances', def: 'Gegenseitige Kontrolle und Hemmung der Verfassungsorgane (z. B. Bundestag kontrolliert Regierung, BVerfG prüft Gesetze), um Machtkonzentration zu verhindern.' },
        ],
      },
      '12-1-politische-akteure': {
        curriculum: '12.1',
        title: 'Politische Akteure im politischen Prozess',
        intro: 'Bürger:innen, Parteien, Verbände und Initiativen wirken mit unterschiedlichen Mitteln und Einflussmöglichkeiten am politischen Prozess mit.',
        goals: ['Aufgaben und Einflussmöglichkeiten von Parteien, Verbänden und Initiativen im politischen Prozess erklären.', 'Partizipationsmöglichkeiten der Bürger:innen einordnen.'],
        widgets: [
          {
            type: 'do-first',
            title: 'Erst zuordnen',
            task: {
              question: 'Welche Funktion hat eine Partei im politischen Prozess?',
              options: [
                { label: 'Nur Gesetze verabschieden', correct: false },
                { label: 'Programmbildung, Personalauslese, Regierungsbildung', correct: true },
                { label: 'Nur Lobbyarbeit für Unternehmen', correct: false },
              ],
            },
            explanation: 'Parteien bündeln Interessen (Programmbildung), wählen Personal aus (Personalauslese) und bilden Regierungen. Sie verbinden Gesellschaft und Staat.'
          },
        ],
        aktualitaet: { title: 'Beispiel: Initiativen und Bewegungen (Stand 2026)', text: 'Fridays for Future (Klimastreiks, seit 2018) zeigt, wie eine Initiative Themen auf die politische Agenda setzt. Weitere Beispiele: Gewerkschaften (z. B. DGB, IG Metall), Arbeitgeberverbände (BDA), Umweltverbände (z. B. NABU, BUND), Verbraucherzentralen. Für die Prüfung: Funktion der Akteure (Artikulation, Integration, Kontrolle) zuordnen können.', quelle: 'Vgl. bpb (Bundeszentrale für politische Bildung), Parteien und Verbände.' },
        cards: [
          { icon: '👥', title: 'Bürger:innen', content: 'Wählen, sich in Parteien/Verbänden/Initiativen engagieren, demonstrieren, petitionieren. Partizipation reicht von passiv (Informieren) bis aktiv (Kandidatur).' },
          { icon: '🏛️', title: 'Parteien', content: 'Programmbildung, Personalauslese, Regierungsbildung, Artikulation und Aggregation von Interessen. Verbindung zwischen Gesellschaft und Staat.' },
          { icon: '🤝', title: 'Verbände', content: 'Vertreten Interessen bestimmter Gruppen (Wirtschaft, Arbeit, Umwelt etc.), beraten Politik, mobilisieren Mitglieder. Einfluss über Lobbyarbeit und Expertise.' },
          { icon: '📋', title: 'Initiativen & Bewegungen', content: 'Themenbezogene Mobilisierung, oft außerhalb von Parteien und Verbänden. Können Themen auf die Agenda setzen (z. B. Fridays for Future).' },
        ],
        glossary: [
          { term: 'Interessenaggregation', def: 'Bündelung und Auswahl von Interessen zu programmatischen Positionen (v. a. durch Parteien).' },
          { term: 'Lobbyismus', def: 'Einflussnahme von Interessengruppen auf politische Entscheidungsträger:innen.' },
        ],
      },
      '12-1-demokratietheorien': {
        curriculum: '12.1',
        title: 'Demokratietheorien (erhöhtes Niveau)',
        intro: 'Repräsentative und plebiszitäre Demokratietheorien unterscheiden sich in der Rolle der Bürger:innen und der Partizipationschancen. Wichtige Theoretiker für die Einordnung: John Stuart Mill (repräsentativ) und Rousseau (Volkssouveränität/direkte Partizipation).',
        goals: ['Repräsentative und plebiszitäre Demokratietheorie unterscheiden.', 'Partizipationschancen in beiden Theorieansätzen erläutern.'],
        widgets: [
          {
            type: 'do-first',
            title: 'Erst einordnen',
            task: {
              question: 'Welcher Theoretiker steht für die repräsentative Demokratie?',
              options: [
                { label: 'Jean-Jacques Rousseau', correct: false },
                { label: 'John Stuart Mill', correct: true },
                { label: 'Karl Marx', correct: false },
              ],
            },
            explanation: 'John Stuart Mill (1806–1873) steht für die repräsentative Demokratie: kompetente Abgeordnete, Beteiligung, Minderheitenschutz. Rousseau steht für Volkssouveränität und direktere Partizipation.'
          },
          {
            type: 'compare-table',
            title: 'Repräsentativ vs. Plebiszitär – Vergleich',
            leftHeader: 'Repräsentativ (Mill)',
            rightHeader: 'Plebiszitär (Rousseau)',
            rows: [
              { left: 'Wahl von Abgeordneten', right: 'Volksabstimmungen, Referenden' },
              { left: 'Expertise, Effizienz', right: 'Direkte Beteiligung' },
              { left: 'Minderheitenschutz', right: 'Risiko: Tyrannei der Mehrheit' },
              { left: 'Partizipation v. a. durch Wahlen', right: 'Mehr direkte Mitbestimmung' },
            ],
          },
        ],
        persons: [
          { name: 'John Stuart Mill', meta: '1806–1873, britischer Philosoph und Ökonom', idea: '„Considerations on Representative Government“ (1861): Repräsentative Demokratie mit kompetenten Abgeordneten, Beteiligung der Bürger:innen und Schutz von Minderheiten. Klassischer Vertreter der repräsentativen Demokratietheorie.' },
          { name: 'Jean-Jacques Rousseau', meta: '1712–1778, französischer Philosoph', idea: 'Volkssouveränität: Das Volk ist Träger der Souveränität. Idee des „Gemeinwillens“ (volonté générale) – oft als Bezugspunkt für plebiszitäre und partizipative Demokratietheorien gelesen (direkte Beteiligung).' },
        ],
        cards: [
          { icon: '🏛️', title: 'Repräsentative Demokratie', content: 'Bürger:innen wählen Vertreter:innen, die entscheiden. Partizipation vor allem durch Wahlen und indirekte Einflussnahme. Betonung von Expertise, Effizienz und Minderheitenschutz.' },
          { icon: '🗳️', title: 'Plebiszitäre Demokratie', content: 'Direkte Beteiligung durch Volksabstimmungen, Referenden, Initiativen. Mehr Partizipation, aber auch Risiken (Komplexität, Manipulation, Mehrheitsdruck).' },
        ],
        comparison: { leftTitle: 'Repräsentativ', rightTitle: 'Plebiszitär', leftItems: ['Wahlen, Mandatsträger entscheiden', 'Expertise, Effizienz', 'Minderheitenschutz'], rightItems: ['Volksabstimmungen, Referenden', 'Direkte Beteiligung', 'Risiko: Tyrannei der Mehrheit'] },
        pruefung: [
          { q: 'Nenne einen Vertreter der plebiszitären Demokratietheorie.', a: 'Jean-Jacques Rousseau (Volkssouveränität, Gemeinwille). Weitere Bezüge: direkte Demokratie, mehr Partizipation.' },
          { q: 'Nenne einen Vertreter der repräsentativen Demokratietheorie.', a: 'John Stuart Mill („Considerations on Representative Government“: repräsentative Demokratie mit kompetenten Abgeordneten, Beteiligung und Minderheitenschutz).' },
        ],
        glossary: [
          { term: 'Repräsentative Demokratie', def: 'Demokratieform, in der gewählte Vertreter:innen im Namen des Volkes entscheiden.' },
          { term: 'Plebiszit', def: 'Direkte Abstimmung der wahlberechtigten Bevölkerung über eine politische Frage.' },
        ],
      },
      '12-2-ungleichheit': {
        curriculum: '12.2',
        title: 'Soziale Ungleichheit und Verteilungsgerechtigkeit',
        intro: 'Wie Einkommen und Vermögen in Deutschland verteilt sind und nach welchen Prinzipien Verteilung als gerecht gilt, ist Kern der sozialen Marktwirtschaft. Die drei Prinzipien – Egalität, Bedarf, Leistung – stehen oft in Spannung zueinander.',
        goals: ['Soziale Ungleichheit am Beispiel Einkommen und Vermögen in Deutschland beschreiben.', 'Prinzipien der Verteilungsgerechtigkeit (Egalität, Bedarf, Leistung) erklären und als Herausforderung für die soziale Marktwirtschaft einordnen.'],
        widgets: [
          {
            type: 'three-principles',
            title: 'Drei Prinzipien der Verteilungsgerechtigkeit',
            principles: [
              { title: 'Egalitätsprinzip', text: 'Alle sollen möglichst gleich viel erhalten. Starke Umverteilung, wenig Anreiz für Mehrleistung. In reinen Marktwirtschaften kaum umgesetzt, aber als normatives Ideal („Gleichheit“) diskutiert.' },
              { title: 'Bedarfprinzip', text: 'Verteilung nach Bedürftigkeit: Wer mehr braucht (Kinder, Kranke, Arbeitslose), erhält Unterstützung. Sozialhilfe, Kindergeld, Wohngeld. Sichert Mindeststandards und soziale Absicherung.' },
              { title: 'Leistungsprinzip', text: 'Wer mehr leistet, soll mehr erhalten. Schafft Anreize, wird aber als „ungerecht“ kritisiert, wenn Startchancen ungleich sind. Kern der marktwirtschaftlichen Legitimation.' },
            ],
          },
          {
            type: 'do-first',
            title: 'Denk zuerst nach: Verteilungsgerechtigkeit',
            question: 'Kindergeld wird nach dem … verteilt. Boni für Top-Manager folgen dem … . Eine gleiche Pro-Kopf-Steuer wäre ein Beispiel für das … .',
            hint: 'Bedarfsprinzip – Leistungsprinzip – Egalitätsprinzip',
          },
        ],
        cards: [
          { icon: '📊', title: 'Einkommensverteilung', content: 'Gini-Koeffizient: 0 = Gleichheit, 1 = Ungleichheit. Primärverteilung (Markt) vs. Sekundärverteilung (nach Steuern/Transfers). In Deutschland relativ stabil, obere Einkommen zugelegt. Prüfung: Primär- vs. Sekundärverteilung, Rolle der Umverteilung.' },
          { icon: '💰', title: 'Vermögensverteilung', content: 'Deutlich ungleicher als Einkommen. Konzentration bei wenigen Haushalten; wird vererbt und akkumuliert. Herausforderung für die soziale Marktwirtschaft. Prüfung: Unterschied zu Einkommensverteilung, Rolle von Erbschaft.' },
        ],
        pruefung: [
          { q: 'Nenne die Prinzipien der Verteilungsgerechtigkeit.', a: 'Egalitätsprinzip (gleiche Verteilung), Bedarfprinzip (Verteilung nach Bedürftigkeit), Leistungsprinzip (Verteilung nach erbrachter Leistung).' },
        ],
        glossary: [
          { term: 'Gini-Koeffizient', def: 'Statistisches Maß für die Ungleichheit einer Verteilung. 0 = alle haben gleich viel, 1 = eine Person hat alles. Wird für Einkommen und Vermögen verwendet.' },
          { term: 'Verteilungsgerechtigkeit', def: 'Normative Bewertung: Wird die Verteilung von Einkommen und Vermögen als fair angesehen? Hängt mit den Prinzipien Egalität, Bedarf und Leistung zusammen.' },
        ],
      },
      '12-2-prinzipien': {
        curriculum: '12.2',
        title: 'Prinzipien der sozialen Marktwirtschaft',
        intro: 'Die soziale Marktwirtschaft beruht auf fünf Prinzipien: Sie verbinden Wettbewerb mit sozialem Ausgleich und geben dem Staat die Rolle des Rahmensetzers, nicht des Spielers. Für die Prüfung wichtig: die Begründer der Idee kennen – Ludwig Erhard und Alfred Müller-Armack.',
        goals: ['Die fünf Prinzipien der sozialen Marktwirtschaft nennen und inhaltlich zuordnen.', 'Sozialprinzip und Wettbewerbsprinzip in der Wirtschaftspolitik wiedererkennen.'],
        widgets: [
          {
            type: 'concept-map',
            title: 'Die fünf Prinzipien',
            nodes: [
              { label: 'Sozialprinzip', detail: 'Markt soll dem Menschen dienen; soziale Sicherung, Mitbestimmung, Verteilungsausgleich.' },
              { label: 'Wettbewerbsprinzip', detail: 'Wettbewerb als Steuerung; Kartellverbot, Missbrauchsaufsicht, offene Märkte.' },
              { label: 'Marktkonformitätsprinzip', detail: 'Staatliche Eingriffe nutzen den Marktmechanismus (z. B. Lenkungssteuern), ersetzen ihn nicht.' },
              { label: 'Eigentumsprinzip', detail: 'Privateigentum an Produktionsmitteln; im GG Art. 14, „Eigentum verpflichtet“.' },
              { label: 'Haftungsprinzip', detail: 'Wer entscheidet, haftet für die Folgen; verhindert Abwälzung von Risiken.' },
            ],
          },
        ],
        persons: [
          { name: 'Ludwig Erhard', meta: '1897–1977, Bundeswirtschaftsminister 1949–1963, Bundeskanzler 1963–1966', idea: 'Pragmatischer Vater der sozialen Marktwirtschaft in der Praxis: Währungsreform 1948, Abbau von Bewirtschaftung, „Wohlstand für alle“. Verbindung von Wettbewerb und sozialer Absicherung.' },
          { name: 'Alfred Müller-Armack', meta: '1901–1978, Ökonom und Staatssekretär unter Erhard', idea: 'Prägte den Begriff „Soziale Marktwirtschaft“ (1946/47) und entwickelte die ordnungspolitische Konzeption: Markt + staatlicher Rahmen + soziale Korrektur.' },
        ],
        cards: [
          { icon: '🤝', title: 'Sozialprinzip', content: 'Markt dient dem Menschen: Sozialversicherungen, Mitbestimmung, Verteilungsausgleich. Härten abfedern, ohne Markt abzuschaffen.' },
          { icon: '📉', title: 'Wettbewerbsprinzip', content: 'Wettbewerb als Steuerung: Kartellverbot, Missbrauchsaufsicht (Bundeskartellamt), offene Märkte. Gegen Marktmacht.' },
          { icon: '📐', title: 'Marktkonformitätsprinzip', content: 'Eingriffe nutzen den Markt, ersetzen ihn nicht: Lenkungssteuern (z. B. CO₂-Preis) statt Verbote. Anreize statt Dirigismus.' },
          { icon: '🏠', title: 'Eigentumsprinzip', content: 'Privateigentum (Art. 14 GG). „Eigentum verpflichtet“ – Nutzung soll auch dem Gemeinwohl dienen.' },
          { icon: '⚠️', title: 'Haftungsprinzip', content: 'Wer entscheidet, haftet. Verhindert Abwälzung von Risiken (moralisches Risiko). Debatte: Bankenrettung vs. Haftung.' },
        ],
        pruefung: [
          { q: 'Nenne die fünf Prinzipien der sozialen Marktwirtschaft.', a: 'Sozialprinzip, Wettbewerbsprinzip, Marktkonformitätsprinzip, Eigentumsprinzip, Haftungsprinzip.' },
          { q: 'Benenne die Begründer der sozialen Marktwirtschaft.', a: 'Ludwig Erhard (Umsetzung in der Praxis), Alfred Müller-Armack (Begriff und Konzeption „Soziale Marktwirtschaft“).' },
        ],
        glossary: [
          { term: 'Soziale Marktwirtschaft', def: 'Wirtschaftsordnung, die Wettbewerb mit sozialem Ausgleich und staatlicher Rahmen setzender Ordnungspolitik verbindet.' },
          { term: 'Ordnungspolitik', def: 'Setzung von Regeln für das Wirtschaften (Wettbewerbsrecht, Vertragsfreiheit etc.), nicht direkte Eingriffe in den Markt.' },
        ],
      },
      '12-2-markt-staat': {
        curriculum: '12.2',
        title: 'Markt und Staat in der Sozialen Marktwirtschaft',
        intro: 'In der sozialen Marktwirtschaft hat der Staat klare Aufgaben: Er setzt den Rahmen, stellt öffentliche Güter bereit, sichert den Wettbewerb und gewährleistet soziale Sicherung. Er soll den Markt ergänzen, nicht ersetzen (Subsidiarität).',
        goals: ['Aufgaben des Staates in der sozialen Marktwirtschaft nennen und Beispiele zuordnen.', 'Das Verhältnis von Markt und Staat (Subsidiarität, Ergänzung) erklären.'],
        widgets: [
          {
            type: 'chunked-card',
            title: 'Kurz-Check: Die vier Aufgaben des Staates',
            steps: [
              { title: 'Ordnungsrahmen und öffentliche Güter', content: 'Ordnungsrahmen: Der Staat setzt die Spielregeln (Rechtssicherheit, Vertragsfreiheit, Eigentum). Öffentliche Güter: z. B. Landesverteidigung, saubere Luft – der Markt würde sie zu wenig bereitstellen.', checkpoint: { question: 'Welche Aufgabe erfüllt das Bundeskartellamt?', options: ['Soziale Sicherung', 'Wettbewerbssicherung', 'Öffentliche Güter bereitstellen', 'Ordnungsrahmen setzen'], correctIndex: 1 } },
              { title: 'Wettbewerb und soziale Sicherung', content: 'Wettbewerbssicherung: Kartellbehörden, Fusionskontrolle. Soziale Sicherung: Renten-, Kranken-, Arbeitslosenversicherung, Sozialhilfe.', checkpoint: { question: 'Nenne die vier Aufgaben des Staates.', options: ['Ordnungsrahmen, öffentliche Güter, Wettbewerb, soziale Sicherung', 'Steuern, Gesetze, Polizei, Armee', 'Wachstum, Vollbeschäftigung, Preisstabilität, Verteilung', 'Legislative, Exekutive, Judikative, Medien'], correctIndex: 0 } },
            ],
          },
          {
            type: 'concept-map',
            title: 'Die vier Aufgaben des Staates',
            nodes: [
              { label: 'Ordnungsrahmen setzen', detail: 'Rechtssicherheit, Vertragsfreiheit, Eigentumsschutz – der Staat legt die Spielregeln fest.' },
              { label: 'Öffentliche Güter bereitstellen', detail: 'z. B. Landesverteidigung, saubere Luft; der Markt würde sie zu wenig bereitstellen.' },
              { label: 'Wettbewerb sichern', detail: 'Kartellbehörden (Bundeskartellamt), Fusionskontrolle, Missbrauchsaufsicht.' },
              { label: 'Soziale Sicherung gewährleisten', detail: 'Renten-, Kranken-, Arbeitslosen-, Pflegeversicherung; Sozialhilfe.' },
            ],
          },
        ],
        cards: [
          { icon: '📜', title: 'Ordnungsrahmen', content: 'Spielregeln: Rechtssicherheit, Vertragsfreiheit, Eigentumsschutz. Kein Eingriff in Preise/Mengen. Ohne Rahmen kein Markt.' },
          { icon: '🏛️', title: 'Öffentliche Güter', content: 'Nicht rival, nicht ausschließbar: z. B. Landesverteidigung, saubere Luft. Markt stellt zu wenig bereit – Staat übernimmt.' },
          { icon: '🔍', title: 'Wettbewerbssicherung', content: 'Bundeskartellamt, Fusionskontrolle, Missbrauchsaufsicht. Marktmacht begrenzen, Wettbewerb erhalten.' },
          { icon: '🛡️', title: 'Soziale Sicherung', content: 'Renten-, Kranken-, Arbeitslosen-, Pflegeversicherung; Sozialhilfe. Risiken und Armut abfedern.' },
        ],
        pruefung: [
          { q: 'Nenne die vier Aufgaben des Staates in der sozialen Marktwirtschaft.', a: 'Ordnungsrahmen setzen, öffentliche Güter bereitstellen, Wettbewerb sichern (Wettbewerbssicherung), soziale Sicherung gewährleisten.' },
        ],
        glossary: [
          { term: 'Öffentliches Gut', def: 'Gut, bei dem keine Rivalität im Konsum und kein Ausschluss möglich ist; typischerweise staatlich bereitgestellt.' },
          { term: 'Subsidiarität', def: 'Übergeordnete Ebene greift nur ein, wenn die untere Ebene eine Aufgabe nicht erfüllen kann.' },
        ],
      },
      '12-2-wirtschaftspolitik': {
        curriculum: '12.2',
        title: 'Wirtschaftspolitische Ziele, Maßnahmen und Zielkonflikte',
        intro: 'Wirtschaftspolitik wird in Ordnungs-, Struktur- und Prozesspolitik unterteilt. Das magische Sechseck bündelt die sechs wirtschaftspolitischen Ziele der Bundesrepublik – „magisch“ heißt: Nicht alle Ziele lassen sich gleichzeitig optimal erreichen, oft entstehen Zielkonflikte. Für Preisniveaustabilität ist die EZB zuständig (Christine Lagarde, Stand 2026).',
        goals: ['Ordnungs-, Struktur- und Prozesspolitik unterscheiden.', 'Das magische Sechseck der Wirtschaftspolitik nennen und Zielkonflikte erklären.'],
        persons: [
          { name: 'Christine Lagarde', meta: 'EZB-Präsidentin seit November 2019 (Europäische Zentralbank, Stand 2026)', idea: 'Leitet die Geldpolitik des Euroraums. Hauptziel der EZB: Preisniveaustabilität (Inflation nahe 2 %). Instrumente: Leitzins, Anleihekäufe. Wichtig für das magische Sechseck: Stabilitätspolitik auf europäischer Ebene.' },
          { name: 'Robert Habeck', meta: 'Bundesminister für Wirtschaft und Klimaschutz (Grüne, seit 2021, Stand 2026)', idea: 'Verantwortet u. a. Energie- und Klimapolitik, Gebäudeenergiegesetz, Industrieförderung. Steht für die Spannung zwischen Klimazielen, Wettbewerbsfähigkeit und sozialer Abfederung – typisch für Zielkonflikte im magischen Sechseck.' },
          { name: 'Adam Smith', meta: '1723–1790, Begründer der (freien) Marktwirtschaft', idea: '„Der Wohlstand der Nationen“ (1776): Arbeitsteilung und freier Markt führen zu Wohlstand. Absolute Kostenvorteile – jedes Land soll das produzieren, was es am effizientesten kann. Begründer der Idee der freien Marktwirtschaft.' },
          { name: 'Karl Marx / Friedrich Engels', meta: 'Geistige Väter der Zentralverwaltungswirtschaft', idea: 'Kritik am Kapitalismus; Vorstellung einer planwirtschaftlichen Alternative (später in realsozialistischen Staaten umgesetzt). Zentrale Planung statt Markt – in der Prüfung: zwei „geistige Väter“ der Zentralverwaltungswirtschaft nennen können (Marx, Engels).' },
          { name: 'John Maynard Keynes', meta: '1883–1946, Begründer der nachfrageorientierten Konjunkturpolitik', idea: 'Staat soll in Krisen durch Nachfrage (Staatsausgaben, Investitionen) die Wirtschaft stützen (Keynesianismus). Gegenposition zum reinen Angebotsdenken. Wichtig für Wirtschaftspolitik und magisches Sechseck (Vollbeschäftigung, Konjunktur).' },
        ],
        pruefung: [
          { q: 'Benenne die sechs Ziele des magischen Sechsecks.', a: 'Wachstum, Vollbeschäftigung, Preisniveaustabilität, außenwirtschaftliches Gleichgewicht, gerechte Verteilung, umweltverträgliches Wirtschaften.' },
          { q: 'Benenne den Begründer der freien Marktwirtschaft.', a: 'Adam Smith („Der Wohlstand der Nationen“, 1776).' },
          { q: 'Benenne die zwei geistigen Väter der Zentralverwaltungswirtschaft.', a: 'Karl Marx und Friedrich Engels.' },
          { q: 'Benenne den Begründer einer nachfrageorientierten Konjunkturpolitik.', a: 'John Maynard Keynes (Keynesianismus).' },
          { q: 'Nenne drei Kritikpunkte am Gebäudeenergiegesetz (Beispiel).', a: 'Typische Kritik: hohe Kosten für Sanierung, soziale Härte (Mieter:innen, Eigentümer:innen), Umsetzbarkeit und Bürokratie. Kontext: Spannung zwischen Klimazielen und Verteilungs- sowie Freiheitsfragen.' },
        ],
        widgets: [
          {
            type: 'do-first',
            title: 'Denk zuerst nach: Wirtschaftspolitik',
            question: 'Das Bundeskartellamt gehört zur …politik. Eine Zinssenkung der EZB ist …politik. Förderung des Kohleausstiegs ist …politik.',
            hint: 'Ordnungspolitik – Prozesspolitik – Strukturpolitik',
          },
          {
            type: 'magic-hexagon',
            title: '⬡ Magisches Sechseck – Klicke auf ein Ziel für die Erklärung',
            items: [
              { label: 'Wachstum', description: 'Steigendes Bruttoinlandsprodukt (BIP). Wirtschaft soll sich positiv entwickeln, um Wohlstand und Beschäftigung zu sichern.' },
              { label: 'Vollbeschäftigung', description: 'Möglichst hohe Beschäftigung, geringe Arbeitslosigkeit. Ein wichtiges soziales und wirtschaftliches Ziel.' },
              { label: 'Preisniveaustabilität', description: 'Stabile Preise, geringe Inflation. Schützt Ersparnisse und Planungssicherheit. Zuständig: EZB (Europäische Zentralbank), Präsidentin Christine Lagarde (seit 2019, Stand 2026) – Leitzins, Geldpolitik.' },
              { label: 'Außenwirtschaftliches Gleichgewicht', description: 'Ausgewogene Handels- und Zahlungsbilanz. Kein dauerhaftes Defizit oder Überschuss, um Abhängigkeiten zu begrenzen.' },
              { label: 'Gerechte Verteilung', description: 'Einkommen und Vermögen sollen als fair empfunden werden. Verbindung von Leistungsanreiz und sozialem Ausgleich.' },
              { label: 'Umweltverträgliches Wirtschaften', description: 'Wirtschaften im Einklang mit natürlichen Ressourcen und Klima. Oft im Zielkonflikt mit kurzfristigem Wachstum.' },
            ],
          },
        ],
        cards: [
          { icon: '📐', title: 'Ordnungspolitik', content: 'Setzt den Rahmen: Wettbewerbsrecht, Vertragsfreiheit, Eigentumsschutz. Langfristig und regelgebunden – der Staat legt die Spielregeln fest, mischt sich aber nicht in die einzelnen Spielzüge ein.' },
          { icon: '🏗️', title: 'Strukturpolitik', content: 'Fördert bestimmte Regionen oder Branchen (z. B. Strukturwandel in Kohlegebieten, Forschung und Innovation). Ziel: Anpassung der Wirtschaftsstruktur an neue Bedingungen.' },
          { icon: '📈', title: 'Prozesspolitik', content: 'Steuert den Wirtschaftsablauf kurzfristig: Konjunkturpolitik, Zinsen, Steuern, Staatsausgaben. Soll Nachfrage und Beschäftigung stabilisieren.' },
        ],
        glossary: [
          { term: 'Magisches Sechseck', def: 'Die sechs wirtschaftspolitischen Ziele in Deutschland; „magisch“, weil nicht alle gleichzeitig optimal erreichbar sind – Zielkonflikte sind die Regel.' },
          { term: 'Zielkonflikt', def: 'Erreichung eines Ziels erschwert die Erreichung eines anderen (z. B. mehr Wachstum kann Umweltschutz belasten; mehr Umverteilung kann Anreize mindern).' },
        ],
      },
      '12-2-verteilung-erhoeht': {
        curriculum: '12.2',
        title: 'Einkommens- und Vermögensverteilung (erhöhtes Niveau)',
        intro: 'Umverteilung durch Steuern und Transfers sowie politische Positionen zur gerechten Verteilung vor dem Hintergrund der Grundwerte der sozialen Marktwirtschaft.',
        goals: ['Umverteilung durch Steuern und Transfers beschreiben.', 'Politische Positionen zur Verteilung vor dem Hintergrund von Freiheit, Gerechtigkeit, Sicherheit einordnen.'],
        widgets: [
          {
            type: 'do-first',
            title: 'Denk zuerst nach: Umverteilung',
            question: 'Primärverteilung entsteht durch den … . Sekundärverteilung entsteht nach … und … .',
            hint: 'Marktprozess – Steuern – Transfers',
          },
        ],
        cards: [
          { icon: '💶', title: 'Umverteilung durch Steuern', content: 'Progressive Einkommensteuer, Vermögensteuer (historisch), Solidaritätszuschlag. Höhere Einkommen/Vermögen werden stärker belastet.' },
          { icon: '🔄', title: 'Transfers', content: 'Sozialversicherungen, Kindergeld, Wohngeld, Grundsicherung. Reduzieren Armut und gleichen aus.' },
          { icon: '⚖️', title: 'Freiheit vs. Gerechtigkeit', content: 'Mehr Umverteilung kann als gerechter, aber als Eingriff in Freiheit und Eigentum gesehen werden. Weniger Umverteilung stärkt Anreize, kann soziale Härten erhöhen.' },
        ],
        glossary: [
          { term: 'Primärverteilung', def: 'Einkommensverteilung, die sich aus dem Marktprozess ergibt (vor Steuern und Transfers).' },
          { term: 'Sekundärverteilung', def: 'Einkommensverteilung nach Steuern und Transfers (Umverteilung).' },
        ],
      },
      '12-2-wachstum-umwelt': {
        curriculum: '12.2',
        title: 'Wirtschaftswachstum und Schutz natürlicher Lebensgrundlagen',
        intro: 'Wirtschaftswachstum und Umweltschutz stehen oft in Spannung. Das BIP misst Wachstum, berücksichtigt aber Umweltkosten nicht ausreichend.',
        goals: ['Das Spannungsverhältnis von Wirtschaft und Umwelt erklären.', 'BIP als Messgröße für Wachstum kennen und Grenzen nennen.', 'Zielkonflikte zwischen Wachstum und Umweltschutz erläutern.'],
        widgets: [
          {
            type: 'do-first',
            title: 'Denk zuerst nach: Wachstum vs. Umwelt',
            question: 'Das BIP misst …, berücksichtigt aber … nicht. Nico Paech plädiert für … statt Wachstum.',
            hint: 'Wirtschaftsleistung – Umwelt-/Sozialkosten – Suffizienz (Post-Wachstum)',
          },
        ],
        persons: [
          { name: 'Nico Paech', meta: 'Ökonom, Vertreter der Post-Wachstums-Ökonomie', idea: 'Kritik am Wachstumsmodell: Ressourcenverbrauch und Umweltzerstörung lassen sich nicht unendlich entkoppeln. Plädiert für Suffizienz, weniger Konsum, regionale Kreisläufe. Wichtig für die Debatte um Wachstum vs. Umweltschutz.' },
        ],
        cards: [
          { icon: '🌍', title: 'Spannungsverhältnis', content: 'Produktion und Konsum verbrauchen Ressourcen und belasten die Umwelt. Mehr Wachstum kann mehr Emissionen und Ressourcenverbrauch bedeuten.' },
          { icon: '📊', title: 'Bruttoinlandsprodukt (BIP)', content: 'Summe aller im Inland erstellten Güter und Dienstleistungen zu Marktpreisen. Maß für Wirtschaftsleistung; berücksichtigt keine Umwelt- und Sozialkosten.' },
          { icon: '⚖️', title: 'Zielkonflikt', content: 'Wachstumspolitik kann Umweltschutz belasten; strenge Umweltauflagen können Wachstum und Beschäftigung kurzfristig beeinträchtigen. Nachhaltigkeit sucht Kompromisse.' },
        ],
        glossary: [
          { term: 'BIP', def: 'Bruttoinlandsprodukt – Gesamtwert der im Inland produzierten Güter und Dienstleistungen in einer Periode.' },
          { term: 'Nachhaltigkeit', def: 'Handeln so, dass zukünftige Generationen die gleichen Chancen haben (ökologisch, ökonomisch, sozial).' },
        ],
      },
      '13-1-konflikte-kriege': {
        curriculum: '13.1',
        title: 'Internationale Konflikte und Kriege',
        intro: 'Konflikte und Kriege haben politische und ökonomische Ursachen. Für die Prüfung wichtig: Erscheinungsformen, die Unterscheidung von „alten“ und „neuen“ Kriegen sowie die Herausforderungen der Konfliktbewältigung.',
        goals: ['Erscheinungsformen und Ursachen internationaler Konflikte und Kriege nennen.', 'Merkmale alter und neuer Kriege unterscheiden.', 'Herausforderungen der Konfliktbewältigung erklären.'],
        widgets: [
          {
            type: 'do-first',
            title: 'Erst einordnen',
            task: {
              question: 'Welches Merkmal trifft typischerweise auf „neue Kriege“ zu?',
              options: [
                { label: 'Klare Fronten, reguläre Armeen, Kriegserklärung', correct: false },
                { label: 'Ökonomisierung, Milizen/Söldner, Gewalt gegen Zivilisten', correct: true },
                { label: 'Nur Staat gegen Staat, formales Kriegsrecht', correct: false },
              ],
            },
            explanation: 'Neue Kriege: Ökonomisierung (Krieg als Geschäft), Privatisierung der Gewalt (Milizen, Söldner), Entrechtlichung (Gewalt gegen Zivilisten). Alte Kriege: Staat gegen Staat, reguläre Armeen, formales Kriegsrecht.'
          },
          {
            type: 'compare-table',
            title: 'Alte Kriege vs. Neue Kriege – Merkmale im Vergleich',
            leftHeader: 'Alte Kriege',
            rightHeader: 'Neue Kriege',
            rows: [
              { left: 'Staat gegen Staat', right: 'Oft innerstaatlich (Bürgerkriege) oder nichtstaatliche Akteure' },
              { left: 'Klare Fronten, reguläre Armeen', right: 'Milizen, Söldner, privatisierte Gewalt' },
              { left: 'Kriegserklärung, formales Kriegsrecht', right: 'Entrechtlichung, Gewalt gegen Zivilisten' },
              { left: 'Primär politisch/territorial', right: 'Ökonomisierung: Ressourcen, Schmuggel, Krieg als Geschäft' },
              { left: 'Beispiel: klassische zwischenstaatliche Kriege', right: 'Beispiel: viele Konflikte seit Ende des Kalten Krieges' },
            ],
          },
        ],
        persons: [
          { name: 'Herfried Münkler', meta: 'Politikwissenschaftler, Experte für „neue Kriege“', idea: 'Prägte die Debatte über „neue Kriege“ (Ökonomisierung, Privatisierung, Entrechtlichung). Wichtig für die Prüfung: Merkmale alter vs. neuer Kriege und Konfliktbewältigung.' },
          { name: 'António Guterres', meta: 'UN-Generalsekretär seit Januar 2017 (Portugal, Stand 2026)', idea: 'Leitet die Vereinten Nationen; vermittelt in Konflikten, setzt sich für Frieden und multilaterale Zusammenarbeit ein. In der Prüfung: aktuellen UN-Generalsekretär nennen können.' },
        ],
        aktualitaet: { title: 'Herausforderungen der Konfliktbewältigung – aktuell (Stand 2026)', text: 'UN-Sicherheitsrat: Die fünf Vetomächte (USA, Russland, China, Frankreich, Großbritannien) können Beschlüsse blockieren – z. B. bei Konflikten, in die sie verwickelt sind. Beschlüsse heißen Resolutionen. UN-Generalsekretär ist António Guterres (seit 2017, Stand 2026). Peacekeeping-Missionen laufen weiter; asymmetrische Konflikte und nichtstaatliche Akteure nehmen zu.', quelle: 'Vgl. UN (un.org), Sicherheitsrat, bpb.' },
        pruefung: [
          { q: 'Nenne vier Merkmale neuer Kriege.', a: 'Ökonomisierung (Krieg als Geschäft, Ressourcen, Schmuggel), Privatisierung (Milizen, Söldner), Entrechtlichung (Gewalt gegen Zivilisten, kein klares Kriegsrecht), oft innerstaatlich oder nichtstaatliche Akteure.' },
          { q: 'Nenne die fünf ständigen Mitglieder des UN-Sicherheitsrats.', a: 'USA, Russland, China, Frankreich, Großbritannien (Vetomächte).' },
          { q: 'Benenne den UN-Generalsekretär.', a: 'António Guterres (seit Januar 2017, Stand 2026).' },
          { q: 'Wie nennt man Beschlüsse des UN-Sicherheitsrats?', a: 'Resolutionen.' },
        ],
        cards: [
          { icon: '⚔️', title: 'Erscheinungsformen und Ursachen', content: 'Staatenkriege, Bürgerkriege, Stellvertreterkriege, Ressourcenkonflikte. Ursachen: Grenzen, Macht, Rohstoffe, Ideologie, wirtschaftliche Interessen.' },
          { icon: '🕊️', title: 'Konfliktbewältigung', content: 'Diplomatie, UN, Sanktionen, Peacekeeping, humanitäre Hilfe. Herausforderungen: Vetomächte im UN-Sicherheitsrat, schwache Staaten, nichtstaatliche Akteure, die nicht an Abkommen gebunden sind.' },
        ],
        glossary: [
          { term: 'Neue Kriege', def: 'Kriege mit Merkmalen wie Ökonomisierung, Privatisierung der Gewalt, Schwächung des Staates, hoher Zivilopfer.' },
          { term: 'Peacekeeping', def: 'UN-Friedensmissionen zur Sicherung von Waffenstillständen und zum Schutz der Zivilbevölkerung.' },
        ],
      },
      '13-1-terrorismus': {
        curriculum: '13.1',
        title: 'Internationaler Terrorismus',
        intro: 'Terrorismus hat verschiedene Erscheinungsformen und Ziele. Ursachen und Strategien sowie innen- und außenpolitische Maßnahmen dagegen sind Kerncurriculum.',
        goals: ['Erscheinungsformen und Ziele des internationalen Terrorismus beschreiben.', 'Ursachen und Strategien des Terrorismus erklären.', 'Innen- und außenpolitische Maßnahmen gegen Terrorismus nennen.'],
        widgets: [
          {
            type: 'do-first',
            title: 'Erst einschätzen',
            task: {
              question: 'Was ist KEIN typisches Ziel von Terrorismus?',
              options: [
                { label: 'Angst und Destabilisierung erzeugen', correct: false },
                { label: 'Friedliche Diplomatie zwischen Staaten', correct: true },
                { label: 'Aufmerksamkeit für politische Ziele', correct: false },
              ],
            },
            explanation: 'Terrorismus zielt auf Angst, Destabilisierung und Aufmerksamkeit – nicht auf friedliche Diplomatie. Strategien: Anschläge, Propaganda, Rekrutierung.'
          },
          {
            type: 'compare-table',
            title: 'Innenpolitische vs. Außenpolitische Maßnahmen',
            leftHeader: 'Innenpolitisch',
            rightHeader: 'Außenpolitisch',
            rows: [
              { left: 'Sicherheitsbehörden (BKA, Verfassungsschutz)', right: 'Internationale Kooperation (Europol)' },
              { left: 'Überwachung (Grundrechtsvorbehalt)', right: 'Militäreinsätze gegen Terrorgruppen' },
              { left: 'Prävention & Deradikalisierung', right: 'Entwicklungshilfe zur Stabilisierung' },
              { left: 'Schutz kritischer Infrastruktur', right: 'Sanktionen, Abkommen' },
            ],
          },
        ],
        pruefung: [
          { q: 'Nenne drei innenpolitische Maßnahmen gegen internationalen Terrorismus.', a: 'Sicherheitsbehörden (BKA, Verfassungsschutz), Überwachung (unter Grundrechtsvorbehalt), Prävention und Deradikalisierung, Schutz kritischer Infrastruktur.' },
          { q: 'Nenne drei außenpolitische Maßnahmen gegen internationalen Terrorismus.', a: 'Internationale Kooperation (Europol, Abkommen), Militäreinsätze gegen Terrorgruppen, Entwicklungshilfe zur Stabilisierung, Sanktionen.' },
        ],
        cards: [
          { icon: '⚠️', title: 'Erscheinungsformen & Ziele', content: 'Anschläge auf Zivilisten, Infrastruktur, Symbole. Ziele: Angst verbreiten, politischen Wandel erzwingen, Aufmerksamkeit, Destabilisierung.' },
          { icon: '🔍', title: 'Ursachen & Strategien', content: 'Ursachen: politische, ideologische, religiöse, soziale Faktoren. Strategien: Anschläge, Propaganda, Rekrutierung, Finanzierung (z. B. Kriminalität).' },
          { icon: '🛡️', title: 'Innenpolitische Maßnahmen', content: 'Sicherheitsbehörden, Überwachung (unter Grundrechtsvorbehalt), Prävention, Deradikalisierung, Schutz kritischer Infrastruktur.' },
          { icon: '🌐', title: 'Außenpolitische Maßnahmen', content: 'Internationale Kooperation (Europol, Abkommen), Militäreinsätze gegen Terrorgruppen, Entwicklungshilfe zur Stabilisierung, Sanktionen.' },
        ],
        glossary: [
          { term: 'Terrorismus', def: 'Gewalttaten gegen Personen oder Sachen mit dem Ziel, Angst zu verbreiten und politische Ziele durchzusetzen.' },
          { term: 'Asymmetrische Kriegführung', def: 'Ungleiche Kräfteverhältnisse; schwächere Seite nutzt unkonventionelle Mittel (z. B. Anschläge).' },
        ],
      },
      '13-1-sicherheitspolitik': {
        curriculum: '13.1',
        title: 'Außen- und Sicherheitspolitik Deutschlands – Rolle der Bundeswehr',
        intro: 'Deutschland ist in NATO und EU eingebunden. Verfassungsrechtliche Grundlagen und die Rolle der Bundeswehr in internationalen Einsätzen sind prüfungsrelevant. Wichtige Namen: NATO-Generalsekretär, Einsätze (z. B. VJTF, Baltikum, Mali).',
        goals: ['Deutschlands Einbindung in NATO und EU zur Friedenssicherung beschreiben.', 'Verfassungsrechtliche Grundlagen für Bündnisse und Bundeswehreinsätze nennen.', 'Rolle der Bundeswehr in transnationalen und internationalen Zusammenhängen erläutern.'],
        widgets: [
          {
            type: 'do-first',
            title: 'Denk zuerst nach: Sicherheitspolitik',
            question: 'Art. … GG regelt die kollektive Sicherheit. Art. … GG regelt die Bundeswehr. Der wichtigste NATO-Artikel ist Art. … .',
            hint: 'Art. 24 GG – Art. 87a GG – Art. 5 NATO-Vertrag',
          },
        ],
        persons: [
          { name: 'Jens Stoltenberg', meta: 'NATO-Generalsekretär 2014–2024', idea: 'Leitete die NATO in einer Phase der Krise (Ukraine-Krieg, Bündnissolidarität, Ostflanke). Wichtig für die Prüfung: NATO als Bündnis, Art. 5, out-of-area-Einsätze – der Generalsekretär koordiniert die Allianz.' },
          { name: 'Boris Pistorius', meta: 'Bundesverteidigungsminister seit Januar 2023 (SPD, Stand 2026)', idea: 'Verantwortlich für die Bundeswehr und die Umsetzung der „Zeitenwende“ (mehr Verteidigungsausgaben, Stärkung der Bundeswehr). In der Prüfung: aktuellen Verteidigungsminister nennen können.' },
          { name: 'Volodymyr Zelenskyj', meta: 'Präsident der Ukraine (seit 2019, Stand 2026)', idea: 'Steht für die ukrainische Verteidigung gegen den russischen Angriffskrieg. Kontext: NATO-Ostflanke, Zeitenwende, Bündnissolidarität.' },
        ],
        aktualitaet: { title: 'Aktualität: Bundeswehr, NATO, Zeitenwende (Stand 2026)', text: 'Bundeswehr gegründet: 1955. NATO-Mission in Litauen: Enhanced Forward Presence (eFP). Bundesverteidigungsminister (Stand 2026: aktueller Amtsinhaber im Kabinett Merz). NATO-Generalsekretär: Mark Rutte (seit Oktober 2024, Stand 2026). Den Begriff „Zeitenwende“ prägte Olaf Scholz am 27.2.2022 in seiner Bundestagsrede. Fünf NATO-Staaten (Beispiele): USA, Deutschland, Frankreich, Großbritannien, Polen.', quelle: 'Bundestag, Bundeswehr, NATO (nato.int).' },
        pruefung: [
          { q: 'Nenne den wichtigsten Artikel des NATO-Vertrags.', a: 'Art. 5 (Bündnisfall: Angriff auf einen Mitgliedstaat = Angriff auf alle).' },
          { q: 'Nenne den NATO-Generalsekretär.', a: 'Mark Rutte (seit Oktober 2024, Stand 2026). Zuvor Jens Stoltenberg (2014–2024).' },
          { q: 'Nenne den Bundesverteidigungsminister.', a: 'Boris Pistorius (SPD, seit Januar 2023, Stand 2026).' },
          { q: 'Wer entscheidet über Auslandseinsätze der Bundeswehr?', a: 'Der Deutsche Bundestag (Parlamentsvorbehalt – jedes Mandat muss vom Bundestag beschlossen werden).' },
          { q: 'Wie heißt die NATO-Mission in Litauen?', a: 'Enhanced Forward Presence (eFP) / Verstärkte Vorne-Präsenz.' },
          { q: 'Wann wurde die Bundeswehr gegründet?', a: '1955.' },
          { q: 'Welchen Begriff prägte Olaf Scholz in seiner Rede im Bundestag am 27.2.2022?', a: '„Zeitenwende“ (neue Sicherheitslage, mehr Investition in Verteidigung).' },
          { q: 'Nenne fünf NATO-Staaten.', a: 'USA, Deutschland, Frankreich, Großbritannien, Polen (weitere: Türkei, Italien, Spanien, Kanada …).' },
        ],
        cards: [
          { icon: '🛡️', title: 'NATO', content: 'Kollektive Verteidigung: Art. 5 – Angriff auf einen = Angriff auf alle. Out-of-area-Einsätze (Afghanistan, Balkan). Deutschland: Mitglied, Truppen + Finanzen. Prüfung: Bündnisfall, Rolle Deutschlands.' },
          { icon: '🇪🇺', title: 'EU-Sicherheit', content: 'GASP (Gemeinsame Außen- und Sicherheitspolitik), GSVP (Verteidigungspolitik). Militärische + zivile Missionen, Konfliktprävention. Sicherheitsakteur neben NATO. Prüfung: GASP, GSVP erklären.' },
          { icon: '📜', title: 'Verfassungsrecht', content: 'Art. 24 GG: kollektive Sicherheit. Art. 87a GG: Bundeswehr. Parlamentsvorbehalt: Jeder bewaffnete Einsatz braucht Bundestagsmandat. Prüfung: Artikel, Bedeutung für Demokratie.' },
          { icon: '🎖️', title: 'Bundeswehr', content: 'Heer, Luftwaffe, Marine. Einsätze im Rahmen von UN, NATO, EU (z. B. Baltikum, Mali). Stets mit Parlamentsmandat. Prüfung: Rolle in internationalen Zusammenhängen.' },
        ],
        glossary: [
          { term: 'Parlamentsvorbehalt', def: 'Verfassungsrechtliche Vorgabe: Bewaffnete Einsätze der Bundeswehr bedürfen der Zustimmung des Bundestags. Stärkt die Kontrolle des Parlaments über Krieg und Frieden.' },
          { term: 'Kollektive Sicherheit', def: 'System, in dem Staaten sich gegenseitig gegen Angriffe absichern (z. B. NATO-Bündnisfall nach Art. 5). Dient der Friedenssicherung und Abschreckung.' },
        ],
      },
      '13-1-entwicklungspolitik': {
        curriculum: '13.1',
        title: 'Deutsche Entwicklungspolitik (erhöhtes Niveau)',
        intro: 'Deutsche Entwicklungspolitik verfolgt entwicklungspolitische Ziele und ist Teil einer präventiven Friedenspolitik. Zentraler Akteur: das BMZ (Bundesministerium für wirtschaftliche Zusammenarbeit und Entwicklung).',
        goals: ['Ziele und Maßnahmen deutscher Entwicklungspolitik nennen.', 'Entwicklungspolitik als Teil präventiver Friedenspolitik einordnen.'],
        widgets: [
          {
            type: 'do-first',
            title: 'Erst einordnen',
            task: {
              question: 'Was beschreibt Entwicklungspolitik als „präventive Friedenspolitik"?',
              options: [
                { label: 'Militärische Intervention in Krisenregionen', correct: false },
                { label: 'Stabilisierung durch Entwicklung senkt Flucht- und Konfliktrisiken', correct: true },
                { label: 'Handelsabkommen mit Industrieländern', correct: false },
              ],
            },
            explanation: 'Entwicklungspolitik als präventive Friedenspolitik: Stabilität durch Entwicklung (Bildung, Gesundheit, Governance) senkt Fluchtursachen und Konfliktrisiken – Vorbeugung statt Reaktion.'
          },
        ],
        persons: [
          { name: 'BMZ (Bundesministerium für wirtschaftliche Zusammenarbeit und Entwicklung)', meta: 'Ressort für Entwicklungspolitik der Bundesregierung', idea: 'Setzt Ziele und Maßnahmen der deutschen Entwicklungspolitik um: bilaterale und multilaterale Zusammenarbeit, finanzielle und technische Zusammenarbeit, Zusammenarbeit mit NGOs. Entwicklungspolitik als präventive Friedenspolitik: Stabilität durch Entwicklung reduziert Fluchtursachen und Konfliktrisiken. Minister:in wechselt mit jeder Regierung (Stand 2026: z. B. Svenja Schulze bzw. aktuelle Amtsinhaber:in).' },
        ],
        cards: [
          { icon: '🎯', title: 'Ziele', content: 'Armutsbekämpfung, nachhaltige Entwicklung, Menschenrechte, gute Regierungsführung, Stärkung von Bildung und Gesundheit. BMZ als zentraler Akteur.' },
          { icon: '📋', title: 'Maßnahmen', content: 'Finanzielle Zusammenarbeit (Kredite, Zuschüsse), technische Zusammenarbeit (Beratung, Ausbildung), Zusammenarbeit mit NGOs und multilateralen Organisationen.' },
          { icon: '🕊️', title: 'Präventive Friedenspolitik', content: 'Stabilisierung von Regionen durch Entwicklung reduziert Fluchtursachen und Konfliktrisiken. Entwicklungspolitik und Sicherheitspolitik ergänzen sich.' },
        ],
        glossary: [
          { term: 'Entwicklungspolitik', def: 'Gesamtheit der Maßnahmen zur Verbesserung der wirtschaftlichen und sozialen Situation in Entwicklungsländern.' },
          { term: 'Prävention', def: 'Vorbeugung von Konflikten und Krisen, bevor sie eskalieren.' },
        ],
      },
    };

    function CurriculumOutlineSection({ module }) {
      const outline = module?.outline || [];
      return (
        <div className="content">
          <h2 className="section-title">{module?.shortLabel || 'Modul'}</h2>
          {outline.length > 0 ? (
            <ul className="learning-goals">{outline.map((item, i) => <li key={i}>{item}</li>)}</ul>
          ) : (
            <p>Inhalt wird geladen …</p>
          )}
        </div>
      );
    }

    const GEWALT_COLORS = {
      legislative: { stroke: '#3b82f6', key: 'legislative' },
      exekutive: { stroke: '#f59e0b', key: 'exekutive' },
      judikative: { stroke: '#10b981', key: 'judikative' },
      staatsoberhaupt: { stroke: '#8b5cf6', key: 'staatsoberhaupt' },
      grundgesetz: { stroke: '#1a73e8', key: 'grundgesetz' },
    };

    const MOBILE_ORGANS = [
      {
        id: 'grundgesetz', icon: '📜', label: 'Grundgesetz',
        gewalt: 'Verfassung', gewaltKey: 'grundgesetz',
        detail: 'Die Verfassung der Bundesrepublik Deutschland – Grundlage aller Verfassungsorgane. Legt Aufgaben, Kompetenzen und die Gewaltenteilung fest (Art. 1–146 GG).',
        relations: 'Konstituiert alle fünf Verfassungsorgane und definiert ihre Aufgaben, Kompetenzen und die Gewaltenteilung. Kein Organ kann ohne das GG existieren.',
        x: 50, y: 14,
      },
      {
        id: 'bundestag', icon: '🏛️', label: 'Bundestag',
        gewalt: 'Legislative', gewaltKey: 'legislative',
        detail: 'Volksvertretung: Gesetzgebung, wählt Bundeskanzler:in, Haushaltsrecht, Kontrolle der Regierung (Anfragen, Untersuchungsausschüsse). 736 Abgeordnete (21. Bundestag, Stand 2026).',
        relations: 'Wählt Kanzler:in → Bundesregierung. Kontrolliert Regierung. Gemeinsame Gesetzgebung mit Bundesrat. Bildet mit Bundesrat Bundesversammlung → Bundespräsident:in. Wählt Hälfte der BVerfG-Richter:innen.',
        x: 22, y: 40,
      },
      {
        id: 'bundesrat', icon: '🏢', label: 'Bundesrat',
        gewalt: 'Legislative (Mitwirkung)', gewaltKey: 'legislative',
        detail: 'Vertretung der 16 Bundesländer. Zustimmungsgesetze (muss zustimmen) vs. Einspruchsgesetze (Bundestag kann überstimmen). Wichtig für Föderalismus.',
        relations: 'Zustimmungsgesetze: kann Bundestags-Gesetze blockieren. Bringt Vorlagen ein. Wählt andere Hälfte BVerfG-Richter:innen. Bildet mit Bundestag Bundesversammlung.',
        x: 78, y: 40,
      },
      {
        id: 'bundesregierung', icon: '⚙️', label: 'Bundesregierung',
        gewalt: 'Exekutive', gewaltKey: 'exekutive',
        detail: 'Kanzler:in hat Richtlinienkompetenz. Minister:innen leiten eigenverantwortlich. Bringt Gesetzesvorlagen ein, setzt Gesetze um. Stand 2026: Bundeskanzler Friedrich Merz (CDU).',
        relations: 'Wird vom Bundestag gewählt, von Bundespräsident:in ernannt. Bringt Vorlagen in Bundestag + Bundesrat ein. Unterliegt der Kontrolle des BVerfG.',
        x: 22, y: 68,
      },
      {
        id: 'bundespraesident', icon: '👤', label: 'Bundespräsident:in',
        gewalt: 'Staatsoberhaupt', gewaltKey: 'staatsoberhaupt',
        detail: 'Repräsentativ und integrativ: Reden, Ernennungen, Verträge, Gnadenrecht. Über den Parteien. Wird von Bundesversammlung gewählt. Stand 2026: Frank-Walter Steinmeier.',
        relations: 'Wird von Bundesversammlung (Bundestag + Ländervertreter) gewählt. Schlägt Kanzler:in vor, ernennt Minister:innen und BVerfG-Richter:innen.',
        x: 78, y: 68,
      },
      {
        id: 'bverfg', icon: '⚖️', label: 'Bundesverfassungsgericht',
        gewalt: 'Judikative', gewaltKey: 'judikative',
        detail: 'Hüter der Verfassung: Normenkontrolle, Verfassungsbeschwerden, Organstreit. Kann Gesetze für verfassungswidrig erklären. Sitz: Karlsruhe.',
        relations: 'Prüft Gesetze von Bundestag/Bundesrat (Normenkontrolle). Kontrolliert Bundesregierung. Richter:innen von Bundestag, Bundesrat gewählt und von Bundespräsident:in ernannt. Entscheidet Organstreit.',
        x: 50, y: 88,
      },
    ];

    const MOBILE_CONNECTIONS = [
      { from: 'grundgesetz', to: 'bundestag' },
      { from: 'grundgesetz', to: 'bundesrat' },
      { from: 'grundgesetz', to: 'bundesregierung' },
      { from: 'grundgesetz', to: 'bundespraesident' },
      { from: 'grundgesetz', to: 'bverfg' },
      { from: 'bundestag', to: 'bundesregierung', label: 'wählt Kanzler:in' },
      { from: 'bundestag', to: 'bundesrat', label: 'Gesetzgebung' },
      { from: 'bundestag', to: 'bundespraesident', label: 'Bundesversammlung' },
      { from: 'bundestag', to: 'bverfg', label: 'wählt Richter:innen' },
      { from: 'bundesrat', to: 'bundespraesident', label: 'Bundesversammlung' },
      { from: 'bundesrat', to: 'bverfg', label: 'wählt Richter:innen' },
      { from: 'bundesrat', to: 'bundesregierung', label: 'Zustimmungsgesetze' },
      { from: 'bundesregierung', to: 'bverfg', label: 'unterliegt Kontrolle' },
      { from: 'bundespraesident', to: 'bundesregierung', label: 'ernennt Minister' },
      { from: 'bundespraesident', to: 'bverfg', label: 'ernennt Richter:innen' },
      { from: 'bverfg', to: 'bundestag', label: 'Normenkontrolle' },
    ];

    function VerfassungsMobile() {
      const [active, setActive] = useState(null);
      const [hovered, setHovered] = useState(null);
      const highlighted = active || hovered;
      const activeOrgan = active ? MOBILE_ORGANS.find(o => o.id === active) : null;
      const W = 320, H = 280;
      const BORDER_COLORS = { legislative: '#3b82f6', exekutive: '#f59e0b', judikative: '#10b981', staatsoberhaupt: '#8b5cf6', grundgesetz: '#1a73e8' };
      const FILL_COLORS = { legislative: '#eff6ff', exekutive: '#fffbeb', judikative: '#ecfdf5', staatsoberhaupt: '#f5f3ff', grundgesetz: '#1a73e8' };
      const TAG_COLORS = { legislative: '#dbeafe', exekutive: '#fef3c7', judikative: '#d1fae5', staatsoberhaupt: '#ede9fe' };

      const px = (pct, total) => pct / 100 * total;
      const getXY = (o) => ({ x: px(o.x, W), y: px(o.y, H) });

      const getStroke = (fromId, toId) => {
        const from = MOBILE_ORGANS.find(n => n.id === fromId);
        if (from && BORDER_COLORS[from.gewaltKey]) return BORDER_COLORS[from.gewaltKey];
        const to = MOBILE_ORGANS.find(n => n.id === toId);
        if (to && BORDER_COLORS[to.gewaltKey]) return BORDER_COLORS[to.gewaltKey];
        return '#94a3b8';
      };

      const curvePath = (p1, p2) => {
        const dx = p2.x - p1.x;
        const dy = p2.y - p1.y;
        const cx1 = p1.x + dx * 0.2;
        const cy1 = p1.y + dy * 0.55;
        const cx2 = p2.x - dx * 0.2;
        const cy2 = p2.y - dy * 0.55;
        return `M ${p1.x} ${p1.y} C ${cx1} ${cy1}, ${cx2} ${cy2}, ${p2.x} ${p2.y}`;
      };

      const legendItems = [
        { color: '#3b82f6', label: 'Legislative' },
        { color: '#f59e0b', label: 'Exekutive' },
        { color: '#10b981', label: 'Judikative' },
        { color: '#8b5cf6', label: 'Staatsoberhaupt' },
      ];

      const nodeR = 28;
      const rootR = 32;

      return (
        <div className="mobile-wrap">
          <h4>Verfassungsorgane – interaktives Mobilé</h4>
          <div className="mobile-hint">Tippe auf ein Organ für Details und Beziehungen</div>
          <div className="mobile-legend">
            {legendItems.map(l => (
              <span key={l.label} className="mobile-legend-item">
                <span className="mobile-legend-dot" style={{ background: l.color }} />
                {l.label}
              </span>
            ))}
          </div>
          <div className="mobile-canvas">
            <svg viewBox={`0 0 ${W} ${H}`} xmlns="http://www.w3.org/2000/svg">
              <defs>
                <filter id="nodeShadow" x="-20%" y="-20%" width="140%" height="140%">
                  <feDropShadow dx="0" dy="2" stdDeviation="3" floodOpacity="0.1"/>
                </filter>
                <filter id="glowLine" x="-20%" y="-20%" width="140%" height="140%">
                  <feGaussianBlur stdDeviation="2" result="blur"/>
                  <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              {MOBILE_CONNECTIONS.map((c, i) => {
                const from = getXY(MOBILE_ORGANS.find(n => n.id === c.from));
                const to = getXY(MOBILE_ORGANS.find(n => n.id === c.to));
                const isActive = highlighted && (c.from === highlighted || c.to === highlighted);
                const mid = { x: (from.x + to.x) / 2, y: (from.y + to.y) / 2 };
                const stroke = getStroke(c.from, c.to);
                return (
                  <React.Fragment key={i}>
                    <path
                      d={curvePath(from, to)}
                      stroke={stroke}
                      className={'conn' + (isActive ? ' active' : (highlighted ? ' dimmed' : ''))}
                      strokeDasharray={isActive ? 'none' : '4 3'}
                      filter={isActive ? 'url(#glowLine)' : 'none'}
                    />
                  </React.Fragment>
                );
              })}
              {MOBILE_ORGANS.map((organ) => {
                const pos = getXY(organ);
                const isAct = active === organ.id;
                const isConn = highlighted && MOBILE_CONNECTIONS.some(
                  c => (c.from === highlighted && c.to === organ.id) || (c.to === highlighted && c.from === organ.id) || organ.id === highlighted
                );
                const isFaded = highlighted && !isConn;
                const isRoot = organ.id === 'grundgesetz';
                const r = isRoot ? rootR : nodeR;
                const border = BORDER_COLORS[organ.gewaltKey] || '#94a3b8';
                const fill = isRoot ? 'url(#rootGrad)' : (FILL_COLORS[organ.gewaltKey] || '#fff');
                const tagBg = TAG_COLORS[organ.gewaltKey] || '#e2e8f0';
                return (
                  <g key={organ.id}
                    className={'m-node' + (isAct ? ' active' : '') + (isRoot ? ' root' : '') + (isFaded ? ' faded' : '')}
                    onClick={() => setActive(active === organ.id ? null : organ.id)}
                    onMouseEnter={() => setHovered(organ.id)}
                    onMouseLeave={() => setHovered(null)}
                    filter="url(#nodeShadow)"
                  >
                    {isRoot && (
                      <defs>
                        <linearGradient id="rootGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                          <stop offset="0%" stopColor="#1e3a5f" />
                          <stop offset="100%" stopColor="#2563eb" />
                        </linearGradient>
                      </defs>
                    )}
                    <circle className="m-node-bg" cx={pos.x} cy={pos.y} r={isAct ? r + 3 : r} fill={fill} opacity="0.95" />
                    <circle className="m-node-border" cx={pos.x} cy={pos.y} r={isAct ? r + 3 : r} stroke={border} />
                    <text className="m-node-icon" x={pos.x} y={pos.y - 4} textAnchor="middle" dominantBaseline="central">{organ.icon}</text>
                    <text className="m-node-label" x={pos.x} y={pos.y + 12} textAnchor="middle">{organ.label.length > 16 ? organ.label.slice(0,14) + '…' : organ.label}</text>
                    {organ.gewalt && !isRoot && (
                      <>
                        <rect x={pos.x - organ.gewalt.length * 2.2} y={pos.y + 17} width={organ.gewalt.length * 4.4} height={10} rx="4" fill={tagBg} />
                        <text className="m-node-tag" x={pos.x} y={pos.y + 24} textAnchor="middle" fill={border}>{organ.gewalt}</text>
                      </>
                    )}
                    {isRoot && organ.gewalt && (
                      <>
                        <rect x={pos.x - organ.gewalt.length * 2.5} y={pos.y + 17} width={organ.gewalt.length * 5} height={10} rx="4" fill="rgba(255,255,255,0.2)" />
                        <text className="m-node-tag" x={pos.x} y={pos.y + 24} textAnchor="middle" fill="rgba(255,255,255,0.85)">{organ.gewalt}</text>
                      </>
                    )}
                  </g>
                );
              })}
            </svg>
          </div>
          {activeOrgan && (
            <div className="mobile-detail">
              <div className="mobile-detail-header">
                <div className="mobile-detail-icon-wrap" data-g={activeOrgan.gewaltKey}>
                  {activeOrgan.icon}
                </div>
                <div>
                  <h5>{activeOrgan.label}</h5>
                  {activeOrgan.gewalt && <span className="mobile-detail-gewalt" data-g={activeOrgan.gewaltKey}>{activeOrgan.gewalt}</span>}
                </div>
              </div>
              <p className="mobile-detail-body">{activeOrgan.detail}</p>
              <div className="mobile-detail-relation">
                <strong>Beziehungen</strong>
                <span>{activeOrgan.relations}</span>
              </div>
            </div>
          )}
        </div>
      );
    }

    function MagicHexagonWidget({ title, items }) {
      const [active, setActive] = useState(null);
      if (!items || items.length < 6) return null;
      const ordered = items.slice(0, 6);
      const cx = 150; const cy = 150; const r = 108;
      const vertexOrder = [2, 1, 3, 4, 5, 0];
      const positions = vertexOrder.map((_, i) => {
        const deg = 90 - i * 60;
        const rad = (deg * Math.PI) / 180;
        return { x: cx + r * Math.cos(rad), y: cy - r * Math.sin(rad) };
      });
      return (
        <div className="content-block">
          <div className="content-block-title"><span className="icon-wrap">⬡</span> {title || 'Magisches Sechseck'}</div>
          <div className="magic-hexagon-wrap">
          <div className="magic-hexagon-svg-wrap" style={{ paddingBottom: '100%' }}>
            <svg className="magic-hexagon-svg" viewBox="0 0 300 300" style={{ position: 'absolute', left: 0, top: 0, width: '100%', height: '100%' }}>
              <polygon className="magic-hexagon-path" points={positions.map(p => `${p.x},${p.y}`).join(' ')} strokeWidth="2" />
            </svg>
            {vertexOrder.map((itemIdx, posIdx) => {
              const p = positions[posIdx];
              const pctX = (p.x / 300) * 100;
              const pctY = (p.y / 300) * 100;
              return (
                <button
                  key={posIdx}
                  type="button"
                  className={'magic-hexagon-node' + (active === itemIdx ? ' active' : '')}
                  onClick={() => setActive(active === itemIdx ? null : itemIdx)}
                  title={ordered[itemIdx].description}
                  style={{
                    left: pctX + '%',
                    top: pctY + '%',
                    transform: 'translate(-50%, -50%)',
                  }}
                >
                  {ordered[itemIdx].label}
                </button>
              );
            })}
          </div>
          {active !== null && ordered[active] && (
            <div className="magic-hexagon-detail">
              <h4>{ordered[active].label}</h4>
              <p>{ordered[active].description}</p>
            </div>
          )}
          </div>
        </div>
      );
    }

    function CompareTableWidget({ title, leftHeader, rightHeader, rows }) {
      if (!rows || !rows.length) return null;
      return (
        <div className="sachbox" style={{ overflowX: 'auto' }}>
          {title && <h4 style={{ marginBottom: '0.75rem' }}>{title}</h4>}
          <table className="compare-table">
            <thead>
              <tr><th>{leftHeader}</th><th>{rightHeader}</th></tr>
            </thead>
            <tbody>
              {rows.map((row, i) => (
                <tr key={i}>
                  <td className="col-left">{row.left}</td>
                  <td className="col-right">{row.right}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      );
    }

    function ThreePrinciplesWidget({ title, principles }) {
      if (!principles || principles.length === 0) return null;
      return (
        <div>
          {title && <h3 style={{ marginBottom: '0.75rem', color: 'var(--primary)' }}>{title}</h3>}
          <div className="three-principles">
            {principles.map((p, i) => (
              <div key={i} className="principle-card">
                <h4>{p.title}</h4>
                <p>{p.text}</p>
              </div>
            ))}
          </div>
        </div>
      );
    }

    function ChunkedCardWidget({ title, steps }) {
      const [stepIndex, setStepIndex] = useState(0);
      const [checkAnswered, setCheckAnswered] = useState({});
      const [checkReveal, setCheckReveal] = useState({});
      if (!steps || steps.length === 0) return null;
      const step = steps[stepIndex];
      const cp = step.checkpoint;
      const answered = checkAnswered[stepIndex];
      const revealed = checkReveal[stepIndex];
      const selectOption = (optIndex) => {
        if (checkAnswered[stepIndex] !== undefined) return;
        setCheckAnswered(prev => ({ ...prev, [stepIndex]: optIndex }));
      };
      const reveal = () => setCheckReveal(prev => ({ ...prev, [stepIndex]: true }));
      const next = () => {
        setStepIndex(i => Math.min(i + 1, steps.length - 1));
      };
      const isCorrect = cp && answered !== undefined && answered === cp.correctIndex;
      return (
        <div className="chunked-card-wrap">
          {title && <h4 style={{ marginTop: 0, marginBottom: '1rem', color: 'var(--primary)' }}>{title}</h4>}
          <div className="chunked-step-label">Schritt {stepIndex + 1} von {steps.length}</div>
          <div className="chunked-step-title">{step.title}</div>
          <div className="chunked-step-content">
            {step.content.split('\n\n').map((p, i) => <p key={i} style={{ margin: i > 0 ? '0.75rem 0 0' : '0' }}>{p}</p>)}
          </div>
          {cp && (
            <div className="chunked-checkpoint">
              <div className="chunked-checkpoint-question">Kurz-Check: {cp.question}</div>
              {cp.options && cp.correctIndex !== undefined ? (
                <>
                  <div className="chunked-check-options">
                    {cp.options.map((opt, oi) => {
                      let cls = 'chunked-check-option';
                      if (answered !== undefined) {
                        if (oi === cp.correctIndex) cls += ' correct';
                        else if (answered === oi) cls += ' wrong';
                      }
                      return (
                        <button key={oi} type="button" className={cls} onClick={() => selectOption(oi)} disabled={answered !== undefined}>
                          {opt}
                        </button>
                      );
                    })}
                  </div>
                  {answered !== undefined && <div className="chunked-check-reveal">{isCorrect ? 'Richtig.' : 'Richtig ist: ' + cp.options[cp.correctIndex]}</div>}
                </>
              ) : (
                <>
                  {!revealed && <button type="button" className="antwort-toggle" onClick={reveal}>Lösung anzeigen</button>}
                  {revealed && cp.answer && <div className="chunked-check-reveal">{cp.answer}</div>}
                </>
              )}
            </div>
          )}
          {stepIndex < steps.length - 1 && (
            <button type="button" className="primary" style={{ marginTop: '1rem' }} onClick={next}>
              Weiter: Schritt {stepIndex + 2}
            </button>
          )}
        </div>
      );
    }

    const ZYKLUS_COLORS = ['#3b82f6', '#8b5cf6', '#f59e0b', '#10b981', '#ef4444'];
    const ZYKLUS_DETAILS = [
      'Ein gesellschaftliches Problem wird öffentlich wahrgenommen und auf die politische Tagesordnung gesetzt (z. B. durch Medien, Parteien, Interessengruppen).',
      'Politische Akteure erarbeiten mögliche Lösungen, Gesetzentwürfe und Alternativen (z. B. Ministerien, Fraktionen, Sachverständige).',
      'Parlament, Regierung oder andere Organe treffen verbindliche Beschlüsse – Gesetze werden verabschiedet.',
      'Die beschlossenen Maßnahmen werden von der Verwaltung und den zuständigen Behörden in die Praxis umgesetzt.',
      'Die Wirkung der Maßnahme wird überprüft: Hat sie das Problem gelöst? Gibt es Nachbesserungsbedarf? → Kreislauf beginnt ggf. erneut.',
    ];

    function PolitikzyklusCircle({ phases }) {
      const [active, setActive] = useState(null);
      const n = phases.length;
      const W = 320, H = 320;
      const cx = W / 2, cy = H / 2, r = 115;
      const nodeR = 32;
      const startAngle = -90;
      const FILLS = ['#eff6ff', '#f5f3ff', '#fffbeb', '#ecfdf5', '#fef2f2'];

      const nodePositions = phases.map((_, i) => {
        const angle = startAngle + (i * 360 / n);
        const rad = angle * Math.PI / 180;
        return { x: cx + r * Math.cos(rad), y: cy + r * Math.sin(rad) };
      });

      const arrowPath = (i) => {
        const next = (i + 1) % n;
        const a1 = (startAngle + i * 360 / n) * Math.PI / 180;
        const a2 = (startAngle + next * 360 / n) * Math.PI / 180;
        const gap = 0.28;
        const sa = a1 + gap;
        const ea = a2 - gap;
        return {
          d: `M ${cx + r * Math.cos(sa)} ${cy + r * Math.sin(sa)} A ${r} ${r} 0 0 1 ${cx + r * Math.cos(ea)} ${cy + r * Math.sin(ea)}`,
        };
      };

      const shortLabel = (text) => text.split('(')[0].trim();

      return (
        <div className="zyklus-wrap">
          <h4>Politikzyklus</h4>
          <div className="zyklus-hint">Tippe auf eine Phase für Details</div>
          <div className="zyklus-canvas">
            <svg viewBox={`0 0 ${W} ${H}`} xmlns="http://www.w3.org/2000/svg">
              <defs>
                <filter id="zNodeShadow" x="-20%" y="-20%" width="140%" height="140%">
                  <feDropShadow dx="0" dy="2" stdDeviation="3" floodOpacity="0.1"/>
                </filter>
                {phases.map((_, i) => (
                  <marker key={'za' + i} id={'zArr' + i} markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
                    <polygon points="0 0, 7 2.5, 0 5" fill={ZYKLUS_COLORS[i % ZYKLUS_COLORS.length]} />
                  </marker>
                ))}
              </defs>
              <text x={cx} y={cy - 6} textAnchor="middle" fontSize="11" fontWeight="700" fontFamily="DM Sans, sans-serif" fill="#94a3b8">Politik-</text>
              <text x={cx} y={cy + 8} textAnchor="middle" fontSize="11" fontWeight="700" fontFamily="DM Sans, sans-serif" fill="#94a3b8">zyklus</text>
              {phases.map((_, i) => {
                const ap = arrowPath(i);
                const next = (i + 1) % n;
                const isActive = active === i || active === next;
                return (
                  <path key={'arc' + i}
                    d={ap.d} fill="none"
                    stroke={ZYKLUS_COLORS[i % ZYKLUS_COLORS.length]}
                    strokeWidth={isActive ? 3 : 2}
                    strokeLinecap="round"
                    markerEnd={'url(#zArr' + i + ')'}
                    className={'z-arrow' + (isActive ? ' active' : (active !== null ? ' dimmed' : ''))}
                    opacity={isActive ? 0.85 : 0.5}
                  />
                );
              })}
              {nodePositions.map((pos, i) => {
                const color = ZYKLUS_COLORS[i % ZYKLUS_COLORS.length];
                const fill = FILLS[i % FILLS.length];
                const isAct = active === i;
                const isFaded = active !== null && !isAct;
                return (
                  <g key={i}
                    className={'z-node' + (isFaded ? ' faded' : '')}
                    onClick={() => setActive(active === i ? null : i)}
                    filter="url(#zNodeShadow)"
                  >
                    <circle className="z-node-bg" cx={pos.x} cy={pos.y} r={isAct ? nodeR + 3 : nodeR}
                      fill={isAct ? color : fill} opacity="0.95"
                      style={{ transition: 'fill 0.25s' }}
                    />
                    <circle cx={pos.x} cy={pos.y} r={isAct ? nodeR + 3 : nodeR}
                      fill="none" stroke={color} strokeWidth={isAct ? 3 : 2}
                      style={{ transition: 'stroke-width 0.25s' }}
                    />
                    <text x={pos.x} y={pos.y - 5}
                      textAnchor="middle" fontSize="14" fontWeight="700" fontFamily="DM Sans, sans-serif"
                      fill={isAct ? '#fff' : color}
                      style={{ transition: 'fill 0.25s' }}
                    >
                      {i + 1}
                    </text>
                    <text x={pos.x} y={pos.y + 10}
                      textAnchor="middle" fontSize="8" fontWeight="600" fontFamily="DM Sans, sans-serif"
                      fill={isAct ? 'rgba(255,255,255,0.9)' : '#475569'}
                      style={{ transition: 'fill 0.25s' }}
                    >
                      {shortLabel(phases[i]).length > 15 ? shortLabel(phases[i]).slice(0, 14) + '…' : shortLabel(phases[i])}
                    </text>
                  </g>
                );
              })}
            </svg>
          </div>
          {active !== null && (
            <div className="zyklus-detail">
              <div className="zyklus-detail-header">
                <span className="zyklus-detail-num" style={{ background: ZYKLUS_COLORS[active % ZYKLUS_COLORS.length] }}>{active + 1}</span>
                <h5>{phases[active].split('(')[0].trim()}</h5>
              </div>
              <p>{ZYKLUS_DETAILS[active] || phases[active]}</p>
            </div>
          )}
        </div>
      );
    }

    function renderWidget(widget, key) {
      if (!widget || !widget.type) return null;
      if (widget.type === 'magic-hexagon') return <MagicHexagonWidget key={key} title={widget.title} items={widget.items} />;
      if (widget.type === 'compare-table') return <CompareTableWidget key={key} title={widget.title} leftHeader={widget.leftHeader} rightHeader={widget.rightHeader} rows={widget.rows} />;
      if (widget.type === 'three-principles') return <ThreePrinciplesWidget key={key} title={widget.title} principles={widget.principles} />;
      if (widget.type === 'chunked-card') return <ChunkedCardWidget key={key} title={widget.title} steps={widget.steps} />;
      if (widget.type === 'do-first') return <DoFirstWidget key={key} title={widget.title} task={widget.task} explanation={widget.explanation} />;
      if (widget.type === 'concept-map') return <ConceptMapWidget key={key} title={widget.title} nodes={widget.nodes} />;
      if (widget.type === 'sort-exercise') return <SortExercise key={key} title={widget.title} correctOrder={widget.correctOrder} instruction={widget.instruction} />;
      if (widget.type === 'verfassungs-mobile') return <VerfassungsMobile key={key} />;
      if (widget.type === 'politikzyklus-circle') return <PolitikzyklusCircle key={key} phases={widget.phases} />;
      return null;
    }

    function SortExercise({ title, correctOrder, instruction }) {
      const [items, setItems] = useState(() => {
        const shuffled = [...correctOrder];
        for (let i = shuffled.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
      });
      const [checked, setChecked] = useState(false);
      const [selected, setSelected] = useState(null);
      const swap = (index) => {
        if (checked) return;
        if (selected === null) { setSelected(index); return; }
        if (selected === index) { setSelected(null); return; }
        setItems(prev => {
          const next = [...prev];
          [next[selected], next[index]] = [next[index], next[selected]];
          return next;
        });
        setSelected(null);
      };
      const isCorrect = items.every((item, i) => item === correctOrder[i]);
      return (
        <div className="do-first-wrap">
          {title && <h4 style={{ marginTop: 0, marginBottom: '0.5rem', color: 'var(--primary)', fontSize: '0.95rem' }}>{title}</h4>}
          <p style={{ fontSize: '0.9rem', color: 'var(--text-muted)', marginBottom: '0.75rem' }}>{instruction || 'Tippe zwei Felder an, um sie zu tauschen. Bringe die richtige Reihenfolge!'}</p>
          <div style={{ display: 'flex', flexDirection: 'column', gap: '0.4rem' }}>
            {items.map((item, i) => {
              let bg = 'var(--bg)';
              let border = '2px solid var(--border)';
              if (checked && item === correctOrder[i]) { bg = 'rgba(52,168,83,0.12)'; border = '2px solid var(--accent)'; }
              else if (checked) { bg = 'rgba(197,34,31,0.08)'; border = '2px solid #c5221f'; }
              else if (selected === i) { bg = 'rgba(26,115,232,0.1)'; border = '2px solid var(--primary)'; }
              return (
                <button key={i} type="button" onClick={() => swap(i)} disabled={checked}
                  style={{ padding: '0.6rem 1rem', borderRadius: '8px', background: bg, border, cursor: checked ? 'default' : 'pointer', fontFamily: 'inherit', fontSize: '0.9rem', textAlign: 'left', transition: 'all 0.2s' }}>
                  <span style={{ fontWeight: 600, color: 'var(--primary)', marginRight: '0.5rem' }}>{i + 1}.</span> {item}
                </button>
              );
            })}
          </div>
          {!checked && <button type="button" style={{ marginTop: '0.75rem', padding: '0.5rem 1.25rem', background: 'var(--primary)', color: 'white', border: 'none', borderRadius: 'var(--radius)', cursor: 'pointer', fontWeight: 500, fontFamily: 'inherit' }} onClick={() => setChecked(true)}>Prüfen</button>}
          {checked && (
            <div style={{ marginTop: '0.75rem', padding: '0.75rem', borderRadius: '8px', background: isCorrect ? 'rgba(52,168,83,0.1)' : 'rgba(197,34,31,0.08)', borderLeft: '3px solid ' + (isCorrect ? 'var(--accent)' : '#c5221f'), fontSize: '0.9rem' }}>
              {isCorrect ? 'Richtig! Die Reihenfolge stimmt.' : 'Nicht ganz. Die richtige Reihenfolge: ' + correctOrder.map((x, i) => (i + 1) + '. ' + x).join(' → ')}
            </div>
          )}
        </div>
      );
    }

    function ConceptMapNode({ node, depth, expanded, onToggle }) {
      const hasDetail = node.detail;
      const hasChildren = node.children && node.children.length > 0;
      const isExpanded = expanded;
      return (
        <div className="concept-map-node" style={{ marginLeft: depth > 0 ? '1rem' : 0 }}>
          <div className="node-label" onClick={() => hasDetail && onToggle()}>
            {hasDetail && <span>{isExpanded ? '▼' : '▶'}</span>}
            {node.label}
          </div>
          {hasDetail && isExpanded && <div className="node-detail">{node.detail}</div>}
          {hasChildren && (
            <div className="node-children">
              {node.children.map((child, i) => (
                <ConceptMapNode key={i} node={child} depth={depth + 1} expanded={true} onToggle={() => {}} />
              ))}
            </div>
          )}
        </div>
      );
    }

    function ConceptMapWidget({ title, nodes }) {
      const [expanded, setExpanded] = useState({});
      const toggle = (i) => setExpanded(prev => ({ ...prev, [i]: !prev[i] }));
      if (!nodes || nodes.length === 0) return null;
      return (
        <div className="concept-map-wrap">
          {title && <h4>Verknüpfung: {title}</h4>}
          <p style={{ fontSize: '0.85rem', color: 'var(--text-muted)', marginBottom: '1rem' }}>Klicke auf einen Begriff, um die Kurzinfo anzuzeigen.</p>
          {nodes.map((node, i) => (
            <ConceptMapNode
              key={i}
              node={node}
              depth={0}
              expanded={expanded[i]}
              onToggle={() => toggle(i)}
            />
          ))}
        </div>
      );
    }

    function DoFirstWidget({ title, task, explanation }) {
      const [selected, setSelected] = useState(null);
      if (!task || !task.question) return null;
      const options = task.options || [];
      return (
        <div className="do-first-wrap">
          {title && <h4 style={{ marginTop: 0, marginBottom: '0.5rem', color: 'var(--primary)', fontSize: '0.95rem' }}>Erst ausprobieren, dann lesen</h4>}
          <div className="do-first-question">{task.question}</div>
          <div className="do-first-options">
            {options.map((opt, i) => {
              let cls = 'do-first-option';
              if (selected !== null) {
                if (opt.correct) cls += ' correct';
                else if (selected === i) cls += ' wrong';
              }
              return (
                <button
                  key={i}
                  type="button"
                  className={cls}
                  onClick={() => selected === null && setSelected(i)}
                  disabled={selected !== null}
                >
                  {opt.label}
                </button>
              );
            })}
          </div>
          {selected !== null && explanation && (
            <div className="do-first-explanation">
              <strong>So wird es eingeordnet:</strong> {explanation}
            </div>
          )}
        </div>
      );
    }

    function LearningPathProgress({ goals, moduleKey }) {
      const storageKey = 'politik-app-lernpfad';
      const [done, setDone] = useState(() => {
        if (!moduleKey) return [];
        try {
          const raw = localStorage.getItem(storageKey);
          const data = raw ? JSON.parse(raw) : {};
          return Array.isArray(data[moduleKey]) ? data[moduleKey] : goals.map(() => false);
        } catch (e) { return goals.map(() => false); }
      });
      const toggle = (index) => {
        setDone(prev => {
          const next = [...prev];
          next[index] = !next[index];
          if (moduleKey) {
            try {
              const raw = localStorage.getItem(storageKey);
              const data = raw ? JSON.parse(raw) : {};
              data[moduleKey] = next;
              localStorage.setItem(storageKey, JSON.stringify(data));
            } catch (e) {}
          }
          return next;
        });
      };
      if (!goals || goals.length === 0) return null;
      const doneList = done.length >= goals.length ? done : [...done, ...goals.slice(done.length).map(() => false)];
      return (
        <div className="lernpfad-box">
          <h4>Du lernst in dieser Einheit</h4>
          <ul className="lernpfad-list">
            {goals.map((g, i) => (
              <li key={i} className={'lernpfad-item' + (doneList[i] ? ' done' : '')} onClick={() => toggle(i)}>
                <span className="lernpfad-check">{doneList[i] ? '✓' : ''}</span>
                <span>{i + 1}. {g}</span>
              </li>
            ))}
          </ul>
        </div>
      );
    }

    function PruefungsfragenBlock({ items }) {
      const [revealed, setRevealed] = useState({});
      const [mcAnswered, setMcAnswered] = useState({});
      const toggle = (i) => setRevealed(prev => ({ ...prev, [i]: !prev[i] }));
      const selectMc = (i, optIndex) => {
        if (mcAnswered[i] !== undefined) return;
        setMcAnswered(prev => ({ ...prev, [i]: optIndex }));
      };
      return (
        <div className="pruefungsbox">
          <h4>Typische Prüfungsfragen – erst selbst überlegen, dann Antwort prüfen</h4>
          {items.map((item, i) => {
            const hasMc = Array.isArray(item.options) && item.options.length > 0 && typeof item.correctIndex === 'number';
            const answered = mcAnswered[i];
            if (hasMc) {
              return (
                <div key={i} className="pruefung-item">
                  <p><strong>{item.q}</strong></p>
                  <div className="mc-options">
                    {item.options.map((opt, oi) => {
                      let cls = 'mc-option';
                      if (answered !== undefined) {
                        cls += ' disabled';
                        if (oi === item.correctIndex) cls += ' correct';
                        else if (answered === oi) cls += ' wrong';
                      }
                      return (
                        <button key={oi} type="button" className={cls} onClick={() => selectMc(i, oi)}>
                          {opt}
                        </button>
                      );
                    })}
                  </div>
                  {(answered !== undefined) && <div className="antwort-reveal"><span className="antwort">{item.a}</span></div>}
                </div>
              );
            }
            return (
              <div key={i} className="pruefung-item">
                <p><strong>{item.q}</strong></p>
                {revealed[i] ? (
                  <div className="antwort-reveal"><span className="antwort">{item.a}</span></div>
                ) : null}
                <button type="button" className="antwort-toggle" onClick={() => toggle(i)}>
                  {revealed[i] ? 'Antwort verbergen' : 'Antwort anzeigen'}
                </button>
              </div>
            );
          })}
        </div>
      );
    }

    function ExpandableCard({ card, index }) {
      const [open, setOpen] = useState(false);
      const preview = typeof card.content === 'string'
        ? card.content.substring(0, 80).replace(/\n/g, ' ') + (card.content.length > 80 ? '…' : '')
        : Array.isArray(card.content)
          ? card.content[0] + (card.content.length > 1 ? ' …' : '')
          : '';
      const renderContent = () => {
        if (Array.isArray(card.content)) return React.createElement('ul', null, card.content.map((c, j) => React.createElement('li', { key: j }, c)));
        if (typeof card.content === 'string' && card.content.includes('\n\n')) return card.content.split('\n\n').map((para, j) => React.createElement('p', { key: j }, para.trim()));
        return React.createElement('p', null, card.content);
      };
      return (
        <div className={'card expandable' + (open ? ' expanded' : '')} style={{ animationDelay: (index * 0.06) + 's' }} onClick={() => setOpen(!open)}>
          <div className="card-icon">{card.icon}</div>
          <h3 className="card-title">{card.title}</h3>
          {!open && <p className="card-preview">{preview}</p>}
          <div className="card-detail">
            <div className="card-content">{renderContent()}</div>
          </div>
          <div className="card-expand-toggle">
            <span className="chevron">▼</span> {open ? 'Einklappen' : 'Details anzeigen'}
          </div>
        </div>
      );
    }

    function FullContentSection({ module, content, onVisited, hasNext, nextLabel, onNext, moduleKey }) {
      React.useEffect(() => { onVisited && onVisited(); }, []);
      if (!content) return null;
      const { curriculum, title, intro, goals, cards, glossary, comparison, example, widgets, persons, aktualitaet, pruefung, politikzyklus } = content;
      return (
        <div className="content">
          <div className="curriculum-badge">Kerncurriculum {curriculum} · Niedersachsen</div>
          <h2 className="section-title">{title}</h2>
          <p className="section-intro">{intro}</p>
          {goals && goals.length > 0 && <LearningPathProgress goals={goals} moduleKey={moduleKey} />}
          {goals && goals.length > 0 && <LearningGoals goals={goals} title={'Für die Prüfung (Kerncurriculum ' + curriculum + ')'} />}
          {persons && persons.length > 0 && (
            <div className="content-block">
              <div className="content-block-title"><span className="icon-wrap">👤</span> Wichtige Namen – für die Prüfung</div>
              <div className="person-cards">
                {persons.map((p, i) => (
                  <div key={i} className="person-card">
                    <div className="person-name">{p.name}</div>
                    <div className="person-meta">{p.meta}</div>
                    <p className="person-idea">{p.idea}</p>
                  </div>
                ))}
              </div>
            </div>
          )}
          {widgets && widgets.length > 0 && (
            <div className="widgets-block" style={{ marginTop: '1.5rem' }}>
              {widgets.map((w, i) => renderWidget(w, i))}
            </div>
          )}
          {cards && cards.length > 0 && (
            <div className="content-block">
              <div className="content-block-title"><span className="icon-wrap">📋</span> Kerninhalte <span style={{ fontSize: '0.75rem', fontWeight: 400, color: 'var(--text-muted)', marginLeft: '0.5rem' }}>(klicke zum Aufklappen)</span></div>
              <div className="cards-grid">
              {cards.map((card, i) => <ExpandableCard key={i} card={card} index={i} />)}
              </div>
            </div>
          )}
          {comparison && (
            <div className="comparison-grid">
              <div className="comparison-card pro"><h3>{comparison.leftTitle}</h3><ul>{comparison.leftItems.map((x, i) => <li key={i}>{x}</li>)}</ul></div>
              <div className="comparison-card con"><h3>{comparison.rightTitle}</h3><ul>{comparison.rightItems.map((x, i) => <li key={i}>{x}</li>)}</ul></div>
            </div>
          )}
          {example && (
            <div className="example-box">
              <div className="label">{example.label}</div>
              <p>{example.text}</p>
            </div>
          )}
          {aktualitaet && (
            <div className="aktualitaet-box">
              <div className="aktualitaet-label">Aktualität / Für die Prüfung (Stand 2026)</div>
              <div className="aktualitaet-title">{aktualitaet.title}</div>
              <p>{aktualitaet.text}</p>
              {aktualitaet.quelle && <p className="quelle">{aktualitaet.quelle}</p>}
            </div>
          )}
          {politikzyklus && politikzyklus.length > 0 && (
            <PolitikzyklusCircle phases={politikzyklus} />
          )}
          {pruefung && pruefung.length > 0 && (
            <div className="content-block">
              <PruefungsfragenBlock items={pruefung} />
            </div>
          )}
          {glossary && glossary.length > 0 && (
            <div className="content-block">
              <div className="content-block-title"><span className="icon-wrap">📖</span> Schlüsselbegriffe</div>
              <table className="glossary-table">
                <thead><tr><th>Begriff</th><th>Definition</th></tr></thead>
                <tbody>{glossary.map((g, i) => <tr key={i}><td>{g.term}</td><td>{g.def}</td></tr>)}</tbody>
              </table>
            </div>
          )}
          <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />
        </div>
      );
    }

    function LearningGoals({ goals, title }) {
      return (
        <div className="learning-goals">
          <h4>{title || '🎯 Für die Prüfung (Kerncurriculum)'}</h4>
          <ul>
            {goals.map((g, i) => <li key={i}>{g}</li>)}
          </ul>
        </div>
      );
    }

    function NextSection({ hasNext, nextLabel, onNext }) {
      if (!hasNext || !nextLabel || !onNext) return null;
      return (
        <div className="next-section-wrap">
          <button type="button" className="next-section-btn" onClick={onNext}>
            Weiter: {nextLabel} <span className="arrow">→</span>
          </button>
        </div>
      );
    }

    function GlobalSection({ onVisited, hasNext, nextLabel, onNext, moduleKey }) {
      React.useEffect(() => { onVisited && onVisited('global'); }, []);
      const goals = [
        'Merkmale der Globalisierung nennen (Welthandelsvolumen, -ströme, FDI, multinationale Konzerne).',
        'Welthandel und FDI begrifflich abgrenzen und ihre Rolle erklären.'
      ];
      return (
        <div className="content">
          <div className="curriculum-badge">Kerncurriculum 13.2 · Niedersachsen</div>
          <h2 className="section-title">Ökonomische Globalisierung</h2>
          <p className="section-intro">
            Ökonomische Globalisierung bedeutet: Volkswirtschaften sind durch Handel und Investitionen immer stärker miteinander verbunden. Für die Prüfung solltest du die vier zentralen Merkmale sicher unterscheiden und erklären können.
          </p>
          <LearningPathProgress goals={goals} moduleKey={moduleKey} />
          <LearningGoals goals={goals} title="Für die Prüfung (Kerncurriculum 13.2)" />
          <h3 style={{ marginTop: '1.5rem', marginBottom: '0.75rem', color: 'var(--primary)' }}>Vier zentrale Merkmale im Überblick</h3>
          <div className="cards-grid">
            <div className="card" style={{ animationDelay: '0s' }}>
              <div className="card-icon">📈</div>
              <h3 className="card-title">Welthandelsvolumen</h3>
              <div className="card-content">
                <p>Gesamtvolumen des grenzüberschreitenden Handels (Güter + Dienstleistungen). Wächst seit Jahrzehnten stärker als die Weltwirtschaft – zeigt die Kraft internationaler Arbeitsteilung.</p>
              </div>
            </div>
            <div className="card" style={{ animationDelay: '0.08s' }}>
              <div className="card-icon">🔄</div>
              <h3 className="card-title">Welthandelsströme</h3>
              <div className="card-content">
                <p>Richtungen des Handels: EU–China, EU–USA, Asien–Europa, Nord-Süd. Zeigen, welche Regionen stark verflochten sind und wo Abhängigkeiten entstehen.</p>
              </div>
            </div>
            <div className="card" style={{ animationDelay: '0.16s' }}>
              <div className="card-icon">💼</div>
              <h3 className="card-title">Direktinvestitionen (FDI)</h3>
              <div className="card-content">
                <p>Foreign Direct Investment: langfristige Auslandsinvestitionen (mind. 10 % Beteiligung). Anders als Handel: Im Ausland wird produziert (Tochterfirmen, Joint Ventures). Vertieft Verflechtung und ermöglicht Technologietransfer.</p>
              </div>
            </div>
            <div className="card" style={{ animationDelay: '0.24s' }}>
              <div className="card-icon">🏢</div>
              <h3 className="card-title">Multinationale Konzerne</h3>
              <div className="card-content">
                <p>Unternehmen mit Produktion in mehreren Ländern. Prägen Handelsströme (Konzern-interner Handel), Steuerwettbewerb und Arbeitsstandards. Prüfung: Rolle der MNUs für die Globalisierung erklären.</p>
              </div>
            </div>
          </div>
          <div className="aktualitaet-box">
            <div className="aktualitaet-label">Aktualität – Kontext für die Prüfung (Stand 2026)</div>
            <div className="aktualitaet-title">Welthandel und FDI heute</div>
            <p>Welthandelsvolumen und FDI sind weiterhin zentrale Indikatoren der Globalisierung. Durch Pandemie und Lieferkettenkrisen (z. B. 2020–2022) sowie geopolitische Spannungen (USA–China, Krieg in der Ukraine) sind Verflechtungen und Abhängigkeiten stärker in den Fokus gerückt (Stand 2026) – für die Prüfung: Merkmale der Globalisierung (Handel, FDI, multinationale Konzerne) und deren Rolle erklären können.</p>
            <p className="quelle">Vgl. WTO (World Trade Organization), UNCTAD (FDI-Berichte), Destatis.</p>
          </div>
          <h3 style={{ marginTop: '2rem', marginBottom: '0.75rem', color: 'var(--primary)' }}>Schlüsselbegriffe</h3>
          <table className="glossary-table">
            <thead><tr><th>Begriff</th><th>Definition</th></tr></thead>
            <tbody>
              <tr><td>Globalisierung</td><td>Zunehmende weltweite Verflechtung in Wirtschaft, Politik, Kultur</td></tr>
              <tr><td>Welthandel</td><td>Grenzüberschreitender Austausch von Gütern und Dienstleistungen</td></tr>
              <tr><td>FDI</td><td>Langfristige Auslandsinvestitionen mit Kontrolle (mind. 10 %)</td></tr>
            </tbody>
          </table>
          <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />
        </div>
      );
    }

    function TheoriesSection({ onVisited, hasNext, nextLabel, onNext, moduleKey }) {
      React.useEffect(() => { onVisited && onVisited('theories'); }, []);
      const goals = [
        'Absolute und komparative Kostenvorteile (Smith, Ricardo) erklären und unterscheiden.',
        'Intraindustriellen Handel am Beispiel Deutschland (z. B. Kfz) erläutern.',
        'Opportunitätskosten in den Handelstheorien anwenden.'
      ];
      return (
        <div className="content">
          <div className="curriculum-badge">Kerncurriculum 13.2 · Niedersachsen</div>
          <h2 className="section-title">Erklärungsansätze für internationalen Handel</h2>
          <p className="section-intro">
            Warum handeln Länder überhaupt? Drei Erklärungsansätze sind prüfungsrelevant: absolute Kostenvorteile (Smith), komparative Kostenvorteile (Ricardo) und intraindustrieller Handel. Sie bauen aufeinander auf und ergänzen sich.
          </p>
          <LearningPathProgress goals={goals} moduleKey={moduleKey} />
          <LearningGoals goals={goals} title="Für die Prüfung (Kerncurriculum 13.2)" />
          <h3 className="section-heading-interactive">Wichtige Theoretiker – für die Prüfung kennen</h3>
          <div className="person-cards">
            <div className="person-card">
              <div className="person-name">Adam Smith</div>
              <div className="person-meta">1723–1790, schottischer Ökonom und Philosoph</div>
              <p className="person-idea"><strong>Hauptwerk:</strong> „Der Wohlstand der Nationen“ (1776). <strong>Kernidee absolute Kostenvorteile:</strong> Jedes Land produziert das, was es am effizientesten kann – Spezialisierung und Handel steigern den Wohlstand.</p>
            </div>
            <div className="person-card">
              <div className="person-name">David Ricardo</div>
              <div className="person-meta">1772–1823, britischer Ökonom</div>
              <p className="person-idea"><strong>Hauptwerk:</strong> „Principles of Political Economy“ (1817). <strong>Komparative Kostenvorteile:</strong> Entscheidend sind relative Kosten (Opportunitätskosten). Auch wenn ein Land in allem produktiver ist, lohnt sich Handel – jedes Land spezialisiert sich auf das Gut mit dem geringsten relativen Nachteil.</p>
            </div>
          </div>
          <h3 style={{ marginTop: '1.5rem', marginBottom: '0.75rem', color: 'var(--primary)' }}>Drei Erklärungsansätze verständlich</h3>
          <div className="cards-grid">
            <div className="card" style={{ animationDelay: '0s' }}>
              <div className="card-icon">📐</div>
              <h3 className="card-title">Absolute Kostenvorteile (Smith)</h3>
              <div className="card-content">
                <p>Jedes Land produziert, was es am effizientesten kann – absolut niedrigere Kosten. Spezialisierung + Tausch steigern den Wohlstand. Problem: Was wenn ein Land in allem besser ist?</p>
              </div>
            </div>
            <div className="card" style={{ animationDelay: '0.08s' }}>
              <div className="card-icon">⚖️</div>
              <h3 className="card-title">Komparative Kostenvorteile (Ricardo)</h3>
              <div className="card-content">
                <p>Handel lohnt auch ohne absolute Vorteile. Entscheidend: Opportunitätskosten (relative Kosten). Spezialisierung auf geringsten relativen Nachteil bringt allen Wohlstandsgewinne.</p>
              </div>
            </div>
            <div className="card" style={{ animationDelay: '0.16s' }}>
              <div className="card-icon">🔄</div>
              <h3 className="card-title">Intraindustrieller Handel</h3>
              <div className="card-content">
                <p>Handel mit ähnlichen Produkten derselben Branche (z. B. DE exportiert + importiert Autos). Gründe: Produktdifferenzierung, Skaleneffekte, Konsumentenpräferenzen.</p>
              </div>
            </div>
          </div>
          <div className="comparison-grid">
            <div className="comparison-card">
              <h3>Smith vs. Ricardo</h3>
              <ul>
                <li><strong>Smith:</strong> Absolute Kostenvorteile – ein Land ist in einem Gut „einfach besser“.</li>
                <li><strong>Ricardo:</strong> Relative Kosten – auch wenn ein Land in allem besser ist, lohnt sich Spezialisierung nach Opportunitätskosten.</li>
              </ul>
            </div>
          </div>
          <div className="aktualitaet-box">
            <div className="aktualitaet-label">Aktualität / Praxisbeispiel (Stand 2026)</div>
            <div className="aktualitaet-title">Deutschland: Intraindustrieller Handel mit Kraftfahrzeugen</div>
            <p>Deutschland exportiert und importiert Pkw in großem Umfang (z. B. VW, BMW, Mercedes – Export; gleichzeitig Import von Konzern- und anderen Marken). Typisch für intraindustriellen Handel: gleiche Branche, unterschiedliche Produktvarianten und Präferenzen.</p>
            <p className="quelle">Vgl. Destatis, Außenhandel Kraftwagen und Kraftwagenteile; Bundesministerium für Wirtschaft.</p>
          </div>
          <table className="glossary-table">
            <thead><tr><th>Begriff</th><th>Definition</th></tr></thead>
            <tbody>
              <tr><td>Opportunitätskosten</td><td>Verzicht auf die nächstbeste Alternative</td></tr>
              <tr><td>Komparative Kostenvorteile</td><td>Spezialisierung auf Güter mit den geringsten Opportunitätskosten</td></tr>
            </tbody>
          </table>
          <PruefungsfragenBlock items={[
              { q: 'Nenne die drei ökonomischen Erklärungsansätze für internationalen Handel.', a: 'Absolute Kostenvorteile (Adam Smith), komparative Kostenvorteile (David Ricardo), intraindustrieller Handel.' },
              { q: 'Wer entwickelte die Theorie der komparativen Kostenvorteile?', a: 'David Ricardo („Principles of Political Economy“, 1817).' },
            ]} />
          <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />
        </div>
      );
    }

    const LEITBILDER_ITEMS = [
      { text: 'Wohlstandsgewinne durch Spezialisierung', correct: 'freihandel-pro' },
      { text: 'Arbeitsplatzverluste in ungeschützten Branchen', correct: 'freihandel-contra' },
      { text: 'Schutz von Arbeitsplätzen', correct: 'protektionismus-pro' },
      { text: 'Höhere Preise für Konsumenten', correct: 'protektionismus-contra' },
      { text: 'Aufbau junger Industrien (infant industry)', correct: 'protektionismus-pro' },
      { text: 'Gefahr von Handelskriegen', correct: 'protektionismus-contra' },
    ];

    function LeitbilderSection({ onVisited, hasNext, nextLabel, onNext, moduleKey }) {
      React.useEffect(() => { onVisited && onVisited('leitbilder'); }, []);
      const [chosen, setChosen] = useState({});
      const [checked, setChecked] = useState(false);
      const goals = [
        'Freihandel und Protektionismus als Leitbilder unterscheiden.',
        'Pro- und Contra-Argumente beiden Positionen zuordnen können.',
        'EU-Mercosur als Beispiel für Spannungen (Wirtschaft vs. Ökologie/Soziales) kennen.'
      ];
      const assign = (index, key) => {
        if (checked) return;
        setChosen(prev => ({ ...prev, [index]: key }));
      };
      const allChosen = LEITBILDER_ITEMS.every((_, i) => chosen[i] != null);
      return (
        <div className="content">
          <div className="curriculum-badge">Kerncurriculum 13.2 · Niedersachsen</div>
          <h2 className="section-title">Leitbilder: Freihandel & Protektionismus</h2>
          <p className="section-intro">
            Zwei Grundpositionen der Außenhandelspolitik – mit Pro- und Contra-Argumenten.
          </p>
          <LearningPathProgress goals={goals} moduleKey={moduleKey} />
          <LearningGoals goals={goals} title="Für die Prüfung (Kerncurriculum 13.2)" />
          <div className="match-game">
            <p style={{ marginBottom: '1rem', fontSize: '0.95rem' }}><strong>Interaktiv:</strong> Ordne jedes Argument dem passenden Leitbild zu (klicke auf eine der vier Kategorien).</p>
            <div className="items">
              {LEITBILDER_ITEMS.map((item, i) => (
                <div key={i} style={{ display: 'flex', flexWrap: 'wrap', gap: '0.25rem', alignItems: 'center', marginBottom: '0.5rem' }}>
                  <span style={{ fontSize: '0.9rem', marginRight: '0.5rem' }}>{item.text}</span>
                  {['freihandel-pro', 'freihandel-contra', 'protektionismus-pro', 'protektionismus-contra'].map(key => (
                    <button
                      key={key}
                      className={'item' + (chosen[i] === key ? ' chosen' : '') + (checked ? (key === item.correct ? ' correct' : (chosen[i] === key && key !== item.correct ? ' wrong' : '')) : '')}
                      onClick={() => assign(i, key)}
                      style={{ padding: '0.35rem 0.6rem', fontSize: '0.8rem' }}
                    >
                      {key.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ')}
                    </button>
                  ))}
                </div>
              ))}
            </div>
            {allChosen && !checked && (
              <button className="primary" onClick={() => setChecked(true)}>Lösung prüfen</button>
            )}
            {checked && (
              <div className="feedback">
                <strong>Hinweis:</strong> Freihandel Pro (z. B. Wohlstand, Effizienz), Freihandel Contra (z. B. Arbeitsplatzverluste, Umwelt). Protektionismus Pro (z. B. Jobs, infant industry), Protektionismus Contra (z. B. höhere Preise, Handelskriege).
              </div>
            )}
          </div>
          <div className="comparison-grid">
            <div className="comparison-card pro">
              <h3>Freihandel</h3>
              <p><strong>Idee:</strong> Minimale staatliche Eingriffe.</p>
              <p><strong>Pro:</strong> Wohlstandsgewinne, niedrigere Preise, Effizienz, größere Produktauswahl, Innovation.</p>
              <p><strong>Contra:</strong> Arbeitsplatzverluste, Ausbeutung, Umweltschäden, Abhängigkeiten, ungleiche Ausgangsbedingungen.</p>
            </div>
            <div className="comparison-card con">
              <h3>Protektionismus</h3>
              <p><strong>Idee:</strong> Schutz der heimischen Wirtschaft.</p>
              <p><strong>Pro:</strong> Schutz von Arbeitsplätzen, Aufbau junger Industrien, nationale Sicherheit, Schutz vor Dumping, strategische Branchen.</p>
              <p><strong>Contra:</strong> Höhere Preise, Ineffizienz, Handelskriege, Wohlstandsverluste, Benachteiligung armer Länder.</p>
            </div>
          </div>
          <div className="aktualitaet-box">
            <div className="aktualitaet-label">Aktualität – Leitbilder in der Praxis (Stand 2026)</div>
            <div className="aktualitaet-title">EU-Mercosur-Freihandelsabkommen</div>
            <p>Partner: EU und Mercosur (Brasilien, Argentinien, Uruguay, Paraguay). Seit Jahren verhandelt; Ratifizierung u. a. an Umwelt- und Sozialfragen gescheitert. <strong>Pro Freihandel:</strong> Neue Märkte, niedrigere Zölle, Wachstum. <strong>Contra / Kritik:</strong> Gefahr für EU-Landwirtschaft, Abholzung Regenwald (Brasilien), Arbeitsstandards. Zeigt die Spannung zwischen wirtschaftlicher Öffnung und ökologischen/sozialen Zielen – typisch für Debatten um Leitbilder.</p>
            <p className="quelle">Vgl. Europäische Kommission (Handel), Mercosur, NGOs (Umwelt, Landwirtschaft).</p>
          </div>
          <PruefungsfragenBlock items={[
              { q: 'Nenne die zwei Leitbilder der Außenhandelspolitik.', a: 'Freihandel und Protektionismus.' },
              { q: 'Nenne drei Gefahren des Protektionismus.', a: 'Höhere Preise für Verbraucher, Handelskriege und Vergeltungsmaßnahmen, Wohlstandsverluste und Ineffizienz.' },
            ]} />
          <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />
        </div>
      );
    }

    const WIRKUNGSSCHRITTE = [
      'Zoll oder Quote wird eingeführt',
      'Importe werden teurer bzw. knapper',
      'Heimische Anbieter profitieren (wettbewerbsfähiger)',
      'Konsumenten zahlen höhere Preise / weniger Auswahl',
    ];

    function HemmnisseSection({ onVisited, hasNext, nextLabel, onNext, moduleKey }) {
      React.useEffect(() => { onVisited && onVisited('hemmnisse'); }, []);
      const [step, setStep] = useState(0);
      const goals = [
        'Tarifäre (Zölle) und nichttarifäre Hemmnisse (Quoten, Normen, Subventionen …) unterscheiden.',
        'Wirkungskette von Zoll/Quote erklären (Import teurer → heimische Anbieter → Konsumenten).',
        'Trump-Zölle als Fallbeispiel für Protektionismus einordnen.'
      ];
      return (
        <div className="content">
          <div className="curriculum-badge">Kerncurriculum 13.2 · Niedersachsen</div>
          <h2 className="section-title">Handelshemmnisse</h2>
          <p className="section-intro">
            Tarifäre und nichttarifäre Instrumente der Handelspolitik – mit Wirkungen und Beispielen.
          </p>
          <LearningPathProgress goals={goals} moduleKey={moduleKey} />
          <LearningGoals goals={goals} title="Für die Prüfung (Kerncurriculum 13.2)" />
          <div className="step-chain-interactive">
            <p style={{ marginBottom: '0.75rem', fontWeight: 600, color: 'var(--primary)' }}>Wirkungskette: Was passiert, wenn ein Zoll oder eine Quote eingeführt wird?</p>
            {WIRKUNGSSCHRITTE.map((s, i) => (
              <div key={i} className={'step' + (i <= step ? ' revealed' : ' hidden')}>
                {i + 1}. {s}
              </div>
            ))}
            {step < WIRKUNGSSCHRITTE.length - 1 && (
              <button onClick={() => setStep(step + 1)}>Nächster Schritt</button>
            )}
            {step === WIRKUNGSSCHRITTE.length - 1 && (
              <button onClick={() => setStep(0)} style={{ marginLeft: '0.5rem' }}>Nochmal anzeigen</button>
            )}
          </div>
          <div className="comparison-grid">
            <div className="card">
              <div className="card-icon">📋</div>
              <h3 className="card-title">Tarifäre Hemmnisse (Zölle)</h3>
              <div className="card-content">
                <p><strong>Wertzoll:</strong> Prozentsatz vom Warenwert. <strong>Mengenzoll:</strong> Fester Betrag pro Einheit.</p>
                <p><strong>Arten:</strong> Schutzzoll, Erziehungszoll, Finanzzoll.</p>
                <p><strong>Wirkungen:</strong> Importe werden teurer → heimische Produkte wettbewerbsfähiger, Staatseinnahmen, höhere Preise für Konsumenten, Gefahr von Vergeltungszöllen.</p>
              </div>
            </div>
            <div className="card">
              <div className="card-icon">🚫</div>
              <h3 className="card-title">Nichttarifäre Hemmnisse</h3>
              <div className="card-content">
                <p><strong>Vier typische Beispiele (für die Prüfung):</strong> (1) Importquoten, (2) technische Normen und Standards, (3) Subventionen für heimische Anbieter, (4) bürokratische Hürden (z. B. Zulassungsverfahren). Weitere: Embargo, „Buy Local“. Schwerer zu messen als Zölle; nehmen oft zu, wenn Zölle abgebaut werden.</p>
              </div>
            </div>
          </div>
          <PruefungsfragenBlock items={[
              { q: 'Nenne vier nichttarifäre Hemmnisse.', a: 'Importquoten, technische Normen/Standards, Subventionen, bürokratische Hürden (alternativ: Embargo, „Buy Local“).' },
            ]} />
          <p style={{ marginTop: '1rem', fontSize: '0.9rem', color: 'var(--text-muted)' }}>Kernkette im Überblick: Zoll/Quote → Import teurer/knapper → Heimische Anbieter profitieren → Konsumenten zahlen mehr.</p>
          <div className="aktualitaet-box">
            <div className="aktualitaet-label">Aktualität – Fallbeispiel Protektionismus (Stand 2026)</div>
            <div className="aktualitaet-title">US-Zölle unter Donald Trump (Präsident 2017–2021, erneut seit 2025) – Stand 2026</div>
            <p>Unter Trump wurden massive Strafzölle eingeführt: auf chinesische Waren (teils 25–50 %), Stahlzölle (25 %) auch gegen Verbündete (EU, Kanada). <strong>Begründung:</strong> Schutz amerikanischer Arbeitsplätze, „America First“, nationale Sicherheit. <strong>Folgen:</strong> Handelskrieg, Vergeltungszölle, höhere Preise für Verbraucher. Auch 2026 bleiben hohe Zölle ein Thema – Zölle als Mittel der Handelspolitik.</p>
            <p className="quelle">Vgl. USTR (United States Trade Representative), EU-Kommission Handel, Medienberichte (z. B. Handelsblatt, FAZ).</p>
          </div>
          <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />
        </div>
      );
    }

    function RegimeSection({ onVisited, hasNext, nextLabel, onNext, moduleKey }) {
      React.useEffect(() => { onVisited && onVisited('regime'); }, []);
      const goals = [
        'Ziele und Grundprinzipien der WTO nennen (Meistbegünstigung, Inländerbehandlung, Reziprozität, Transparenz).',
        'WTO-Krise (blockierte Streitschlichtung, Doha, Protektionismus) erklären.',
        'Arten von Handelsabkommen unterscheiden (multilateral, regional, bilateral) und Beispiele nennen.'
      ];
      return (
        <div className="content">
          <div className="curriculum-badge">Kerncurriculum 13.2 · Niedersachsen</div>
          <h2 className="section-title">Handelsregime & WTO</h2>
          <p className="section-intro">
            Die WTO und internationale Handelsabkommen bilden das Regelwerk des Welthandels.
          </p>
          <LearningPathProgress goals={goals} moduleKey={moduleKey} />
          <LearningGoals goals={goals} title="Für die Prüfung (Kerncurriculum 13.2)" />
          <h3 className="section-heading-interactive">Wichtige Akteure – WTO & EU-Handel</h3>
          <div className="person-cards">
            <div className="person-card">
              <div className="person-name">Ngozi Okonjo-Iweala</div>
              <div className="person-meta">WTO-Generaldirektorin seit März 2021 (erste Frau und erste Afrikanerin in diesem Amt, Stand 2026)</div>
              <p className="person-idea">Leitet die WTO in einer Phase der Krise: blockierte Streitschlichtung, Protektionismus, Reformdebatten. Vorher u. a. nigerianische Finanzministerin, Weltbank.</p>
            </div>
            <div className="person-card">
              <div className="person-name">Ursula von der Leyen</div>
              <div className="person-meta">Präsidentin der Europäischen Kommission seit Dezember 2019 (CDU, Stand 2026)</div>
              <p className="person-idea">Leitet die EU-Kommission und damit u. a. die EU-Handelspolitik (Freihandelsabkommen wie EU-Mercosur, CETA). Steht für die Spannung zwischen Freihandel, Klima- und Sozialstandards in der Handelspolitik.</p>
            </div>
          </div>
          <div className="card">
            <div className="card-icon">🌐</div>
            <h3 className="card-title">WTO (World Trade Organization)</h3>
            <div className="card-content">
              <p>Gründung 1995 (Nachfolger GATT 1947), 164 Mitglieder (Stand 2026). <strong>Ziele:</strong> Liberalisierung, Abbau von Hemmnissen, regelbasierter Handel, Streitschlichtung. <strong>Prinzipien:</strong> Meistbegünstigung, Inländerbehandlung, Transparenz, Reziprozität.</p>
              <p><strong>WTO in der Krise:</strong> Die USA blockieren seit 2019 die Besetzung der Berufungsinstanz (Appellate Body) – Streitschlichtung ist damit eingeschränkt (Stand 2026). Doha-Runde gescheitert, zunehmender Protektionismus; neue Themen (Digitales, Klima, Arbeitsnormen) sind in der WTO kaum geregelt.</p>
            </div>
          </div>
          <h3 style={{ marginTop: '1.5rem', marginBottom: '0.75rem', color: 'var(--primary)' }}>Arten von Handelsabkommen</h3>
          <ul>
            <li><strong>Multilateral:</strong> Viele Staaten (z. B. WTO)</li>
            <li><strong>Regional:</strong> Benachbarte Länder (EU, ASEAN, Mercosur)</li>
            <li><strong>Bilateral:</strong> Zwei Staaten/Blöcke (z. B. EU-Japan, CETA)</li>
          </ul>
          <p><strong>Beispiele:</strong> CETA (EU-Kanada), RCEP (Asien-Pazifik), USMCA (USA-Mexiko-Kanada), AfCFTA (Afrika).</p>
          <div className="aktualitaet-box">
            <div className="aktualitaet-label">Aktualität (Stand 2026)</div>
            <div className="aktualitaet-title">CETA (EU-Kanada) & WTO-Krise</div>
            <p><strong>CETA</strong> (Comprehensive Economic and Trade Agreement) ist seit 2017 vorläufig in Kraft – ein wichtiges bilaterales Freihandelsabkommen der EU. <strong>WTO:</strong> Seit 2019 blockieren die USA die Berufungsinstanz; die Blockade besteht weiter (Stand 2026). Reformdebatten laufen (u. a. unter Generaldirektorin Okonjo-Iweala).</p>
            <p className="quelle">Vgl. Europäische Kommission (Handel), WTO (wto.org).</p>
          </div>
          <table className="glossary-table">
            <thead><tr><th>Begriff</th><th>Definition</th></tr></thead>
            <tbody>
              <tr><td>Meistbegünstigung</td><td>Handelserleichterungen für alle WTO-Mitglieder gleich</td></tr>
              <tr><td>Inländerbehandlung</td><td>Gleichbehandlung in- und ausländischer Waren</td></tr>
              <tr><td>Reziprozität</td><td>Gegenseitigkeit beim Abbau von Hemmnissen</td></tr>
            </tbody>
          </table>
          <PruefungsfragenBlock items={[
              { q: 'Nenne die vier Mercosur-Staaten.', a: 'Brasilien, Argentinien, Uruguay, Paraguay.' },
              { q: 'Nenne drei Kritikpunkte am EU-Mercosur-Abkommen.', a: 'Gefahr für EU-Landwirtschaft; Abholzung Regenwald / Umweltzerstörung (z. B. Brasilien); niedrige Arbeits- und Umweltstandards in Mercosur-Ländern.' },
              { q: 'Nenne drei Prinzipien der WTO.', a: 'Meistbegünstigung, Inländerbehandlung, Reziprozität (bzw. Transparenz).' },
            ]} />
          <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />
        </div>
      );
    }

    function FlashcardsSection({ onVisited, hasNext, nextLabel, onNext }) {
      React.useEffect(() => { onVisited && onVisited('flashcards'); }, []);
      const [index, setIndex] = useState(0);
      const [flipped, setFlipped] = useState(false);
      const [shuffled, setShuffled] = useState(FLASHCARD_TERMS.map((_, i) => i));
      const terms = shuffled.map(i => FLASHCARD_TERMS[i]);
      const current = terms[index];
      const next = () => { setFlipped(false); setIndex((index + 1) % terms.length); };
      const prev = () => { setFlipped(false); setIndex((index - 1 + terms.length) % terms.length); };
      const shuffle = () => {
        const arr = [...shuffled].sort(() => Math.random() - 0.5);
        setShuffled(arr);
        setIndex(0);
        setFlipped(false);
      };
      return (
        <div className="content">
          <div className="curriculum-badge">Kerncurriculum 13.2 · Niedersachsen</div>
          <h2 className="section-title">Karteikarten</h2>
          <p className="section-intro">
            Klicke auf die Karte, um die Definition zu sehen. Nutze die Pfeile für die nächste/vorherige Karte oder „Zufall“, um die Reihenfolge zu mischen.
          </p>
          <div className="flashcard-wrap">
            <div className={'flashcard' + (flipped ? ' flipped' : '')} onClick={() => setFlipped(!flipped)}>
              <div className="flashcard-face">
                <span className="term">{current.term}</span>
              </div>
              <div className="flashcard-face flashcard-back">
                <span className="def">{current.def}</span>
              </div>
            </div>
            <div className="flashcard-nav">
              <button onClick={prev}>← Zurück</button>
              <span style={{ fontSize: '0.9rem', color: 'var(--text-muted)' }}>{index + 1} / {terms.length}</span>
              <button onClick={next}>Weiter →</button>
              <button className="primary" onClick={shuffle}>Zufall</button>
            </div>
          </div>
          <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />
        </div>
      );
    }

    const QUIZ_TOPIC_TO_MODULE = {
      'Erklärungsansätze': { courseId: '13-2', moduleId: 'theories' },
      'Handelshemmnisse': { courseId: '13-2', moduleId: 'hemmnisse' },
      'Handelsregime': { courseId: '13-2', moduleId: 'regime' },
      'Leitbilder': { courseId: '13-2', moduleId: 'leitbilder' },
      'Globalisierung': { courseId: '13-2', moduleId: 'global' },
      'Partizipation': { courseId: '12-1', moduleId: 'partizipation-formen' },
      'Verfassungsorgane': { courseId: '12-1', moduleId: 'verfassungsorgane' },
      'Politische Akteure': { courseId: '12-1', moduleId: 'politische-akteure' },
      'Demokratietheorien': { courseId: '12-1', moduleId: 'demokratietheorien' },
      'Ungleichheit': { courseId: '12-2', moduleId: 'ungleichheit' },
      'Prinzipien': { courseId: '12-2', moduleId: 'prinzipien' },
      'Markt und Staat': { courseId: '12-2', moduleId: 'markt-staat' },
      'Wirtschaftspolitik': { courseId: '12-2', moduleId: 'wirtschaftspolitik' },
      'Konflikte': { courseId: '13-1', moduleId: 'konflikte-kriege' },
      'Terrorismus': { courseId: '13-1', moduleId: 'terrorismus' },
      'Sicherheitspolitik': { courseId: '13-1', moduleId: 'sicherheitspolitik' },
    };

    const QUIZ_12_1 = [
      { topic: 'Partizipation', question: 'Welche Form der Partizipation ist konventionell?', options: ['Demonstration', 'Wählen gehen', 'Besetzung', 'Boykott'], correct: 1, explanation: 'Wahlen sind die klassische konventionelle Partizipationsform. Demonstrationen, Besetzungen und Boykotte gelten als unkonventionell.' },
      { topic: 'Verfassungsorgane', question: 'Wer wählt den/die Bundeskanzler:in?', options: ['Das Volk direkt', 'Der Bundesrat', 'Der Bundestag', 'Die Bundesversammlung'], correct: 2, explanation: 'Der Bundestag wählt den/die Bundeskanzler:in auf Vorschlag des Bundespräsidenten.' },
      { topic: 'Verfassungsorgane', question: 'Wo hat das Bundesverfassungsgericht seinen Sitz?', options: ['Berlin', 'Frankfurt', 'Karlsruhe', 'Leipzig'], correct: 2, explanation: 'Das BVerfG sitzt in Karlsruhe und ist Hüter der Verfassung.' },
      { topic: 'Politische Akteure', question: 'Welche Funktion haben Parteien NICHT im politischen System?', options: ['Interessenartikulation', 'Personalrekrutierung', 'Gesetzliche Normenkontrolle', 'Programmformulierung'], correct: 2, explanation: 'Normenkontrolle ist Aufgabe des Bundesverfassungsgerichts, nicht der Parteien. Parteien artikulieren Interessen, rekrutieren Personal und formulieren Programme.' },
      { topic: 'Demokratietheorien', question: 'John Stuart Mill steht für welche Demokratietheorie?', options: ['Plebiszitäre Demokratie', 'Rätedemokratie', 'Repräsentative Demokratie', 'Direkte Demokratie'], correct: 2, explanation: 'Mill ist der klassische Vertreter der repräsentativen Demokratie mit kompetenten Abgeordneten und Minderheitenschutz.' },
      { topic: 'Verfassungsorgane', question: 'Was bedeutet der Parlamentsvorbehalt?', options: ['Das Parlament darf keine Gesetze machen.', 'Bundeswehreinsätze brauchen Zustimmung des Bundestags.', 'Der Bundespräsident kann das Parlament auflösen.', 'Nur der Bundesrat kann Kriege erklären.'], correct: 1, explanation: 'Parlamentsvorbehalt: Jeder bewaffnete Einsatz der Bundeswehr bedarf der Zustimmung des Bundestags.' },
      { topic: 'Partizipation', question: 'Was ist eine Bürgerinitiative?', options: ['Eine Partei auf Kommunalebene', 'Ein loser Zusammenschluss zur Durchsetzung eines bestimmten Anliegens', 'Ein gesetzlich festgelegtes Abstimmungsverfahren', 'Ein Verfassungsorgan'], correct: 1, explanation: 'Bürgerinitiativen sind informelle Zusammenschlüsse, die sich für ein konkretes Anliegen einsetzen – im Gegensatz zu Parteien ohne dauerhafte Organisation.' },
      { topic: 'Demokratietheorien', question: 'Jean-Jacques Rousseau wird oft als Bezugspunkt gelesen für …', options: ['Die repräsentative Demokratie', 'Plebiszitäre/partizipative Demokratie', 'Die Monarchie', 'Den Wirtschaftsliberalismus'], correct: 1, explanation: 'Rousseaus Idee des Gemeinwillens (volonté générale) und der Volkssouveränität wird als Bezug für direkte/partizipative Demokratietheorien gelesen.' },
    ];

    const QUIZ_12_2 = [
      { topic: 'Prinzipien', question: 'Wer prägte den Begriff „Soziale Marktwirtschaft"?', options: ['Ludwig Erhard', 'Adam Smith', 'Alfred Müller-Armack', 'John M. Keynes'], correct: 2, explanation: 'Alfred Müller-Armack prägte 1946/47 den Begriff. Ludwig Erhard setzte die Konzeption in der Praxis um.' },
      { topic: 'Wirtschaftspolitik', question: 'Was gehört NICHT zum magischen Sechseck?', options: ['Vollbeschäftigung', 'Preisniveaustabilität', 'Maximale Staatsverschuldung', 'Umweltverträgliches Wirtschaften'], correct: 2, explanation: 'Die sechs Ziele sind: Wachstum, Vollbeschäftigung, Preisniveaustabilität, außenwirtschaftliches Gleichgewicht, gerechte Verteilung, umweltverträgliches Wirtschaften.' },
      { topic: 'Markt und Staat', question: 'Was ist ein öffentliches Gut?', options: ['Nur Güter, die der Staat produziert', 'Güter, die nicht rival und nicht ausschließbar sind', 'Alle Güter, die Steuern finanzieren', 'Güter, die teurer als 1000 € sind'], correct: 1, explanation: 'Öffentliche Güter sind nicht rival (Nutzung durch eine Person schließt andere nicht aus) und nicht ausschließbar – z. B. Landesverteidigung, saubere Luft.' },
      { topic: 'Ungleichheit', question: 'Was misst der Gini-Koeffizient?', options: ['Die Inflationsrate', 'Die Ungleichheit einer Verteilung', 'Das Bruttoinlandsprodukt', 'Die Arbeitslosenquote'], correct: 1, explanation: 'Gini-Koeffizient: 0 = alle haben gleich viel, 1 = eine Person hat alles. Maß für Einkommens- oder Vermögensungleichheit.' },
      { topic: 'Prinzipien', question: 'Was besagt das Haftungsprinzip?', options: ['Der Staat haftet für alle Verluste.', 'Wer entscheidet, haftet für die Folgen.', 'Banken dürfen nie gerettet werden.', 'Unternehmen dürfen keine Schulden machen.'], correct: 1, explanation: 'Haftungsprinzip: Wer wirtschaftliche Entscheidungen trifft, muss für die Konsequenzen einstehen – verhindert Abwälzung von Risiken.' },
      { topic: 'Wirtschaftspolitik', question: 'John Maynard Keynes steht für …', options: ['Angebotsorientierte Wirtschaftspolitik', 'Nachfrageorientierte Konjunkturpolitik', 'Vollständige Deregulierung', 'Die Abschaffung von Steuern'], correct: 1, explanation: 'Keynes: In Krisen soll der Staat durch Nachfrage (Staatsausgaben, Investitionen) die Wirtschaft stützen – Keynesianismus.' },
      { topic: 'Wirtschaftspolitik', question: 'Wer ist für Preisniveaustabilität im Euroraum zuständig?', options: ['Der Bundestag', 'Die Bundesregierung', 'Die EZB (Christine Lagarde)', 'Das BVerfG'], correct: 2, explanation: 'Die Europäische Zentralbank unter Präsidentin Christine Lagarde hat das Hauptziel der Preisniveaustabilität (Inflation nahe 2 %).' },
      { topic: 'Markt und Staat', question: 'Was macht das Bundeskartellamt?', options: ['Sozialversicherung verwalten', 'Wettbewerb sichern (Kartellverbot, Fusionskontrolle)', 'Steuern erheben', 'Öffentliche Güter bereitstellen'], correct: 1, explanation: 'Das Bundeskartellamt sorgt für Wettbewerb: Kartellverbot, Fusionskontrolle, Missbrauchsaufsicht – damit Marktmacht begrenzt bleibt.' },
    ];

    const QUIZ_13_1 = [
      { topic: 'Konflikte', question: 'Welches Merkmal trifft auf „neue Kriege" zu?', options: ['Klare Fronten zwischen regulären Armeen', 'Formale Kriegserklärung', 'Ökonomisierung, Milizen, Gewalt gegen Zivilisten', 'Nur Staat gegen Staat'], correct: 2, explanation: 'Neue Kriege: Privatisierung der Gewalt (Milizen, Söldner), Ökonomisierung (Krieg als Geschäft), Entrechtlichung (Gewalt gegen Zivilisten).' },
      { topic: 'Sicherheitspolitik', question: 'Was besagt Art. 5 des NATO-Vertrags?', options: ['Die NATO muss Entwicklungshilfe leisten.', 'Angriff auf einen = Angriff auf alle (Bündnisfall).', 'Alle Mitglieder müssen 2 % des BIP für Verteidigung ausgeben.', 'Die NATO darf keine Auslandseinsätze durchführen.'], correct: 1, explanation: 'Art. 5 NATO-Vertrag: Kollektive Verteidigung – ein Angriff auf ein Mitglied wird als Angriff auf alle betrachtet.' },
      { topic: 'Terrorismus', question: 'Was unterscheidet Terrorismus von „normaler" Kriminalität?', options: ['Terrorismus ist immer religiös motiviert.', 'Terroristen handeln allein.', 'Terrorismus zielt auf politische Wirkung durch Angst und Schrecken.', 'Terrorismus ist legal.'], correct: 2, explanation: 'Terrorismus: Gewaltakte mit politischer Zielsetzung, die durch Angst und Schrecken eine Wirkung über die unmittelbaren Opfer hinaus erzielen sollen.' },
      { topic: 'Sicherheitspolitik', question: 'Wer ist NATO-Generalsekretär (Stand 2026)?', options: ['Jens Stoltenberg', 'Mark Rutte', 'Olaf Scholz', 'Ursula von der Leyen'], correct: 1, explanation: 'Mark Rutte ist seit Oktober 2024 NATO-Generalsekretär. Sein Vorgänger war Jens Stoltenberg (2014–2024).' },
      { topic: 'Sicherheitspolitik', question: 'Was bedeutet „Zeitenwende"?', options: ['Der Übergang vom Mittelalter zur Neuzeit', 'Die neue Sicherheitslage nach Russlands Angriff auf die Ukraine (Scholz, 27.2.2022)', 'Ein wirtschaftspolitisches Konzept von Keynes', 'Die Einführung des Euro'], correct: 1, explanation: 'Olaf Scholz prägte den Begriff „Zeitenwende" am 27.2.2022 – neue Sicherheitslage, mehr Verteidigungsausgaben, Stärkung der Bundeswehr.' },
      { topic: 'Konflikte', question: 'Was ist ein innerstaatlicher Konflikt?', options: ['Konflikt zwischen zwei souveränen Staaten', 'Konflikt innerhalb eines Staates (z. B. Bürgerkrieg)', 'Ein Handelskrieg zwischen Wirtschaftsblöcken', 'Ein Streit im Bundestag'], correct: 1, explanation: 'Innerstaatliche Konflikte spielen sich innerhalb eines Landes ab – z. B. Bürgerkriege, ethnische Konflikte, Kämpfe um Ressourcen.' },
      { topic: 'Sicherheitspolitik', question: 'Was ist GASP?', options: ['Grundgesetz-Ausführungs-Sicherheits-Protokoll', 'Gemeinsame Außen- und Sicherheitspolitik der EU', 'General Agreement on Security Policy', 'Geheimdienstliche Analyse Strategischer Planungen'], correct: 1, explanation: 'GASP = Gemeinsame Außen- und Sicherheitspolitik der EU. Daneben gibt es die GSVP (Gemeinsame Sicherheits- und Verteidigungspolitik).' },
      { topic: 'Terrorismus', question: 'Welche Maßnahme gegen Terrorismus ist umstritten?', options: ['Internationale Polizeikooperation', 'Massenüberwachung von Bürger:innen', 'Diplomatische Verhandlungen', 'Förderung von Bildung'], correct: 1, explanation: 'Massenüberwachung kann Sicherheit stärken, schränkt aber Grundrechte (Datenschutz, Privatsphäre) ein – ein klassischer Zielkonflikt zwischen Freiheit und Sicherheit.' },
    ];

    const QUIZ_QUESTIONS = [
      { topic: 'Erklärungsansätze',
        question: 'Was beschreiben komparative Kostenvorteile (Ricardo)?',
        options: [
          'Spezialisierung nach relativen Kosten (Opportunitätskosten) – Handel lohnt auch ohne absolute Vorteile.',
          'Nur Länder mit absoluten Kostenvorteilen sollten handeln.',
          'Handel nur innerhalb derselben Branche.',
          'Zölle sind nötig, damit sich Spezialisierung lohnt.'
        ],
        correct: 0,
        explanation: 'Ricardo zeigt: Entscheidend sind relative Kosten. Ein Land spezialisiert sich auf das Gut, bei dem es den geringsten relativen Nachteil hat – so entstehen Wohlstandsgewinne für alle.'
      },
      { topic: 'Handelshemmnisse',
        question: 'Welches Instrument ist ein nichttarifäres Handelshemmnis?',
        options: ['Wertzoll', 'Mengenzoll', 'Importquote', 'Finanzzoll'],
        correct: 2,
        explanation: 'Eine Importquote begrenzt die Menge der Einfuhren und ist damit ein nichttarifäres Hemmnis. Zölle (Wert- und Mengenzoll, Finanzzoll) sind tarifär.'
      },
      { topic: 'Handelsregime',
        question: 'Was bedeutet das WTO-Prinzip der Meistbegünstigung?',
        options: [
          'Die reichsten Länder werden bevorzugt.',
          'Handelserleichterungen, die einem Land gewährt werden, gelten für alle Mitglieder gleich.',
          'Nur die wichtigsten Handelspartner werden begünstigt.',
          'Zölle müssen für alle Waren gleich sein.'
        ],
        correct: 1,
        explanation: 'Meistbegünstigung: Jede Handelserleichterung, die ein Mitglied einem anderen gewährt, muss allen WTO-Mitgliedern gewährt werden – keine Diskriminierung.'
      },
      { topic: 'Erklärungsansätze',
        question: 'Intraindustrieller Handel liegt vor, wenn …',
        options: [
          'nur Rohstoffe gehandelt werden.',
          'ein Land nur exportiert und nicht importiert.',
          'ähnliche Produkte derselben Branche gehandelt werden (z. B. Autos in beide Richtungen).',
          'nur Dienstleistungen gehandelt werden.'
        ],
        correct: 2,
        explanation: 'Intraindustrieller Handel = Handel mit ähnlichen Produkten derselben Branche, z. B. Deutschland exportiert und importiert Pkw (verschiedene Marken/Segmente).'
      },
      { topic: 'Leitbilder',
        question: 'Welche Aussage zum Protektionismus trifft zu?',
        options: [
          'Er senkt immer die Preise für Konsumenten.',
          'Er kann Arbeitsplätze schützen, führt aber oft zu höheren Preisen und Wohlstandsverlusten.',
          'Er wird von der WTO ausnahmslos verboten.',
          'Er hat keine Auswirkung auf andere Länder.'
        ],
        correct: 1,
        explanation: 'Protektionismus kann heimische Jobs schützen, geht aber mit höheren Preisen, ineffizienter Produktion und der Gefahr von Handelskriegen einher.'
      },
      { topic: 'Globalisierung',
        question: 'FDI (Foreign Direct Investment) bezeichnet …',
        options: [
          'kurzfristige Spekulation an Devisenmärkten.',
          'langfristige Auslandsinvestitionen mit Kontrolle (mind. 10 % Beteiligung).',
          'staatliche Entwicklungshilfe.',
          'Handelskredite zwischen Unternehmen.'
        ],
        correct: 1,
        explanation: 'FDI = langfristige Direktinvestitionen im Ausland mit Kontrolle über das Unternehmen (typisch mind. 10 % Stimmrechte).'
      },
      { topic: 'Handelsregime',
        question: 'Warum gilt die WTO derzeit als „in der Krise“?',
        options: [
          'Sie hat zu viele Mitglieder.',
          'Die Streitschlichtung ist blockiert (USA blockieren Berufungsinstanz), Doha-Runde gescheitert, Protektionismus nimmt zu.',
          'Sie verbietet alle Zölle.',
          'Sie wird von der EU geleitet.'
        ],
        correct: 1,
        explanation: 'Seit 2019 blockieren die USA die Besetzung der Berufungsinstanz; die Doha-Runde brachte keine neue Liberalisierung; Protektionismus und neue Themen (Digitales, Klima) belasten die Organisation.'
      },
      { topic: 'Handelshemmnisse',
        question: 'Ein Erziehungszoll dient typischerweise …',
        options: [
          'nur der Staatseinnahme.',
          'dem Aufbau junger Industrien („infant industry“) durch zeitweiligen Schutz.',
          'der dauerhaften Abschottung aller Branchen.',
          'der Subventionierung von Exporteuren.'
        ],
        correct: 1,
        explanation: 'Erziehungszoll: zeitweiliger Schutz junger heimischer Industrien, bis sie international wettbewerbsfähig sind („infant industry“-Argument).'
      }
    ];

    function Lernplakat132({ hasNext, nextLabel, onNext, onNavigateToModule }) {
      const [expanded, setExpanded] = useState(null);
      const toggle = (id) => setExpanded(prev => prev === id ? null : id);
      return (
        <div className="content" style={{ maxWidth: '1100px' }}>
          <div className="lernplakat">
            <div className="lernplakat-hero">
              <div className="lernplakat-hero-inner">
                <div className="lp-badge">Kerncurriculum 13.2 · Niedersachsen · Abitur</div>
                <h2>Weltwirtschaftliche<br/><span>Verflechtungen</span></h2>
                <p className="lp-sub">
                  Alle prüfungsrelevanten Themen auf einen Blick – Globalisierung, Handelstheorien, Leitbilder, Hemmnisse und das internationale Handelsregime.
                </p>
                <div className="lp-stats">
                  <div className="lp-stat"><span className="lp-stat-num">5</span><span className="lp-stat-label">Themenfelder</span></div>
                  <div className="lp-stat"><span className="lp-stat-num">4</span><span className="lp-stat-label">WTO-Prinzipien</span></div>
                  <div className="lp-stat"><span className="lp-stat-num">3</span><span className="lp-stat-label">Handelstheorien</span></div>
                  <div className="lp-stat"><span className="lp-stat-num">2</span><span className="lp-stat-label">Leitbilder</span></div>
                </div>
              </div>
            </div>

            <div className="lp-grid">

              {/* 1 – Globalisierung */}
              <div className="lp-tile" data-color="blue">
                <div className="lp-tile-header">
                  <div className="lp-tile-icon">🌍</div>
                  <div>
                    <div className="lp-tile-title">Ökonomische Globalisierung</div>
                    <div className="lp-tile-subtitle">Merkmale und Indikatoren</div>
                  </div>
                </div>
                <div className="lp-tile-body">
                  <div style={{marginBottom:'0.5rem'}}>
                    <span className="lp-tile-tag">Welthandel</span>
                    <span className="lp-tile-tag">FDI</span>
                    <span className="lp-tile-tag">MNU</span>
                    <span className="lp-tile-tag">Handelsströme</span>
                  </div>
                  <ul>
                    <li><strong>Welthandelsvolumen</strong> – wächst stärker als die Weltwirtschaft</li>
                    <li><strong>Welthandelsströme</strong> – EU↔China, EU↔USA, Asien↔Europa</li>
                    <li><strong>FDI</strong> (Foreign Direct Investment) – langfristige Auslandsinvestition, mind. 10 % Beteiligung</li>
                    <li><strong>Multinationale Konzerne</strong> – Produktion in mehreren Ländern, prägen Handelsströme</li>
                  </ul>
                  {expanded === 'glob' && (
                    <div style={{marginTop:'0.5rem', padding:'0.65rem', background:'rgba(59,130,246,0.06)', borderRadius:'10px', fontSize:'0.82rem', lineHeight:'1.55'}}>
                      <strong>Aktualität 2026:</strong> Pandemie und Lieferkettenkrisen (2020–22) sowie geopolitische Spannungen (USA–China, Ukraine-Krieg) haben Abhängigkeiten und Verflechtungen stärker sichtbar gemacht. FDI und Welthandel bleiben zentrale Indikatoren.
                    </div>
                  )}
                  <button onClick={() => toggle('glob')} style={{marginTop:'0.5rem', fontSize:'0.78rem', color:'#2563eb', background:'none', border:'none', cursor:'pointer', fontFamily:'inherit', fontWeight:600}}>
                    {expanded === 'glob' ? '▲ weniger' : '▼ Aktualität 2026'}
                  </button>
                </div>
              </div>

              {/* 2 – Erklärungsansätze */}
              <div className="lp-tile" data-color="green">
                <div className="lp-tile-header">
                  <div className="lp-tile-icon">📊</div>
                  <div>
                    <div className="lp-tile-title">Erklärungsansätze</div>
                    <div className="lp-tile-subtitle">Warum handeln Länder?</div>
                  </div>
                </div>
                <div className="lp-tile-body">
                  <div style={{marginBottom:'0.5rem'}}>
                    <span className="lp-tile-tag">Smith</span>
                    <span className="lp-tile-tag">Ricardo</span>
                    <span className="lp-tile-tag">Intraindustriell</span>
                  </div>
                  <ul>
                    <li><strong>Absolute Kostenvorteile</strong> (Smith) – Jedes Land produziert, was es am effizientesten kann</li>
                    <li><strong>Komparative Kostenvorteile</strong> (Ricardo) – Entscheidend: Opportunitätskosten (relative Kosten), Handel lohnt auch ohne absolute Vorteile</li>
                    <li><strong>Intraindustrieller Handel</strong> – Gleiche Branche, verschiedene Produkte (z. B. DE exportiert + importiert Autos)</li>
                  </ul>
                  {expanded === 'theo' && (
                    <div style={{marginTop:'0.5rem', padding:'0.65rem', background:'rgba(16,185,129,0.06)', borderRadius:'10px', fontSize:'0.82rem', lineHeight:'1.55'}}>
                      <strong>Merke:</strong> Smith sagt: „Wer's am besten kann, macht's." Ricardo sagt: „Auch der Schlechtere soll sich spezialisieren – auf das, was relativ am wenigsten schlecht ist." Beide zeigen: Spezialisierung + Handel = Wohlstand für alle.
                    </div>
                  )}
                  <button onClick={() => toggle('theo')} style={{marginTop:'0.5rem', fontSize:'0.78rem', color:'#059669', background:'none', border:'none', cursor:'pointer', fontFamily:'inherit', fontWeight:600}}>
                    {expanded === 'theo' ? '▲ weniger' : '▼ Merkhilfe'}
                  </button>
                </div>
                <div className="lp-tile-persons">
                  <div className="lp-person"><div className="lp-person-avatar">AS</div><div className="lp-person-info"><strong>Adam Smith</strong><span>1723–1790 · Absolute Kostenvorteile</span></div></div>
                  <div className="lp-person"><div className="lp-person-avatar">DR</div><div className="lp-person-info"><strong>David Ricardo</strong><span>1772–1823 · Komparative Kostenvorteile</span></div></div>
                </div>
              </div>

              {/* 3 – Leitbilder */}
              <div className="lp-tile" data-color="orange">
                <div className="lp-tile-header">
                  <div className="lp-tile-icon">⚖️</div>
                  <div>
                    <div className="lp-tile-title">Leitbilder</div>
                    <div className="lp-tile-subtitle">Freihandel vs. Protektionismus</div>
                  </div>
                </div>
                <div className="lp-tile-body">
                  <div style={{display:'grid', gridTemplateColumns:'1fr 1fr', gap:'0.5rem', marginBottom:'0.5rem'}}>
                    <div style={{padding:'0.6rem', borderRadius:'10px', background:'rgba(16,185,129,0.06)', border:'1px solid rgba(16,185,129,0.12)'}}>
                      <strong style={{fontSize:'0.82rem', color:'#059669', display:'block', marginBottom:'0.2rem'}}>Freihandel</strong>
                      <span style={{fontSize:'0.78rem', color:'var(--text-muted)'}}>+ Wohlstand, Effizienz, niedrige Preise<br/>− Arbeitsplatzverluste, Abhängigkeiten</span>
                    </div>
                    <div style={{padding:'0.6rem', borderRadius:'10px', background:'rgba(239,68,68,0.05)', border:'1px solid rgba(239,68,68,0.12)'}}>
                      <strong style={{fontSize:'0.82rem', color:'#dc2626', display:'block', marginBottom:'0.2rem'}}>Protektionismus</strong>
                      <span style={{fontSize:'0.78rem', color:'var(--text-muted)'}}>+ Schutz von Jobs, infant industry<br/>− Höhere Preise, Handelskriege</span>
                    </div>
                  </div>
                  {expanded === 'leit' && (
                    <div style={{marginTop:'0.5rem', padding:'0.65rem', background:'rgba(245,158,11,0.06)', borderRadius:'10px', fontSize:'0.82rem', lineHeight:'1.55'}}>
                      <strong>Fallbeispiel EU-Mercosur:</strong> EU ↔ Brasilien, Argentinien, Uruguay, Paraguay. Pro: neue Märkte, niedrigere Zölle. Contra: Gefahr für EU-Landwirtschaft, Abholzung Regenwald, niedrige Arbeitsstandards. Zeigt Spannung zwischen Wirtschaft und Ökologie/Sozialem.
                    </div>
                  )}
                  <button onClick={() => toggle('leit')} style={{marginTop:'0.5rem', fontSize:'0.78rem', color:'#d97706', background:'none', border:'none', cursor:'pointer', fontFamily:'inherit', fontWeight:600}}>
                    {expanded === 'leit' ? '▲ weniger' : '▼ Fallbeispiel EU-Mercosur'}
                  </button>
                </div>
              </div>

              {/* 4 – Handelshemmnisse */}
              <div className="lp-tile" data-color="red">
                <div className="lp-tile-header">
                  <div className="lp-tile-icon">🚧</div>
                  <div>
                    <div className="lp-tile-title">Handelshemmnisse</div>
                    <div className="lp-tile-subtitle">Tarifär & nichttarifär</div>
                  </div>
                </div>
                <div className="lp-tile-body">
                  <div style={{marginBottom:'0.5rem'}}>
                    <span className="lp-tile-tag">Zölle</span>
                    <span className="lp-tile-tag">Quoten</span>
                    <span className="lp-tile-tag">Normen</span>
                    <span className="lp-tile-tag">Subventionen</span>
                  </div>
                  <div style={{display:'grid', gridTemplateColumns:'1fr 1fr', gap:'0.5rem', marginBottom:'0.5rem'}}>
                    <div style={{padding:'0.5rem', borderRadius:'8px', background:'rgba(239,68,68,0.04)', fontSize:'0.82rem'}}>
                      <strong style={{display:'block', marginBottom:'0.15rem'}}>Tarifär (Zölle)</strong>
                      Wertzoll, Mengenzoll<br/>Schutzzoll, Erziehungszoll, Finanzzoll
                    </div>
                    <div style={{padding:'0.5rem', borderRadius:'8px', background:'rgba(239,68,68,0.04)', fontSize:'0.82rem'}}>
                      <strong style={{display:'block', marginBottom:'0.15rem'}}>Nichttarifär</strong>
                      Importquoten, tech. Normen, Subventionen, Bürokratie
                    </div>
                  </div>
                  <strong style={{fontSize:'0.82rem', display:'block', marginBottom:'0.25rem'}}>Wirkungskette:</strong>
                  <div className="lp-wirkungskette">
                    <span className="lp-wk-step">Zoll/Quote</span>
                    <span className="lp-wk-arrow">→</span>
                    <span className="lp-wk-step">Import teurer</span>
                    <span className="lp-wk-arrow">→</span>
                    <span className="lp-wk-step">Heimische profitieren</span>
                    <span className="lp-wk-arrow">→</span>
                    <span className="lp-wk-step">Konsumenten zahlen mehr</span>
                  </div>
                  {expanded === 'hemm' && (
                    <div style={{marginTop:'0.5rem', padding:'0.65rem', background:'rgba(239,68,68,0.05)', borderRadius:'10px', fontSize:'0.82rem', lineHeight:'1.55'}}>
                      <strong>Trump-Zölle (Stand 2026):</strong> Massive Strafzölle auf chinesische Waren (25–50 %), Stahlzölle (25 %) auch gegen EU. Begründung: „America First", Schutz von Jobs. Folgen: Handelskrieg, Vergeltungszölle, höhere Preise.
                    </div>
                  )}
                  <button onClick={() => toggle('hemm')} style={{marginTop:'0.5rem', fontSize:'0.78rem', color:'#dc2626', background:'none', border:'none', cursor:'pointer', fontFamily:'inherit', fontWeight:600}}>
                    {expanded === 'hemm' ? '▲ weniger' : '▼ Trump-Zölle 2026'}
                  </button>
                </div>
              </div>

              {/* 5 – Handelsregime (volle Breite) */}
              <div className="lp-tile full-width" data-color="purple">
                <div className="lp-tile-header">
                  <div className="lp-tile-icon">🤝</div>
                  <div>
                    <div className="lp-tile-title">Handelsregime & WTO</div>
                    <div className="lp-tile-subtitle">Regelwerk des Welthandels</div>
                  </div>
                </div>
                <div className="lp-tile-body">
                  <div style={{display:'grid', gridTemplateColumns:'repeat(auto-fill, minmax(150px, 1fr))', gap:'0.5rem', marginBottom:'0.65rem'}}>
                    <div style={{padding:'0.55rem', borderRadius:'10px', background:'rgba(139,92,246,0.06)', textAlign:'center'}}>
                      <strong style={{fontSize:'0.82rem', display:'block'}}>Meistbegünstigung</strong>
                      <span style={{fontSize:'0.75rem', color:'var(--text-muted)'}}>Gleiche Regeln für alle</span>
                    </div>
                    <div style={{padding:'0.55rem', borderRadius:'10px', background:'rgba(139,92,246,0.06)', textAlign:'center'}}>
                      <strong style={{fontSize:'0.82rem', display:'block'}}>Inländerbehandlung</strong>
                      <span style={{fontSize:'0.75rem', color:'var(--text-muted)'}}>In- = Ausland</span>
                    </div>
                    <div style={{padding:'0.55rem', borderRadius:'10px', background:'rgba(139,92,246,0.06)', textAlign:'center'}}>
                      <strong style={{fontSize:'0.82rem', display:'block'}}>Reziprozität</strong>
                      <span style={{fontSize:'0.75rem', color:'var(--text-muted)'}}>Gegenseitigkeit</span>
                    </div>
                    <div style={{padding:'0.55rem', borderRadius:'10px', background:'rgba(139,92,246,0.06)', textAlign:'center'}}>
                      <strong style={{fontSize:'0.82rem', display:'block'}}>Transparenz</strong>
                      <span style={{fontSize:'0.75rem', color:'var(--text-muted)'}}>Offene Regeln</span>
                    </div>
                  </div>
                  <div style={{display:'grid', gridTemplateColumns:'1fr 1fr 1fr', gap:'0.5rem', marginBottom:'0.5rem'}}>
                    <div style={{padding:'0.5rem', borderRadius:'8px', background:'rgba(139,92,246,0.04)', fontSize:'0.82rem', textAlign:'center'}}>
                      <strong style={{display:'block'}}>Multilateral</strong>
                      <span style={{fontSize:'0.78rem', color:'var(--text-muted)'}}>WTO (164 Mitglieder)</span>
                    </div>
                    <div style={{padding:'0.5rem', borderRadius:'8px', background:'rgba(139,92,246,0.04)', fontSize:'0.82rem', textAlign:'center'}}>
                      <strong style={{display:'block'}}>Regional</strong>
                      <span style={{fontSize:'0.78rem', color:'var(--text-muted)'}}>EU, ASEAN, Mercosur</span>
                    </div>
                    <div style={{padding:'0.5rem', borderRadius:'8px', background:'rgba(139,92,246,0.04)', fontSize:'0.82rem', textAlign:'center'}}>
                      <strong style={{display:'block'}}>Bilateral</strong>
                      <span style={{fontSize:'0.78rem', color:'var(--text-muted)'}}>CETA, EU-Japan</span>
                    </div>
                  </div>
                  {expanded === 'wto' && (
                    <div style={{marginTop:'0.5rem', padding:'0.65rem', background:'rgba(139,92,246,0.05)', borderRadius:'10px', fontSize:'0.82rem', lineHeight:'1.55'}}>
                      <strong>WTO-Krise (Stand 2026):</strong> USA blockieren seit 2019 die Berufungsinstanz (Appellate Body) – Streitschlichtung eingeschränkt. Doha-Runde gescheitert. Zunehmender Protektionismus. Neue Themen (Digitales, Klima) kaum geregelt. Generaldirektorin: Ngozi Okonjo-Iweala (seit 2021).
                    </div>
                  )}
                  <button onClick={() => toggle('wto')} style={{marginTop:'0.5rem', fontSize:'0.78rem', color:'#7c3aed', background:'none', border:'none', cursor:'pointer', fontFamily:'inherit', fontWeight:600}}>
                    {expanded === 'wto' ? '▲ weniger' : '▼ WTO-Krise & Details'}
                  </button>
                </div>
                <div className="lp-tile-persons">
                  <div className="lp-person"><div className="lp-person-avatar">NO</div><div className="lp-person-info"><strong>Ngozi Okonjo-Iweala</strong><span>WTO-Generaldirektorin seit 2021</span></div></div>
                  <div className="lp-person"><div className="lp-person-avatar">UL</div><div className="lp-person-info"><strong>Ursula von der Leyen</strong><span>EU-Kommissionspräsidentin, EU-Handelspolitik</span></div></div>
                </div>
              </div>

              {/* Verbindungen */}
              <div className="lp-connections">
                <h4>Zusammenhänge erkennen – So hängt alles zusammen</h4>
                <div className="lp-conn-list">
                  <div className="lp-conn-item"><span>Globalisierung</span><span className="arrow">→</span><span>erfordert Erklärung</span><span className="arrow">→</span><span>Smith / Ricardo</span></div>
                  <div className="lp-conn-item"><span>Freihandel</span><span className="arrow">↔</span><span>Protektionismus</span></div>
                  <div className="lp-conn-item"><span>Protektionismus</span><span className="arrow">→</span><span>setzt Hemmnisse ein</span><span className="arrow">→</span><span>Zölle, Quoten</span></div>
                  <div className="lp-conn-item"><span>WTO</span><span className="arrow">→</span><span>regelt Handel</span><span className="arrow">→</span><span>baut Hemmnisse ab</span></div>
                  <div className="lp-conn-item"><span>Ricardo</span><span className="arrow">→</span><span>begründet Freihandel</span></div>
                  <div className="lp-conn-item"><span>FDI + MNU</span><span className="arrow">→</span><span>vertiefen Globalisierung</span></div>
                </div>
              </div>

              {/* Zusammenfassung */}
              <div className="lp-summary">
                <h4>Schlüsselbegriffe für die Prüfung</h4>
                <div className="lp-summary-grid">
                  <div className="lp-summary-item"><strong>Globalisierung</strong><span>Zunehmende weltweite Verflechtung in Wirtschaft, Politik, Kultur</span></div>
                  <div className="lp-summary-item"><strong>FDI</strong><span>Langfristige Auslandsinvestition mit Kontrolle (mind. 10 %)</span></div>
                  <div className="lp-summary-item"><strong>Opportunitätskosten</strong><span>Verzicht auf die nächstbeste Alternative</span></div>
                  <div className="lp-summary-item"><strong>Komparative Kosten</strong><span>Spezialisierung auf Güter mit geringsten Opportunitätskosten</span></div>
                  <div className="lp-summary-item"><strong>Erziehungszoll</strong><span>Zeitweiliger Schutz junger Industrien (infant industry)</span></div>
                  <div className="lp-summary-item"><strong>Meistbegünstigung</strong><span>Handelserleichterungen gelten für alle WTO-Mitglieder gleich</span></div>
                  <div className="lp-summary-item"><strong>Inländerbehandlung</strong><span>Gleichbehandlung inländischer und ausländischer Waren</span></div>
                  <div className="lp-summary-item"><strong>CETA</strong><span>EU-Kanada Freihandelsabkommen (seit 2017 vorläufig)</span></div>
                </div>
              </div>

            </div>
          </div>
          <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />
        </div>
      );
    }

    function QuizSection({ onNavigateToModule, hasNext, nextLabel, onNext, quizData, quizLabel }) {
      const allQuestions = quizData || QUIZ_QUESTIONS;
      const label = quizLabel || '13.2';
      const [questions, setQuestions] = useState(allQuestions);
      const [currentIndex, setCurrentIndex] = useState(0);
      const [answers, setAnswers] = useState({});
      const [answered, setAnswered] = useState(false);

      const q = questions[currentIndex];
      const total = questions.length;
      const selected = answers[currentIndex];
      const isCorrect = selected !== undefined && selected === q?.correct;
      const showFeedback = selected !== undefined;

      const handleSelect = (optionIndex) => {
        if (showFeedback) return;
        setAnswers(prev => ({ ...prev, [currentIndex]: optionIndex }));
        setAnswered(true);
      };

      const handleWeiter = () => {
        setAnswered(false);
        if (currentIndex + 1 < total) setCurrentIndex(currentIndex + 1);
        else setCurrentIndex(total);
      };

      const score = questions.filter((qu, i) => answers[i] === qu.correct).length;
      const wrongTopics = [...new Set(questions.filter((qu, i) => answers[i] !== qu.correct).map(qu => qu.topic))];
      const isComplete = currentIndex >= total && total > 0;

      const restartOnlyWrong = () => {
        const wrongQuestions = questions.filter((qu, i) => answers[i] !== qu.correct);
        setQuestions(wrongQuestions.length > 0 ? wrongQuestions : allQuestions);
        setCurrentIndex(0);
        setAnswers({});
        setAnswered(false);
      };

      const restartAll = () => {
        setQuestions(allQuestions);
        setCurrentIndex(0);
        setAnswers({});
        setAnswered(false);
      };

      if (total === 0) {
        return (
          <div className="content">
            <div className="curriculum-badge">Kerncurriculum {label} · Niedersachsen</div>
            <h2 className="section-title">Quiz</h2>
            <p>Keine Fragen zum Wiederholen. Du hast alle richtig beantwortet.</p>
            <button type="button" className="primary" onClick={restartAll}>Komplett wiederholen</button>
            {hasNext && nextLabel && onNext && <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />}
          </div>
        );
      }

      if (isComplete) {
        return (
          <div className="content">
            <div className="curriculum-badge">Kerncurriculum {label} · Niedersachsen</div>
            <h2 className="section-title">Quiz: Auswertung</h2>
            <div className="quiz-score">
              <div className="number">{score} / {total}</div>
              <div className="label">Punkte</div>
            </div>
            {wrongTopics.length > 0 && (
              <div className="content-block">
                <h4>Diese Themen könntest du wiederholen</h4>
                <p style={{ marginBottom: '0.75rem', fontSize: '0.95rem' }}>Klicke auf ein Thema, um direkt zum Modul zu springen:</p>
                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>
                  {wrongTopics.map(topic => {
                    const nav = QUIZ_TOPIC_TO_MODULE[topic];
                    if (!nav) return <span key={topic} className="quiz-topic-tag">{topic}</span>;
                    return (
                      <button
                        key={topic}
                        type="button"
                        className="quiz-topic-tag"
                        style={{ cursor: 'pointer', border: '2px solid var(--primary)' }}
                        onClick={() => onNavigateToModule && onNavigateToModule(nav.courseId, nav.moduleId)}
                      >
                        {topic} →
                      </button>
                    );
                  })}
                </div>
                <button type="button" className="antwort-toggle" style={{ marginTop: '1rem' }} onClick={restartOnlyWrong}>
                  Nur falsche Fragen nochmal
                </button>
              </div>
            )}
            <button type="button" className="primary" style={{ marginTop: '1rem' }} onClick={restartAll}>
              Komplett wiederholen
            </button>
            {hasNext && nextLabel && onNext && <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />}
          </div>
        );
      }

      return (
        <div className="content">
          <div className="curriculum-badge">Kerncurriculum {label} · Niedersachsen</div>
          <h2 className="section-title">Quiz: {label}</h2>
          <p className="section-intro">
            Wähle eine Antwort – du siehst sofort, ob sie richtig ist, und kannst mit „Weiter“ zur nächsten Frage.
          </p>
          <p style={{ fontSize: '0.9rem', color: 'var(--text-muted)', marginBottom: '1rem' }}>
            Frage {currentIndex + 1} von {total}
          </p>
          <div className="quiz-card">
            <h3>{q.question}</h3>
            {q.topic && <div className="quiz-topic-tag">Thema: {q.topic}</div>}
            <div className="quiz-options">
              {q.options.map((opt, oIndex) => {
                let cls = 'quiz-option';
                if (showFeedback) {
                  cls += ' disabled';
                  if (oIndex === q.correct) cls += ' correct';
                  else if (selected === oIndex) cls += ' wrong';
                }
                return (
                  <button
                    key={oIndex}
                    className={cls + (selected === oIndex ? ' active' : '')}
                    onClick={() => handleSelect(oIndex)}
                  >
                    {opt}
                  </button>
                );
              })}
            </div>
            {showFeedback && (
              <div className="quiz-explanation">
                <strong>{isCorrect ? 'Richtig.' : 'Falsch.'}</strong> {q.explanation}
              </div>
            )}
            {showFeedback && (
              <button
                type="button"
                className="primary"
                style={{ marginTop: '1rem', padding: '0.6rem 1.5rem' }}
                onClick={handleWeiter}
              >
                {currentIndex + 1 < total ? 'Weiter zur nächsten Frage' : 'Zur Auswertung'}
              </button>
            )}
          </div>
          {hasNext && nextLabel && onNext && !showFeedback && <NextSection hasNext={hasNext} nextLabel={nextLabel} onNext={onNext} />}
        </div>
      );
    }

    function getPowiBotResponse(text) {
      const t = (text || '').toLowerCase().trim();
      if (!t) return 'Stell mir eine Verständnisfrage zum Abitur Politik-Wirtschaft (Kerncurriculum Niedersachsen). Z.B.: Verfassungsorgane, Demokratietheorien, Markt und Staat, Wirtschaftspolitik, Sicherheit, Entwicklungspolitik.';
      if (/hallo|hi|hey/.test(t)) return 'Hallo! Ich bin dein Lern-Bot für Abitur Politik-Wirtschaft (KC Niedersachsen). Frag mich z.B. nach Verfassungsorganen, Demokratie, Markt, Wirtschaftspolitik oder Prüfungsfragen.';
      if (/verfassungsorgan|bundestag|bundesrat|kanzler|bundespräsident|bverfg|bundesverfassungsgericht/.test(t)) return 'Die fünf Verfassungsorgane: Bundestag (Volksvertretung, wählt Kanzler:in), Bundesrat (Länder), Bundesregierung (Kanzler:in mit Richtlinienkompetenz), Bundespräsident:in (Staatsoberhaupt), Bundesverfassungsgericht (Karlsruhe, Normenkontrolle). Stand 2026: Bundeskanzler Friedrich Merz (CDU).';
      if (/richtlinienkompetenz/.test(t)) return 'Richtlinienkompetenz: Die Bundeskanzler:in bestimmt die Grundzüge der Politik; die Minister:innen führen ihren Bereich in diesem Rahmen.';
      if (/demokratie|normativ|empirisch|john stuart mill|schumpeter/.test(t)) return 'Demokratietheorien: normativ (wie Demokratie sein soll, z.B. Partizipation) vs. empirisch (wie sie funktioniert). John Stuart Mill: repräsentative Demokratie, gebildete Abgeordnete, Minderheitenschutz. In der App findest du die Themen 12.1 Demokratietheorien und Partizipation.';
      if (/markt|soziale marktwirtschaft|ordnungspolitik/.test(t)) return 'Markt und Staat: Soziale Marktwirtschaft verbindet Wettbewerb mit sozialem Ausgleich. Ordnungspolitik setzt Rahmen (Recht, Wettbewerb); Prozesspolitik greift in Abläufe ein. Magisches Sechseck: Preisniveau, Beschäftigung, Wachstum, Außenhandel, Verteilung, Umwelt.';
      if (/magisch|sechseck/.test(t)) return 'Das Magische Sechseck der Wirtschaftspolitik: (1) Preisniveau stabil, (2) hoher Beschäftigungsstand, (3) Wachstum, (4) außenwirtschaftliches Gleichgewicht, (5) gerechte Verteilung, (6) umweltverträgliches Wirtschaften. Ziele können in Konflikt stehen.';
      if (/nato|bundeswehr|sicherheit|zeitenwende/.test(t)) return 'Sicherheitspolitik: NATO (Stand 2026: Generalsekretär Mark Rutte). Bundeswehr u.a. in eFP Litauen. „Zeitenwende“ (Scholz, 27.2.2022) steht für veränderte Sicherheitslage und mehr Verteidigungsinvestitionen.';
      if (/entwicklung|bmz|armut/.test(t)) return 'Entwicklungspolitik: Ziele z.B. Armutsreduktion, Nachhaltigkeit. BMZ koordiniert deutsche Entwicklungspolitik. Du findest das in 13.2 und in den Modulen zu globaler Ungleichheit.';
      if (/prüfung|abitur|frage|klausur/.test(t)) return 'In jedem Modul gibt es Prüfungsfragen zum Abrufen (aufklappen) und ein Quiz. Nutze „Schwache Themen“ nach dem Quiz, um gezielt zu wiederholen.';
      if (/kerncurriculum|kc|halbjahr|12\.|13\./.test(t)) return 'Kerncurriculum: 12.1 Demokratie, 12.2 Wirtschaft, 13.1 Konflikte/Sicherheit, 13.2 Globalisierung. In der App siehst du alle Halbjahre und Module mit Lernpfad, Karten, Prüfungsfragen und Quiz.';
      if (/danke|super|gut|ok/.test(t)) return 'Gern! Viel Erfolg bei der Prüfungsvorbereitung.';
      return 'Zu diesem Stichwort habe ich keine passende Antwort. Frag konkret z.B. nach Verfassungsorganen, Demokratietheorien, Magischem Sechseck, NATO oder Prüfungsfragen – dann kann ich dir gezielt helfen.';
    }

    // Optional: API-Anbindung mit Kontext (System-Prompt). Backend hält API-Key sicher.
    // Erwartetes Request-Body: { systemPrompt: string, messages: [{ role: 'user'|'assistant', content: string }] }
    // Erwartete Response: { reply: string } ODER { content: string } ODER OpenAI-Format { choices: [{ message: { content } }] }
    const CHATBOT_API_URL = ''; // z.B. 'https://dein-server.de/api/chat' – leer = nur lokaler Bot
    const CHATBOT_SYSTEM_PROMPT = `Du bist ein Lern-Assistent für das Fach Politik-Wirtschaft, Abitur Kerncurriculum Niedersachsen.
Kontext: Die Lernapp umfasst vier Halbjahre: 12.1 (Demokratie, Verfassungsorgane, Partizipation, Demokratietheorien, politische Akteure), 12.2 (Markt und Staat, Wirtschaftspolitik, Magisches Sechseck, Prinzipien), 13.1 (Konflikte/Kriege, Terrorismus, Sicherheitspolitik), 13.2 (Globalisierung, Theorien, Leitbilder, Hemmnisse, Regime).
Aktuelle Angaben Stand 2026: Bundeskanzler Friedrich Merz (CDU), Bundespräsident Frank-Walter Steinmeier, NATO-Generalsekretär Mark Rutte. Begriffe wie „Zeitenwende“ (geprägt von Olaf Scholz, 27.2.2022) sind historisch einzuordnen.
Antworte prägnant, sachlich und prüfungsorientiert. Wenn du unsicher bist, verweise auf die Themen in der App. Sprache: Deutsch.`;

    async function chatWithApi(apiUrl, systemPrompt, messages) {
      const body = { systemPrompt, messages: messages.map(m => ({ role: m.role, content: m.text })) };
      const res = await fetch(apiUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(body),
      });
      if (!res.ok) throw new Error(res.statusText);
      const data = await res.json();
      if (data.reply) return data.reply;
      if (data.content) return data.content;
      if (data.choices && data.choices[0] && data.choices[0].message && data.choices[0].message.content) return data.choices[0].message.content;
      throw new Error('Ungültiges API-Format');
    }

    function PowiChatBot() {
      const [open, setOpen] = useState(false);
      const [messages, setMessages] = useState([
        { role: 'bot', text: 'Hallo! Ich bin dein Lern-Bot für Abitur Politik-Wirtschaft (KC Niedersachsen). Stell mir Verständnisfragen – z.B. zu Verfassungsorganen, Demokratie, Markt, Sicherheitspolitik oder Prüfungsfragen.' }
      ]);
      const [input, setInput] = useState('');
      const [loading, setLoading] = useState(false);
      const apiUrl = (typeof CHATBOT_API_URL === 'string' && CHATBOT_API_URL.trim()) ? CHATBOT_API_URL.trim() : '';
      const send = async () => {
        const val = input.trim();
        if (!val || loading) return;
        setInput('');
        setLoading(true);
        setMessages(m => [...m, { role: 'user', text: val }, { role: 'bot', text: '…', loading: true }]);
        try {
          let reply;
          if (apiUrl) {
            const recent = [...messages, { role: 'user', text: val }].slice(-10);
            reply = await chatWithApi(apiUrl, CHATBOT_SYSTEM_PROMPT, recent);
          } else {
            reply = getPowiBotResponse(val);
          }
          setMessages(m => m.filter(msg => !msg.loading).concat([{ role: 'bot', text: reply }]));
        } catch (err) {
          const fallback = getPowiBotResponse(val);
          setMessages(m => m.filter(msg => !msg.loading).concat([{ role: 'bot', text: 'API nicht erreichbar. Lokale Antwort: ' + fallback }]));
        } finally {
          setLoading(false);
        }
      };
      return (
        <>
          <button type="button" className="chatbot-toggle" onClick={() => setOpen(o => !o)} aria-label="Lern-Bot öffnen">💬</button>
          {open && (
            <div className="chatbot-panel">
              <div className="chatbot-panel-header">Abitur PoWi – Verständnisfragen</div>
              <div className="chatbot-messages">
                {messages.map((msg, i) => (
                  <div key={i} className={'chatbot-msg ' + msg.role + (msg.loading ? ' loading' : '')}>{msg.text}</div>
                ))}
              </div>
              <div className="chatbot-input-wrap">
                <input type="text" placeholder="Frage eingeben…" value={input} onChange={e => setInput(e.target.value)} onKeyDown={e => e.key === 'Enter' && send()} disabled={loading} />
                <button type="button" onClick={send} disabled={loading}>{loading ? '…' : 'Senden'}</button>
              </div>
            </div>
          )}
        </>
      );
    }

    const QUIZ_DATA_MAP = {
      'QUIZ_12_1': QUIZ_12_1,
      'QUIZ_12_2': QUIZ_12_2,
      'QUIZ_13_1': QUIZ_13_1,
      'QUIZ_QUESTIONS': QUIZ_QUESTIONS,
    };

    const SECTION_COMPONENTS = {
      GlobalSection, TheoriesSection, LeitbilderSection, HemmnisseSection,
      RegimeSection, FlashcardsSection, QuizSection, CurriculumOutlineSection, FullContentSection,
      Lernplakat132
    };

    function App() {
      const [courseId, setCourseId] = useState(null);
      const [moduleId, setModuleId] = useState(null);
      const [visited, setVisited] = useState(() => {
        try {
          const s = localStorage.getItem('politik-app-visited');
          return s ? JSON.parse(s) : {};
        } catch (e) { return {}; }
      });
      const onVisited = (id) => {
        setVisited(prev => {
          const next = { ...prev, [id]: true };
          try { localStorage.setItem('politik-app-visited', JSON.stringify(next)); } catch (e) {}
          return next;
        });
      };

      const course = courseId ? COURSES.find(c => c.id === courseId) : null;
      const modules = course ? course.modules : [];
      const moduleIndex = moduleId ? modules.findIndex(m => m.id === moduleId) : -1;
      const currentModule = moduleIndex >= 0 ? modules[moduleIndex] : null;
      const nextModule = moduleIndex >= 0 ? modules[moduleIndex + 1] : null;
      const visitKey = (cid, mid) => (cid && mid) ? `${cid}-${mid}` : null;

      React.useEffect(() => {
        if (courseId && moduleId) window.scrollTo(0, 0);
      }, [courseId, moduleId]);
      const progressProps = {
        hasNext: !!nextModule,
        nextLabel: nextModule?.label,
        onNext: () => { if (nextModule) { setModuleId(nextModule.id); window.scrollTo(0, 0); } },
        onNavigateToModule: (cid, mid) => { setCourseId(cid); setModuleId(mid); window.scrollTo(0, 0); },
      };
      const isCourseList = courseId === null;
      const isModuleGrid = courseId && !moduleId;
      const isModuleContent = courseId && moduleId;

      const ActiveComponent = isModuleContent && currentModule ? SECTION_COMPONENTS[currentModule.component] : null;

      return (
        <div className="app">
          <header className="header">
            <div className="header-inner">
              <h1>{course ? course.name : 'Abitur Politik-Wirtschaft'}</h1>
              <p className="tagline">
                <strong>Lern deinen Weg</strong>
                {course ? ` · Kerncurriculum ${course.curriculum}` : ' · Niedersachsen'}
                {' · Abitur Politik-Wirtschaft (Niedersachsen)'}
              </p>
            </div>
          </header>
          <div className={'livecharts-container' + (SHOW_LIVECHARTS ? '' : ' livecharts-hidden')} aria-hidden={!SHOW_LIVECHARTS}>
            <div className="livecharts-inner">
              {/* Platzhalter für Livecharts / WhatsApp-Bot: Hier iframe, Embed oder Bot-UI einbinden */}
            </div>
          </div>
          {isModuleContent && (
            <div className="progress-wrap">
              <div className="progress-bar">
                {modules.map((mod, i) => (
                  <button
                    key={mod.id}
                    type="button"
                    className={'progress-step' + (moduleId === mod.id ? ' active' : '') + (visited[visitKey(courseId, mod.id)] && moduleId !== mod.id ? ' done' : '')}
                    onClick={() => setModuleId(mod.id)}
                    title={mod.label}
                  >
                    <span className="dot" />
                    <span>{i + 1}</span>
                  </button>
                ))}
              </div>
            </div>
          )}
          <nav className="nav">
            <button type="button" className={'nav-btn' + (isCourseList ? ' active' : '')} onClick={() => { setCourseId(null); setModuleId(null); }}>Halbjahre</button>
            {course && (
              <>
                <button type="button" className={'nav-btn' + (isModuleGrid ? ' active' : '')} onClick={() => setModuleId(null)}>Übersicht</button>
                {modules.map(mod => (
                  <button
                    key={mod.id}
                    type="button"
                    className={'nav-btn' + (moduleId === mod.id ? ' active' : '')}
                    onClick={() => setModuleId(mod.id)}
                  >
                    {mod.label}
                    {visited[visitKey(courseId, mod.id)] && <span className="visited-dot" />}
                  </button>
                ))}
              </>
            )}
          </nav>
          <main className="app-main">
            {isCourseList && <CourseListSection onSelectCourse={(id) => { setCourseId(id); setModuleId(null); }} visited={visited} />}
            {isModuleGrid && <ModuleGridSection course={course} onVisited={onVisited} onSelectModule={setModuleId} visited={visited} />}
            {isModuleContent && (
              <>
                <div className="back-link-wrap">
                  <button type="button" className="back-link" onClick={() => setModuleId(null)}>← Zur Übersicht</button>
                </div>
                {ActiveComponent ? (
                  <ActiveComponent
                    module={currentModule}
                    content={MODULE_CONTENT[courseId + '-' + moduleId]}
                    moduleKey={courseId && moduleId ? courseId + '-' + moduleId : null}
                    onVisited={() => onVisited(visitKey(courseId, moduleId))}
                    visited={visited}
                    quizData={currentModule.quizData ? QUIZ_DATA_MAP[currentModule.quizData] : undefined}
                    quizLabel={currentModule.quizLabel || undefined}
                    {...progressProps}
                  />
                ) : (
                  <div className="content" style={{ padding: '2rem' }}><p>Modul „{currentModule?.label}“ konnte nicht geladen werden.</p></div>
                )}
              </>
            )}
          </main>
          <footer className="app-footer">
            Abitur Politik-Wirtschaft (Niedersachsen). Lern deinen Weg – interaktiv und an dich angepasst. Weitere Halbjahre können ergänzt werden.
          </footer>
          <PowiChatBot />
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
